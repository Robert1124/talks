<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beyond ChatGPT - AI in Education Research</title>
    <script>
        (function () {
            const isNarrowPortrait = window.matchMedia('(max-width: 900px) and (orientation: portrait)').matches;
            if (isNarrowPortrait) {
                window.location.replace('mobile.html');
            }
        })();
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow-x: hidden;
        }

        .page {
            height: 100vh;
            width: 100vw;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scroll-container {
            height: 100vh;
            overflow-y: hidden;
            position: relative;
        }

        /* Background layer - fixed */
        .background-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 0;
            pointer-events: none;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #533483 75%, #e94560 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        /* Content layer - moves */
        .content-layer {
            position: relative;
            z-index: 1;
            will-change: transform;
            width: 100vw;
        }

        /* Page 1: Cover */
        #page1 {
            background: transparent;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #particles-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .content {
            position: relative;
            z-index: 10;
            text-align: center;
            color: white;
            padding: 2rem;
            margin-top: -20vh;
        }

        .main-title {
            font-size: clamp(2.5rem, 8vw, 6rem);
            font-weight: 900;
            margin-bottom: 1.5rem;
            opacity: 0;
            animation: fadeInUp 2s ease forwards;
            text-shadow: 0 0 30px rgba(233, 69, 96, 0.5);
            line-height: 1.2;
        }

        .main-title .light {
            font-size: 0.65em;
            font-weight: 900;
            opacity: 0.9;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
            from {
                opacity: 0;
                transform: translateY(30px);
            }
        }

        .subtitle {
            font-size: clamp(2rem, 6vw, 4.5rem);
            font-weight: 700;
            color: #e94560;
            margin-top: 2rem;
            opacity: 0;
            overflow: hidden;
            border-right: 3px solid #e94560;
            white-space: nowrap;
            display: inline-block;
            animation: typing 1.5s steps(13) 2s forwards, blink 0.75s step-end infinite;
        }

        @keyframes typing {
            from { 
                width: 0;
                opacity: 1;
            }
            to { 
                width: 13ch;
                opacity: 1;
            }
        }

        @keyframes blink {
            50% { border-color: transparent; }
        }

        .info {
            position: absolute;
            bottom: -10rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(1rem, 3vw, 2rem);
            font-weight: 200;
            opacity: 0;
            animation: fadeIn 1s ease 3.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 0.8; }
        }

        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            animation: fadeIn 1s ease 5.5s forwards, bounce 2s ease-in-out 6.5s infinite;
            z-index: 10;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(10px); }
        }

        .scroll-indicator svg {
            width: 30px;
            height: 30px;
            fill: white;
        }

        .glow {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5),
                         0 0 40px rgba(233, 69, 96, 0.3);
        }

        /* Page 2: Iceberg */
        #page2 {
            background: transparent;
            position: relative;
            align-items: flex-end;
        }

        .iceberg-image {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100vw;
            height: auto;
            object-fit: cover;
            object-position: center bottom;
            z-index: 1;
        }

        .iceberg-below-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: auto;
            object-fit: cover;
            object-position: center top;
            z-index: 1;
        }

        .page2-content {
            position: relative;
            z-index: 10;
            text-align: center;
            width: 90%;
            max-width: 1000px;
            margin-bottom: 60vh;
        }

        .page2-title {
            font-size: clamp(2rem, 5vw, 4rem);
            font-weight: 900;
            color: white;
            text-shadow: 
                0 0 20px rgba(255, 255, 255, 0.5),
                0 0 40px rgba(30, 136, 229, 0.4),
                0 4px 10px rgba(0, 0, 0, 0.3);
            opacity: 0;
            animation: titleFadeIn 1s ease-out 0.5s forwards;
            text-align: center;
            line-height: 1.2;
        }

        .title-line {
            display: block;
        }

        .title-fixed {
            display: inline-block;
            position: relative;
        }

        .title-moving {
            display: inline-block;
            position: relative;
        }

        @keyframes titleFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Page 4: AI Capabilities */
        #page4 {
            background: transparent;
            position: relative;
            padding: 3rem;
            overflow-y: auto;
            will-change: transform;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Page 4 slides out to the left when moving to page 5 */
        #page4.slide-out {
            transform: translateX(-100vw) !important;
            z-index: 1;
        }

        /* Page 5: New Page */
        #page5 {
            background: transparent;
            position: absolute;
            top: 300vh; /* Initially positioned at page 5's normal position (4 * 100vh) */
            left: 0;
            height: 100vh;
            width: 100vw;
            padding: 3rem;
            overflow-y: auto;
            will-change: transform;
            transform: translateX(100vw);
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), top 0s linear 0.8s;
            opacity: 1;
            visibility: visible;
            z-index: 2;
        }
        
        /* Keep page5 visible when on page 6 so title and icons can animate */
        #page5.stay-visible {
            opacity: 1 !important;
            visibility: visible !important;
            z-index: 2 !important;
        }
        
        /* When page 5 is sliding in, position it at page 4's location */
        #page5.slide-in {
            top: 300vh; /* Same vertical position as page 4 (3 * 100vh) */
            transform: translateX(0) !important;
            z-index: 2;
        }
        
        /* When page 5 is sliding out to the right */
        #page5.slide-out {
            transform: translateX(100vw) !important;
            z-index: 2;
        }

        /* When transitioning between page 4 and page 5, prevent vertical scrolling */
        .content-layer.no-vertical-scroll {
            transition: none !important;
        }

        /* Page 6: New Page */
        #page6 {
            background: transparent;
            position: absolute;
            top: 300vh; /* Same position as page 5, since contentLayer stays at page 5 position when on page 6 */
            left: 0;
            height: 100vh;
            width: 100vw;
            padding: 0;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            z-index: 3;
        }

        .page6-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            padding-top: 180px; /* Leave space for top logos (80px + 100px margin) */
        }
        
        #page7 {
            background: transparent;
            position: absolute;
            top: 300vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            padding: 0;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            z-index: 3;
        }
        
        /* Page 7 container moves up and fades out when transitioning to page 8 */
        .page7-container.slide-up-out {
            transform: translateY(-100vh);
            opacity: 0;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
        }
        
        /* All elements inside page7-container move up and fade out */
        .page7-container.slide-up-out * {
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
            transform: translateY(-50vh);
            opacity: 0;
        }
        
        /* StatPal Wrapper (contains page8, page9, and shared header) */
        .statpal-wrapper {
            position: absolute;
            top: 705vh;
            left: 0;
            width: 100vw;
            opacity: 0;
            visibility: hidden;
            z-index: 10;
            transform: translateY(100vh);
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
        }
        
        .statpal-wrapper.visible {
            opacity: 1 !important;
            visibility: visible !important;
            transform: translateY(0) !important;
        }
        
        /* Page 8: StatPal */
        #page8 {
            background: transparent;
            position: absolute;
            top: 0;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem;
        }
        
        /* Page 8 header - initially positioned at top of statpal-wrapper */
        .page8-header {
            position: absolute;
            top: 6rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 12;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            transition: top 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), position 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 1;
            visibility: visible;
        }
        
        /* Page 8 header moves to top when transitioning to page 9 */
        .page8-header.move-to-top {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
        }
        
        /* Page 8 container slides out to left when transitioning to page 9 */
        .page8-container.slide-out-left {
            transform: translateX(-100vw);
            opacity: 0;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
        }
        
        /* Page 9: Screenshot */
        #page9 {
            background: transparent;
            position: absolute;
            top: 18vh;
            left: 16vw;
            height: 70vh;
            width: 70vw;
            opacity: 0;
            visibility: hidden;
            z-index: 11;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem;
            transform: translateX(100vw);
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
        }
        
        /* Ensure slide-out-left works even when visible is removed */
        #page9:not(.visible).slide-out-left {
            transform: translateX(-100vw) !important;
            opacity: 0 !important;
        }
        
        #page9.visible {
            opacity: 1 !important;
            visibility: visible !important;
            transform: translateX(0) !important;
        }
        
        #page9.slide-out-right {
            transform: translateX(100vw) !important;
            opacity: 0;
        }
        
        #page9.slide-out-left {
            transform: translateX(-100vw) !important;
            opacity: 0 !important;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease !important;
        }
        
        /* Page 10: Screenshot 2 */
        #page10 {
            background: transparent;
            position: absolute;
            top: 5vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            opacity: 0;
            visibility: hidden;
            z-index: 11;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem;
            transform: translateX(100vw);
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
        }
        
        #page10.visible {
            opacity: 1 !important;
            visibility: visible !important;
            transform: translateX(0) !important;
        }
        
        #page10.slide-out-right {
            transform: translateX(100vw) !important;
            opacity: 0;
        }
        
        #page10.slide-out-left {
            transform: translateX(-100vw) !important;
            opacity: 0 !important;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease !important;
        }
        
        /* Page 11: Screenshot 3 */
        #page11 {
            background: transparent;
            position: absolute;
            top: 20vh;
            left: 15vw;
            height: 70vh;
            width: 70vw;
            opacity: 0;
            visibility: hidden;
            z-index: 11;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem;
            transform: translateX(100vw);
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
        }
        
        #page11.visible {
            opacity: 1 !important;
            visibility: visible !important;
            transform: translateX(0) !important;
        }
        
        #page11.slide-out-right {
            transform: translateX(100vw) !important;
            opacity: 0;
        }
        
        #page11.slide-out-left {
            transform: translateX(-100vw) !important;
            opacity: 0 !important;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease !important;
        }
        
        .page9-screenshot {
            max-width: 90%;
            max-height: 90vh;
            width: auto;
            height: auto;
            border-radius: 12px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.4),
                0 8px 24px rgba(0, 0, 0, 0.3),
                0 0 0 2px rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem;
            backdrop-filter: blur(10px);
            object-fit: contain;
        }
        
        /* StudyGroup Intro Page */
        #studygroup-intro {
            background: transparent;
            position: absolute;
            top: 800vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 3rem;
        }
        
        .studygroup-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 900;
            color: white;
            margin: 0 0 2rem 0;
            text-shadow: 0 0 20px rgba(96, 165, 250, 0.5), 0 0 40px rgba(167, 139, 250, 0.3);
            background: linear-gradient(135deg, #60a5fa, #a78bfa, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }
        
        .studygroup-description {
            font-size: clamp(1rem, 1.8vw, 1.3rem);
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.8;
            margin: 0;
            max-width: 900px;
            text-align: center;
        }
        
        /* Limitations & Risks Title Page */
        #placeholder1 {
            background: transparent;
            position: absolute;
            top: 900vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 3rem;
        }
        
        .limitations-main-title {
            font-size: clamp(3rem, 7vw, 6rem);
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 0 0 1rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0.5s forwards;
            line-height: 1.2;
        }
        
        .limitations-main-title .emphasis {
            font-style: italic;
            display: block;
            margin-top: 0.5rem;
        }
        
        @keyframes titleFadeIn {
            0% {
                opacity: 0;
                transform: translateY(-20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .limitations-warning-icon {
            font-size: clamp(6rem, 12vw, 10rem);
            margin: 2rem 0;
            opacity: 0;
            transform: scale(0);
            animation: warningPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) 1.5s forwards,
                       warningPulse 2s ease-in-out 2s infinite;
            filter: drop-shadow(0 0 20px rgba(255, 165, 0, 0.6));
        }
        
        @keyframes warningPop {
            0% {
                opacity: 0;
                transform: scale(0);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes warningPulse {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(255, 165, 0, 0.6));
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 40px rgba(255, 165, 0, 0.9));
                transform: scale(1.05);
            }
        }
        
        .limitations-subtitle {
            font-size: clamp(1.2rem, 2.5vw, 1.8rem);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin: 0;
            opacity: 0;
            transform: translateY(30px);
            animation: subtitleSlideIn 1s ease-out 2.5s forwards;
        }
        
        @keyframes subtitleSlideIn {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 0.8;
                transform: translateY(0);
            }
        }
        
        /* AI is not deterministic Demo Page */
        #page-deterministic-demo {
            background: transparent;
            position: absolute;
            top: 1000vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 3rem;
            overflow-y: auto;
        }
        
        .deterministic-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 0 0 0.5rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0.5s forwards;
        }
        
        .deterministic-subtitle {
            font-size: clamp(1.5rem, 3vw, 2.5rem);
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            margin: 0 0 3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 1s forwards;
        }
        
        .deterministic-demo {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto 3rem;
            position: relative;
        }
        
        .deterministic-input-box {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 0 auto;
            max-width: 600px;
            opacity: 0;
            transform: translateY(20px);
            position: relative;
            z-index: 1;
        }
        
        .deterministic-input-box.visible {
            animation: boxFadeIn 0.5s ease-out forwards;
        }
        
        @keyframes boxFadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .deterministic-input-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .deterministic-input-text {
            font-size: 1.1rem;
            color: white;
            line-height: 1.6;
            min-height: 3rem;
        }
        
        .deterministic-outputs-container {
            display: flex;
            justify-content: space-around;
            gap: 3rem;
            margin-top: 8rem;
            position: relative;
            z-index: 1;
        }
        
        .deterministic-output-box {
            flex: 1;
            max-width: 400px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1.5rem;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .deterministic-output-box.output1 {
            border: 2px solid rgba(251, 146, 60, 0.5);
        }
        
        .deterministic-output-box.output2 {
            border: 2px solid rgba(251, 191, 36, 0.5);
        }
        
        .deterministic-output-box.visible {
            animation: boxFadeIn 0.5s ease-out forwards;
        }
        
        .deterministic-output-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .deterministic-output-text {
            font-size: 1rem;
            color: white;
            line-height: 1.6;
            min-height: 4rem;
        }
        
        .deterministic-output-text .highlight-diff {
            background: rgba(239, 68, 68, 0.3);
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .deterministic-output-text .highlight-diff.yellow {
            background: rgba(251, 191, 36, 0.3);
        }
        
        .deterministic-arrow {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 200px;
            opacity: 0;
            pointer-events: none;
            z-index: 0;
        }
        
        .deterministic-arrow.visible {
            animation: arrowFadeIn 0.5s ease-out forwards;
        }
        
        @keyframes arrowFadeIn {
            to {
                opacity: 1;
            }
        }
        
        .deterministic-arrow svg {
            width: 100%;
            height: 100%;
        }
        
        .deterministic-arrow path {
            stroke: rgba(251, 146, 60, 0.6);
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 5, 5;
            animation: arrowFlow 2s linear infinite;
        }
        
        .deterministic-arrow path.arrow-head {
            fill: rgba(251, 146, 60, 0.6);
            stroke: none;
        }
        
        @keyframes arrowFlow {
            0% {
                stroke-dashoffset: 0;
            }
            100% {
                stroke-dashoffset: 20;
            }
        }
        
        /* AI Non-determinism Impact Page */
        #page-deterministic-impact {
            background: transparent;
            position: absolute;
            top: 1100vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 1.5rem 3rem;
            overflow-y: auto;
        }
        
        .impact-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 0 0 0.3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0s forwards;
        }
        
        .impact-subtitle {
            font-size: clamp(1rem, 2vw, 1.3rem);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin: 0 0 1.5rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0.5s forwards;
        }
        
        .impact-cards-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
            width: 100%;
            max-width: 1200px;
            margin-top: 6rem;
        }
        
        .impact-card {
            flex: 1;
            max-width: 280px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 0.8rem;
            opacity: 0;
            transform: translateY(30px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            min-height: auto;
        }
        
        .impact-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .impact-card.card1 {
            border: 2px solid #f97316;
            box-shadow: 0 0 10px rgba(249, 115, 22, 0.3);
            animation: cardSlideIn 0.5s ease-out 1.2s forwards;
        }
        
        .impact-card.card2 {
            border: 2px solid #fbbf24;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.3);
            animation: cardSlideIn 0.5s ease-out 1.5s forwards;
        }
        
        .impact-card.card3 {
            border: 2px solid #d97706;
            box-shadow: 0 0 10px rgba(217, 119, 6, 0.3);
            animation: cardSlideIn 0.5s ease-out 1.8s forwards;
        }
        
        @keyframes cardSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .impact-card-icon {
            font-size: 1.5rem;
            margin-bottom: 0.3rem;
            display: block;
        }
        
        .impact-card-title {
            font-size: 0.95rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        .impact-card-content {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.4;
        }
        
        .impact-card-content p {
            margin: 0.3rem 0;
            opacity: 0;
            animation: contentFadeIn 0.5s ease-out forwards;
        }
        
        .impact-card-content p:nth-child(1) {
            animation-delay: 2.2s;
        }
        
        .impact-card-content p:nth-child(2) {
            animation-delay: 2.5s;
        }
        
        .impact-card-content p:nth-child(3) {
            animation-delay: 2.8s;
        }
        
        .impact-card-content p:nth-child(4) {
            animation-delay: 3.1s;
        }
        
        .impact-card-content ul {
            list-style: none;
            padding: 0;
            margin: 0.5rem 0;
        }
        
        .impact-card-content ul li {
            padding-left: 1rem;
            position: relative;
            opacity: 0;
            animation: contentFadeIn 0.5s ease-out forwards;
        }
        
        .impact-card-content ul li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .impact-card.card1 .impact-card-content ul li {
            animation-delay: 3.4s;
        }
        
        .impact-card.card2 .impact-card-content ul li {
            animation-delay: 3.4s;
        }
        
        .impact-card.card3 .impact-card-content ul li {
            animation-delay: 3.4s;
        }
        
        @keyframes contentFadeIn {
            to {
                opacity: 1;
            }
        }
        
        .impact-considerations {
            width: 100%;
            max-width: 900px;
            margin-top: 0.5rem;
        }
        
        .impact-considerations-title {
            font-size: clamp(1rem, 2vw, 1.2rem);
            font-weight: 700;
            color: white;
            text-align: center;
            margin-bottom: 0.5rem;
            opacity: 0;
            animation: titleFadeIn 1s ease-out 5s forwards;
        }
        
        .impact-considerations-subtitle {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            margin-bottom: 0.5rem;
            opacity: 0;
            animation: titleFadeIn 1s ease-out 5.5s forwards;
        }
        
        .impact-considerations-divider {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(251, 146, 60, 0.5), transparent);
            border: none;
            border-top: 1px dashed rgba(251, 146, 60, 0.5);
            margin: 0.5rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-out 5.8s forwards;
        }
        
        .impact-considerations-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .impact-considerations-list li {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.5;
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
            opacity: 0;
            transform: translateY(10px);
            animation: questionSlideIn 0.5s ease-out forwards;
        }
        
        .impact-considerations-list li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: rgba(251, 146, 60, 0.8);
            font-size: 1.2rem;
        }
        
        .impact-considerations-list li:nth-child(1) {
            animation-delay: 6s;
        }
        
        .impact-considerations-list li:nth-child(2) {
            animation-delay: 6.8s;
        }
        
        .impact-considerations-list li:nth-child(3) {
            animation-delay: 7.6s;
        }
        
        .impact-considerations-list li:nth-child(4) {
            animation-delay: 8.4s;
        }
        
        .impact-considerations-list li:nth-child(5) {
            animation-delay: 9.2s;
        }
        
        @keyframes questionSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Hallucination Dangers Page (same style as impact page) */
        #page-hallucination-dangers {
            background: transparent;
            position: absolute;
            top: 1300vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 1.5rem 3rem;
            overflow-y: auto;
        }
        
        /* Reuse impact styles for consistency */
        #page-hallucination-dangers .impact-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 0 0 0.3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0s forwards;
        }
        
        #page-hallucination-dangers .impact-subtitle {
            font-size: clamp(1rem, 2vw, 1.3rem);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin: 0 0 1.5rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0.5s forwards;
        }
        
        #page-hallucination-dangers .impact-cards-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
            width: 100%;
            max-width: 1200px;
            margin-top: 2rem;
        }
        
        #page-hallucination-dangers .impact-card {
            flex: 1;
            max-width: 280px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 0.8rem;
            opacity: 0;
            transform: translateY(30px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            min-height: auto;
        }
        
        #page-hallucination-dangers .impact-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        #page-hallucination-dangers .impact-card.card1 {
            border: 2px solid #f97316;
            box-shadow: 0 0 10px rgba(249, 115, 22, 0.3);
            animation: cardSlideIn 0.5s ease-out 1.2s forwards;
        }
        
        #page-hallucination-dangers .impact-card.card2 {
            border: 2px solid #fbbf24;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.3);
            animation: cardSlideIn 0.5s ease-out 1.5s forwards;
        }
        
        #page-hallucination-dangers .impact-card.card3 {
            border: 2px solid #dc2626;
            box-shadow: 0 0 10px rgba(220, 38, 38, 0.3);
            animation: cardSlideIn 0.5s ease-out 1.8s forwards;
        }
        
        #page-hallucination-dangers .impact-card-icon {
            font-size: 1.5rem;
            margin-bottom: 0.3rem;
            display: block;
        }
        
        #page-hallucination-dangers .impact-card-title {
            font-size: 0.95rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        #page-hallucination-dangers .impact-card-content {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.4;
        }
        
        #page-hallucination-dangers .impact-card-content p {
            margin: 0.3rem 0;
            opacity: 0;
            animation: contentFadeIn 0.5s ease-out forwards;
        }
        
        #page-hallucination-dangers .impact-card-content p:nth-child(1) {
            animation-delay: 2.2s;
        }
        
        #page-hallucination-dangers .impact-card-content p:nth-child(2) {
            animation-delay: 2.5s;
        }
        
        #page-hallucination-dangers .impact-card-content p:nth-child(3) {
            animation-delay: 2.8s;
        }
        
        #page-hallucination-dangers .impact-card-content p:nth-child(4) {
            animation-delay: 3.1s;
        }
        
        #page-hallucination-dangers .impact-card-content ul {
            list-style: none;
            padding: 0;
            margin: 0.5rem 0;
        }
        
        #page-hallucination-dangers .impact-card-content ul li {
            padding-left: 1rem;
            position: relative;
            opacity: 0;
            animation: contentFadeIn 0.5s ease-out forwards;
        }
        
        #page-hallucination-dangers .impact-card-content ul li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: rgba(255, 255, 255, 0.6);
        }
        
        #page-hallucination-dangers .impact-card.card1 .impact-card-content ul li {
            animation-delay: 3.4s;
        }
        
        #page-hallucination-dangers .impact-card.card2 .impact-card-content ul li {
            animation-delay: 3.4s;
        }
        
        #page-hallucination-dangers .impact-card.card3 .impact-card-content ul li {
            animation-delay: 3.4s;
        }
        
        #page-hallucination-dangers .impact-considerations {
            width: 100%;
            max-width: 900px;
            margin-top: 0.5rem;
        }
        
        #page-hallucination-dangers .impact-considerations-title {
            font-size: clamp(1rem, 2vw, 1.2rem);
            font-weight: 700;
            color: white;
            text-align: center;
            margin-bottom: 0.5rem;
            opacity: 0;
            animation: titleFadeIn 1s ease-out 5s forwards;
        }
        
        #page-hallucination-dangers .impact-considerations-subtitle {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            margin-bottom: 0.5rem;
            opacity: 0;
            animation: titleFadeIn 1s ease-out 5.5s forwards;
        }
        
        #page-hallucination-dangers .impact-considerations-divider {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(251, 146, 60, 0.5), transparent);
            border: none;
            border-top: 1px dashed rgba(251, 146, 60, 0.5);
            margin: 0.5rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-out 5.8s forwards;
        }
        
        #page-hallucination-dangers .consideration-section {
            margin-bottom: 1.2rem;
            opacity: 0;
            transform: translateY(10px);
            animation: questionSlideIn 0.5s ease-out forwards;
        }
        
        #page-hallucination-dangers .consideration-section:nth-child(1) {
            animation-delay: 6s;
        }
        
        #page-hallucination-dangers .consideration-section:nth-child(2) {
            animation-delay: 6.8s;
        }
        
        #page-hallucination-dangers .consideration-section:nth-child(3) {
            animation-delay: 7.6s;
        }
        
        #page-hallucination-dangers .consideration-section:nth-child(4) {
            animation-delay: 8.4s;
        }
        
        #page-hallucination-dangers .consideration-section-title {
            font-size: 1rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        #page-hallucination-dangers .consideration-section-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        #page-hallucination-dangers .consideration-section-list li {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.5;
            margin-bottom: 0.4rem;
            padding-left: 1.5rem;
            position: relative;
        }
        
        #page-hallucination-dangers .consideration-section-list li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: rgba(251, 146, 60, 0.8);
            font-size: 1.2rem;
        }
        
        /* Student Data Pipeline Page */
        #page-data-pipeline {
            background: transparent;
            position: absolute;
            top: 1400vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 2rem 3rem;
            overflow-y: auto;
        }
        
        .pipeline-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 0 0 0.3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0s forwards;
        }
        
        .pipeline-subtitle {
            font-size: clamp(1rem, 2vw, 1.3rem);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin: 0 0 3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0.5s forwards;
        }
        
        .pipeline-flow {
            width: 100%;
            max-width: 1200px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
            margin-bottom: 4rem;
            margin-top: 10rem;
        }
        
        .pipeline-step {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            opacity: 0;
            transform: scale(0.8);
        }
        
        .pipeline-step.show {
            animation: stepAppear 0.5s ease-out forwards;
        }
        
        @keyframes stepAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .pipeline-step-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
        }
        
        .pipeline-step-label {
            font-size: 0.9rem;
            color: white;
            text-align: center;
            font-weight: 600;
        }
        
        .pipeline-arrow {
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.6);
            margin: 0 0.5rem;
            opacity: 0;
            transform: translateX(-20px);
        }
        
        .pipeline-arrow.show {
            animation: arrowFadeIn 0.3s ease-out forwards;
        }
        
        @keyframes arrowFadeIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .pipeline-risks {
            width: 100%;
            max-width: 1200px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
        }
        
        .pipeline-risk {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            opacity: 0;
            transform: translateY(20px) scale(0.9);
        }
        
        .pipeline-risk.show {
            animation: riskPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }
        
        @keyframes riskPop {
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .pipeline-risk-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            filter: drop-shadow(0 0 10px rgba(220, 38, 38, 0.6));
        }
        
        .pipeline-risk-title {
            font-size: 0.85rem;
            color: #dc2626;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }
        
        .pipeline-risk-content {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            line-height: 1.4;
            opacity: 0;
        }
        
        .pipeline-risk-content.show {
            animation: contentFadeIn 0.5s ease-out forwards;
        }
        
        /* Tools for Getting Started Page */
        #page-tools {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            position: absolute;
            top: 1500vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 3rem;
            overflow-y: auto;
        }
        
        .tools-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 0 0 0.3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0s forwards;
        }
        
        .tools-subtitle {
            font-size: clamp(1rem, 2vw, 1.3rem);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin: 0 0 3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0.3s forwards;
        }
        
        .tools-cards-container {
            display: flex;
            justify-content: center;
            gap: 3rem;
            width: 100%;
            max-width: 1000px;
            margin-top: 2rem;
        }
        
        .tool-card {
            flex: 1;
            max-width: 400px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 1rem;
            border: 2px solid;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
            opacity: 0;
            animation: cardFadeIn 1s ease-out 0.6s forwards;
        }
        
        @keyframes cardFadeIn {
            to {
                opacity: 1;
            }
        }
        
        .tool-card:hover {
            transform: scale(1.03);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.4);
        }
        
        .tool-card.google {
            border: 2px solid #4285f4;
            box-shadow: 0 0 20px rgba(66, 133, 244, 0.3);
        }
        
        .tool-card.google:hover {
            box-shadow: 0 0 30px rgba(66, 133, 244, 0.5), 0 0 15px rgba(52, 168, 83, 0.3);
            border-color: #34a853;
        }
        
        .tool-card.cursor {
            border: 2px solid #8b5cf6;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }
        
        .tool-card.cursor:hover {
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.5), 0 0 15px rgba(168, 85, 247, 0.3);
            border-color: #a855f7;
        }
        
        .tool-card-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .tool-card-icon {
            font-size: 5rem;
            text-align: center;
            margin-bottom: 1.5rem;
            display: block;
        }
        
        .tool-card-divider {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            margin: 1.5rem 0;
            border: none;
        }
        
        .tool-card-section {
            margin-bottom: 1.5rem;
        }
        
        .tool-card-section-title {
            font-size: 1rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.8rem;
        }
        
        .tool-card-section-text {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
        }
        
        .tool-card-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .tool-card-list li {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            margin-bottom: 0.5rem;
            padding-left: 1.2rem;
            position: relative;
        }
        
        .tool-card-list li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
        }
        
        /* Thank You Page */
        #page-thank-you {
            background: transparent;
            position: absolute;
            top: 1600vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
        }
        
        .thank-you-title {
            font-size: clamp(3rem, 6vw, 5rem);
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 0 0 2rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0s forwards;
            background: linear-gradient(135deg, #60a5fa, #a78bfa, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .thank-you-subtitle {
            font-size: clamp(1.5rem, 3vw, 2rem);
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            margin: 0 0 3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0.5s forwards;
        }
        
        .thank-you-contact {
            font-size: clamp(1.2rem, 2.5vw, 1.5rem);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin: 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 1s forwards;
        }
        
        .thank-you-email {
            color: #60a5fa;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease, text-shadow 0.3s ease;
        }
        
        .thank-you-email:hover {
            color: #a78bfa;
            text-shadow: 0 0 10px rgba(167, 139, 250, 0.5);
        }
        
        /* AI Can Confidently Lie Page */
        #page-hallucination-demo {
            background: transparent;
            position: absolute;
            top: 1200vh;
            left: 0;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 2rem 3rem;
            overflow-y: auto;
        }
        
        .hallucination-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 900;
            color: white;
            text-align: center;
            margin: 0 0 0.3rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0s forwards;
        }
        
        .hallucination-subtitle {
            font-size: clamp(1rem, 2vw, 1.3rem);
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin: 0 0 2rem 0;
            opacity: 0;
            animation: titleFadeIn 1s ease-in-out 0.5s forwards;
        }
        
        .hallucination-conversation {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            position: relative;
        }
        
        .hallucination-bubble {
            padding: 1.2rem 1.5rem;
            border-radius: 20px;
            max-width: 75%;
            position: relative;
            opacity: 0;
        }
        
        .hallucination-bubble.researcher {
            align-self: flex-start;
            background: rgba(96, 165, 250, 0.15);
            border-radius: 20px 20px 20px 5px;
            transform: translateX(-50px);
            animation: slideInLeft 0.5s ease-out 1s forwards;
        }
        
        .hallucination-bubble.ai {
            align-self: flex-end;
            background: rgba(167, 139, 250, 0.15);
            border-radius: 20px 20px 5px 20px;
            transform: translateX(50px);
            animation: slideInRight 0.5s ease-out 5s forwards;
        }
        
        @keyframes slideInLeft {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInRight {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .hallucination-bubble-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: white;
            font-size: 0.9rem;
        }
        
        .hallucination-bubble-content {
            color: white;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        
        .hallucination-bubble-content.typing {
            white-space: pre-wrap;
        }
        
        .hallucination-warning {
            position: absolute;
            top: 150%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 90%;
            max-width: 600px;
            background: rgba(220, 38, 38, 0.2);
            border: 3px solid #dc2626;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 0 40px rgba(220, 38, 38, 0.6);
            opacity: 0;
            z-index: 10;
        }
        
        .hallucination-warning.show {
            animation: warningPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards,
                       warningShake 0.3s ease-in-out 0.5s;
        }
        
        @keyframes warningPop {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0);
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        @keyframes warningShake {
            0%, 100% { transform: translate(-50%, -50%) scale(1) translateX(0); }
            25% { transform: translate(-50%, -50%) scale(1) translateX(-10px); }
            75% { transform: translate(-50%, -50%) scale(1) translateX(10px); }
        }
        
        .hallucination-warning-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #dc2626;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .hallucination-warning-item {
            display: flex;
            align-items: flex-start;
            gap: 0.8rem;
            margin-bottom: 0.8rem;
            opacity: 0;
        }
        
        .hallucination-warning-item.show {
            animation: errorFadeIn 0.5s ease-out forwards;
        }
        
        @keyframes errorFadeIn {
            0% {
                opacity: 0;
                transform: translateX(-10px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .hallucination-warning-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .hallucination-warning-item.show .hallucination-warning-icon {
            animation: rotateIn 0.5s ease-out forwards;
        }
        
        @keyframes rotateIn {
            0% {
                opacity: 0;
                transform: rotate(-180deg);
            }
            100% {
                opacity: 1;
                transform: rotate(0deg);
            }
        }
        
        .hallucination-warning-text {
            color: white;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .hallucination-bubble-content .error-mark {
            position: relative;
            color: #dc2626;
            text-decoration: wavy underline #dc2626;
            text-decoration-thickness: 2px;
            animation: errorMarkHighlight 0.5s ease-out forwards;
        }
        
        @keyframes errorMarkHighlight {
            0% {
                background: transparent;
            }
            50% {
                background: rgba(220, 38, 38, 0.3);
            }
            100% {
                background: rgba(220, 38, 38, 0.2);
            }
        }
        
        .page8-container {
            max-width: 1000px;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 3rem;
            position: relative;
            z-index: 11;
            margin: 0 auto;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
        }
        
        
        /* Logo with circular mask */
        .page8-logo-container {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            overflow: hidden;
            background: rgba(96, 165, 250, 0.2);
            border: 2px solid rgba(96, 165, 250, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 15px rgba(96, 165, 250, 0.3);
            flex-shrink: 0;
        }
        
        .page8-logo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        /* Title */
        .page8-title {
            font-size: clamp(2rem, 4vw, 3.5rem);
            font-weight: 900;
            color: white;
            margin: 0;
            text-shadow: 0 0 20px rgba(96, 165, 250, 0.5),
                         0 0 40px rgba(167, 139, 250, 0.3);
            background: linear-gradient(135deg, #60a5fa, #a78bfa, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Description */
        .page8-description {
            font-size: clamp(0.95rem, 1.5vw, 1.15rem);
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.6;
            margin-bottom: 2.5rem;
            max-width: 700px;
            text-align: center;
        }
        
        /* Cards Container */
        .page8-cards-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            width: 100%;
            max-width: 900px;
        }
        
        /* Card */
        .page8-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            padding: 1.75rem;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        /* Card Title */
        .page8-card-title {
            font-size: clamp(1.2rem, 2.5vw, 1.6rem);
            font-weight: 700;
            color: white;
            margin-bottom: 1.2rem;
            text-shadow: 0 0 10px rgba(96, 165, 250, 0.3);
        }
        
        /* Feature List */
        .page8-feature-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .page8-feature-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 1rem;
            font-size: clamp(0.9rem, 1.3vw, 1.05rem);
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.5;
        }
        
        .page8-feature-item:last-child {
            margin-bottom: 0;
        }
        
        /* Checkmark */
        .page8-checkmark {
            color: #fb923c;
            font-weight: 700;
            font-size: 1.2em;
            flex-shrink: 0;
            margin-top: 0.1em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .page8-cards-container {
                grid-template-columns: 1fr;
            }
            
            .page8-container {
                padding: 3rem 2rem;
            }
            
            .page8-header {
                flex-direction: column;
                gap: 1rem;
            }
            
            .page8-logo-container {
                width: 80px;
                height: 80px;
            }
        }

        .page7-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            padding-top: 180px; /* Leave space for top logos (80px + 100px margin) */
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.8s ease;
        }
        
        .page7-demo-container {
            width: calc(100% - 4rem);
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            height: calc(100vh - 200px);
            max-height: calc(100vh - 200px);
            position: relative;
            overflow-y: auto;
        }

        .page7-title {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        /* Page 7: RAG Demo */
        .page7-rag-container {
            position: relative;
            width: 100%;
            height: 80%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 2rem;
        }
        
        /* Page 7: Right side blocks (similar to page 6) */
        .page7-right-blocks {
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 50%;
            display: flex;
            flex-direction: column;
            gap: 3rem;
            align-items: center;
            justify-content: center;
            padding-right: 5%;
        }
        
        .page7-user-block {
            position: relative;
            width: auto;
            min-width: 200px;
            max-width: 600px;
            background: rgba(96, 165, 250, 0.15);
            border: 2px solid rgba(96, 165, 250, 0.4);
            border-radius: 18px;
            padding: 1rem 1.5rem;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .page7-user-block.show {
            opacity: 1;
        }
        
        .page7-user-content {
            color: #60a5fa;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .page7-user-content .highlight {
            font-weight: 700;
            color: #93c5fd;
            animation: highlightPulse 0.8s ease;
        }
        
        @keyframes highlightPulse {
            0%, 100% {
                font-weight: 400;
                color: #60a5fa;
            }
            50% {
                font-weight: 700;
                color: #93c5fd;
                text-shadow: 0 0 10px rgba(147, 197, 253, 0.5);
            }
        }
        
        .page7-chunk.highlight {
            background: rgba(96, 165, 250, 0.3) !important;
            border: 2px solid rgba(96, 165, 250, 0.8) !important;
            box-shadow: 0 0 20px rgba(96, 165, 250, 0.5);
            transition: all 0.5s ease;
        }
        
        .page7-prompt-block {
            position: relative;
            width: auto;
            min-width: 200px;
            max-width: 700px;
            background: rgba(167, 139, 250, 0.15);
            border: 2px solid rgba(167, 139, 250, 0.4);
            border-radius: 18px;
            padding: 1rem 1.5rem;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .page7-prompt-block.show {
            opacity: 1;
        }
        
        .page7-prompt-left {
            flex: 1;
            color: #c4b5fd;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .page7-prompt-plus {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 700;
        }
        
        .page7-prompt-right {
            flex: 1;
            background: rgba(96, 165, 250, 0.15);
            border: 2px solid rgba(96, 165, 250, 0.4);
            border-radius: 12px;
            padding: 0.75rem 1rem;
        }
        
        .page7-prompt-right .page7-chunk-title {
            font-size: 0.75rem;
            margin-bottom: 0.5rem;
        }
        
        .page7-prompt-right .page7-chunk-item {
            font-size: 0.7rem;
            margin-bottom: 0.3rem;
        }
        
        .page7-response-block {
            position: relative;
            width: auto;
            min-width: 200px;
            max-width: 600px;
            background: rgba(96, 165, 250, 0.15);
            border: 2px solid rgba(96, 165, 250, 0.4);
            border-radius: 18px;
            padding: 0.75rem 1.5rem;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .page7-response-block.show {
            opacity: 1;
        }
        
        .page7-response-content {
            color: #60a5fa;
            font-size: 0.95rem;
            line-height: 1.4;
            white-space: nowrap;
        }
        
        .page7-syllabus-icon {
            position: absolute;
            left: 10%;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            z-index: 10;
        }
        
        .page7-file-icon {
            font-size: 3rem;
            color: rgba(96, 165, 250, 0.8);
            filter: drop-shadow(0 0 10px rgba(96, 165, 250, 0.5));
        }
        
        .page7-syllabus-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .page7-chunks-wrapper {
            position: absolute;
            left: 25%;
            top: 49.5%;
            transform: translateY(-50%);
            z-index: 10;
            padding: 0.5rem;
            background: rgba(96, 165, 250, 0.1);
            border: 2px solid rgba(96, 165, 250, 0.5);
            border-radius: 16px;
        }
        
        .page7-chunks-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: flex-start;
        }
        
        .page7-chunk {
            background: rgba(96, 165, 250, 0.15);
            border: 2px solid rgba(96, 165, 250, 0.4);
            border-radius: 12px;
            padding: 1rem 1.2rem;
            width: 150px;
        }
        
        .page7-chunk:nth-child(2) {
            /* Middle chunk aligns with syllabus */
            margin-top: 0;
        }
        
        .page7-chunk-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: #60a5fa;
            margin-bottom: 0.75rem;
        }
        
        .page7-chunk-item {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 0.4rem;
            line-height: 1.4;
        }
        
        .page7-pulse-line {
            position: absolute;
            left: 10%;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 3px;
            background: linear-gradient(to right, rgba(96, 165, 250, 0.8), rgba(96, 165, 250, 0.4));
            z-index: 8;
            pointer-events: none;
            transition: width 0.8s ease;
        }
        
        .page7-pulse-line.active {
            animation: page7PulseLine 1.5s ease-in-out infinite;
        }
        
        @keyframes page7PulseLine {
            0%, 100% {
                opacity: 0.6;
                box-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
            }
            50% {
                opacity: 1;
                box-shadow: 0 0 20px rgba(96, 165, 250, 0.8);
            }
        }

        /* Page 6: Without RAG Demo */
        .page6-demo-container {
            width: calc(100% - 4rem);
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            height: calc(100vh - 200px);
            max-height: calc(100vh - 200px);
            position: relative;
            overflow-y: auto;
        }

        .page6-title {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 2rem;
            text-align: center;
        }

        /* Input box for page 6 */
        .page6-input-box {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            max-width: 90%;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(96, 165, 250, 0.4);
            border-radius: 24px;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: all 0.5s ease;
        }

        .page6-input-box.hidden {
            display: none;
            pointer-events: none;
        }

        .page6-input-text {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #93c5fd;
            font-size: 0.95rem;
            font-family: inherit;
        }

        .page6-send-btn {
            background: rgba(96, 165, 250, 0.3);
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #93c5fd;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1rem;
        }

        .page6-send-btn.active {
            background: rgba(96, 165, 250, 0.6);
            color: white;
        }

        /* User bubble */
        .page6-user-bubble {
            position: absolute;
            right: 10%;
            top: 120px;
            background: rgba(96, 165, 250, 0.2);
            border: 1px solid rgba(96, 165, 250, 0.4);
            border-radius: 18px;
            padding: 0.75rem 1.25rem;
            color: #93c5fd;
            font-size: 0.95rem;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s ease;
            max-width: 300px;
        }

        .page6-user-bubble.show {
            opacity: 1;
            transform: scale(1);
        }

        /* Rectangle box (transformed from input) */
        .page6-rectangle-box {
            position: absolute;
            left: 50%;
            top: 100px;
            transform: translateX(-50%);
            width: auto;
            min-width: 200px;
            max-width: 600px;
            background: rgba(96, 165, 250, 0.15);
            border: 2px solid rgba(96, 165, 250, 0.4);
            border-radius: 18px;
            padding: 1rem 1.5rem;
            opacity: 0;
            transition: all 0.8s ease;
        }
        
        /* Labels for blocks - positioned on the left, aligned */
        #page6RectangleBox::before,
        #page6SystemBox::before,
        #page6ResponseBox::before {
            content: "";
            position: absolute;
            left: -150px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 700;
            white-space: nowrap;
            text-align: right;
            width: 130px;
            pointer-events: none;
        }
        
        #page6RectangleBox::before {
            content: "User Question";
        }
        
        #page6SystemBox::before {
            content: "System Prompt";
        }
        
        #page6ResponseBox::before {
            content: "LLM Response";
        }

        .page6-rectangle-box.show {
            opacity: 1;
        }

        .page6-rectangle-content {
            color: #60a5fa;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* System prompt box - keep purple */
        #page6SystemBox {
            background: rgba(167, 139, 250, 0.15) !important;
            border: 2px solid rgba(167, 139, 250, 0.4) !important;
            top: 200px !important;
            width: 700px !important;
            max-width: 90% !important;
        }
        
        #page6SystemBox .page6-rectangle-content {
            color: #c4b5fd !important;
        }
        
        .page6-rectangle-content .system-prompt {
            font-weight: 600;
            margin-bottom: 1rem;
            color: #a78bfa;
        }

        .page6-rectangle-content .syllabus-content {
            margin-top: 1rem;
            position: relative;
            padding-bottom: 0.5rem;
            max-height: 200px;
            overflow: hidden;
            mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0.5) 80%, rgba(0,0,0,0) 100%);
            -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0.5) 80%, rgba(0,0,0,0) 100%);
        }
        
        #page6SystemBox {
            padding-bottom: 1rem !important;
        }

        .page6-rectangle-content .fade-out {
            display: none;
        }

        /* Pulse line */
        .page6-pulse-line {
            position: absolute;
            left: 50%;
            top: 400px;
            transform: translateX(-50%);
            width: 2px;
            height: 0;
            background: linear-gradient(to bottom, rgba(167, 139, 250, 0.6), rgba(167, 139, 250, 0.3));
            opacity: 0;
            transition: height 0.8s ease, opacity 0.3s ease;
        }

        .page6-pulse-line.active {
            height: 80px;
            opacity: 1;
            animation: pulseLine 1.5s ease-in-out infinite;
        }

        @keyframes pulseLine {
            0%, 100% {
                opacity: 0.6;
                box-shadow: 0 0 10px rgba(167, 139, 250, 0.5);
            }
            50% {
                opacity: 1;
                box-shadow: 0 0 20px rgba(167, 139, 250, 0.8);
            }
        }

        /* Response box */
        .page6-response-box {
            position: absolute;
            left: 50%;
            top: 500px;
            transform: translateX(-50%);
            width: auto;
            min-width: 200px;
            max-width: 700px;
            background: rgba(96, 165, 250, 0.15);
            border: 2px solid rgba(96, 165, 250, 0.4);
            border-radius: 18px;
            padding: 0.75rem 1.5rem;
            opacity: 0;
            transition: top 0.8s ease, opacity 0.3s ease;
        }

        .page6-response-box.show {
            opacity: 1;
        }

        .page6-response-content {
            color: #60a5fa;
            font-size: 0.95rem;
            line-height: 1.4;
            white-space: nowrap;
        }

        /* Loading spinner */
        .page6-loading {
            position: absolute;
            left: 50%;
            top: 480px;
            transform: translateX(-50%);
            width: 24px;
            height: 24px;
            border: 3px solid rgba(167, 139, 250, 0.3);
            border-top-color: rgba(167, 139, 250, 0.8);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
            animation: spin 1s linear infinite;
        }

        .page6-loading.show {
            opacity: 1;
        }

        .page6-loading.hide {
            opacity: 0;
        }

        @keyframes spin {
            to { transform: translateX(-50%) rotate(360deg); }
        }

        .page5-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
        }

        .page5-title {
            font-size: clamp(2rem, 4vw, 3.5rem);
            font-weight: 900;
            text-align: center;
            color: white; /* Fallback color */
            background: linear-gradient(135deg, #60a5fa, #a78bfa, #22d3ee);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-top: 15vh; /* Move title down significantly */
            margin-bottom: 0;
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Disable transition when animating */
        .page5-title.move-down-in {
            transition: none !important;
        }
        
        /* Fallback for browsers that don't support background-clip */
        @supports not (-webkit-background-clip: text) {
            .page5-title {
                color: #60a5fa;
                background: none;
            }
        }

        /* Title moves up and out when going to page 6 */
        .page5-title.move-up-out {
            transform: translateY(-150vh) !important;
            opacity: 1 !important; /* Keep visible during animation */
            visibility: visible !important;
        }

        /* Title moves down from top when coming back from page 6 */
        .page5-title.move-down-in {
            opacity: 1 !important;
            visibility: visible !important;
            animation: titleMoveDown 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes titleMoveDown {
            from {
                transform: translateY(-150vh);
                opacity: 1;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Icons around rag-file-stack-3d on page 5 */

        /* rag-file-stack-3d move to top when going to page 6 */
        .rag-file-stack-3d.move-to-top {
            top: 50px !important;
            transition: top 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .page4-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            max-width: 1400px;
            margin: 0 auto;
        }

        .page4-title {
            font-size: clamp(2rem, 4vw, 3.5rem);
            font-weight: 900;
            text-align: center;
            margin-bottom: 3rem;
            color: white;
            opacity: 0;
            animation: fadeIn 1s ease forwards;
        }

        .page4-content {
            display: flex;
            flex: 1;
            gap: 4rem;
            align-items: center;
            justify-content: center;
            width: 100%;
            position: relative;
        }

        /* Card Deck */
        .deck-container {
            position: relative;
            width: 350px;
            height: 500px;
            cursor: pointer;
            flex-shrink: 0;
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .deck-container.centered {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .deck-container:not(.centered) {
            position: relative;
            left: auto;
            top: auto;
            transform: none;
        }

        .card-stack {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .card {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .card-icon {
            font-size: 5rem;
            margin-bottom: 1rem;
            filter: drop-shadow(0 0 20px currentColor);
            text-align: center;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .card-name {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .card-tagline {
            font-size: 1.1rem;
            opacity: 0.8;
            text-align: center;
        }

        /* Card colors */
        .card-0 { border-color: rgba(96, 165, 250, 0.5); }
        .card-0 .card-icon { color: #60a5fa; }
        .card-0 .card-name { color: #93c5fd; }

        .card-1 { border-color: rgba(167, 139, 250, 0.5); }
        .card-1 .card-icon { color: #a78bfa; }
        .card-1 .card-name { color: #c4b5fd; }

        .card-2 { border-color: rgba(34, 211, 238, 0.5); }
        .card-2 .card-icon { color: #22d3ee; }
        .card-2 .card-name { color: #67e8f9; }

        .card-3 { border-color: rgba(56, 189, 248, 0.5); }
        .card-3 .card-icon { color: #38bdf8; }
        .card-3 .card-name { color: #7dd3fc; }

        .card-4 { border-color: rgba(251, 146, 60, 0.5); }
        .card-4 .card-icon { color: #fb923c; }
        .card-4 .card-name { color: #fdba74; }

        .card-5 { border-color: rgba(244, 114, 182, 0.5); }
        .card-5 .card-icon { color: #f472b6; }
        .card-5 .card-name { color: #f9a8d4; }

        /* Stack effect */
        .card.stacked {
            transform: translateY(0) rotate(0deg);
        }

        .card.stacked:nth-child(1) { transform: translateY(0px) translateX(0px); z-index: 6; }
        .card.stacked:nth-child(2) { transform: translateY(8px) translateX(-4px); z-index: 5; }
        .card.stacked:nth-child(3) { transform: translateY(16px) translateX(-8px); z-index: 4; }
        .card.stacked:nth-child(4) { transform: translateY(24px) translateX(-12px); z-index: 3; }
        .card.stacked:nth-child(5) { transform: translateY(32px) translateX(-16px); z-index: 2; }
        .card.stacked:nth-child(6) { transform: translateY(40px) translateX(-20px); z-index: 1; }

        .card.active {
            transform: translateX(-50px) scale(1.1) !important;
            z-index: 100 !important;
        }

        .card.played {
            transform: scale(0.5) translateX(-200px) translateY(600px) !important;
            opacity: 0.3;
            z-index: 0 !important;
        }

        /* Detail Panel */
        .detail-panel {
            flex: 1;
            max-width: 700px;
            opacity: 0;
            transform: translateX(50px);
            transition: all 0.6s ease;
            pointer-events: none;
        }

        .detail-panel.visible {
            opacity: 1;
            transform: translateX(0);
            pointer-events: auto;
        }

        .page4-content.deck-moved .detail-panel {
            display: block;
        }

        .page4-content:not(.deck-moved) .detail-panel {
            display: none;
        }

        .page4-content:not(.deck-moved) .deck-container {
            z-index: 100;
        }


        .detail-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            opacity: 0.9;
            color: white;
        }

        .detail-section ul {
            list-style: none;
            padding-left: 0;
        }

        .detail-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            font-size: 1.05rem;
            opacity: 0.8;
            color: white;
        }

        .detail-section li:before {
            content: "→";
            position: absolute;
            left: 0;
            color: currentColor;
            opacity: 0.6;
        }

        /* Demo Area */
        .demo-area {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 1.5rem;
            height: 220px;
            max-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }


        /* LLM Chat Demo */
        .llm-chat-demo {
            width: 100%;
            height: 100%;
            max-height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Input box */
        .chat-input-box {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(96, 165, 250, 0.4);
            border-radius: 24px;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            z-index: 10;
            transition: all 0.5s ease;
        }

        .chat-input-box.hidden {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }

        .chat-input-text {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #93c5fd;
            font-size: 0.95rem;
            font-family: inherit;
            min-height: 24px;
        }

        .chat-input-text::after {
            content: '|';
            animation: blink 1s infinite;
            color: #60a5fa;
            margin-left: 2px;
        }

        .chat-input-text.has-text::after {
            display: none;
        }

        .chat-send-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            background: rgba(96, 165, 250, 0.3);
            color: #93c5fd;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.2s;
        }

        .chat-send-btn.active {
            background: #60a5fa;
            color: white;
            box-shadow: 0 0 15px rgba(96, 165, 250, 0.5);
        }

        .chat-send-btn:active {
            transform: scale(0.95);
        }

        /* Thinking section */
        .thinking-section {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem;
            background: transparent;
            border-radius: 12px;
            border: none;
            opacity: 0;
            z-index: 5;
        }

        .thinking-section.show {
            animation: thinkingAppear 0.5s ease forwards;
        }

        .thinking-section.hide {
            animation: thinkingHide 0.5s ease forwards;
        }

        @keyframes thinkingAppear {
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        @keyframes thinkingHide {
            to {
                opacity: 0;
                transform: translate(-50%, -70%);
            }
        }

        .brain-icon {
            font-size: 3rem;
            animation: brainPulse 2s ease-in-out infinite;
            filter: drop-shadow(0 0 15px rgba(96, 165, 250, 0.5));
            flex-shrink: 0;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: translateY(2px);
        }

        @keyframes brainPulse {
            0%, 100% { transform: translateY(2px) scale(1); }
            50% { transform: translateY(2px) scale(1.1); }
        }

        .loading-spinner {
            width: 30px;
            height: 30px;
            border: 3px solid rgba(96, 165, 250, 0.3);
            border-top-color: #60a5fa;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .process-steps {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .process-step {
            padding: 0.5rem 1rem;
            background: rgba(96, 165, 250, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(96, 165, 250, 0.3);
            color: #93c5fd;
            font-size: 0.9rem;
            opacity: 0;
            transform: translateX(-10px);
        }

        .process-step.show {
            animation: stepFadeIn 0.5s ease forwards;
        }

        .process-step:nth-child(1).show { animation-delay: 0.2s; }
        .process-step:nth-child(2).show { animation-delay: 0.6s; }
        .process-step:nth-child(3).show { animation-delay: 1s; }

        @keyframes stepFadeIn {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Chat container */
        .chat-container {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            width: 100%;
            padding: 1rem;
            padding-bottom: 80px;
            opacity: 0;
            max-height: 100%;
            overflow-y: auto;
        }

        .chat-container.show {
            animation: chatAppear 0.5s ease forwards;
        }

        @keyframes chatAppear {
            to {
                opacity: 1;
            }
        }

        .user-bubble {
            align-self: flex-end;
            max-width: 85%;
            padding: 0.875rem 1rem;
            background: rgba(96, 165, 250, 0.3);
            border-radius: 18px 18px 4px 18px;
            color: white;
            font-size: 0.9375rem;
            line-height: 1.5;
            opacity: 0;
            transform: translateY(20px);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .user-bubble.show {
            animation: bubbleSlideIn 0.5s ease forwards;
        }

        @keyframes bubbleSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .ai-bubble {
            align-self: flex-start;
            max-width: 85%;
            padding: 0.875rem 1rem;
            background: rgba(34, 211, 238, 0.2);
            border-radius: 18px 18px 18px 4px;
            border: 1px solid rgba(34, 211, 238, 0.4);
            color: #67e8f9;
            font-size: 0.9375rem;
            line-height: 1.5;
            opacity: 0;
            transform: translateY(20px);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .ai-bubble.show {
            animation: bubbleSlideIn 0.5s ease forwards;
        }

        .ai-bubble.typing::after {
            content: '|';
            animation: blink 1s infinite;
            color: #67e8f9;
            margin-left: 2px;
            display: inline-block;
        }

        .ai-bubble.typing-complete::after {
            display: none;
        }

        /* Multimodal visual demo */
        .multimodal-demo {
            width: 100%;
            height: 100%;
            min-height: 200px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .multimodal-container {
            width: 100%;
            height: 100%;
            min-height: 200px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Media boxes - start from center */
        .media-box {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            transition: all 0.8s ease;
            z-index: 5;
            color: rgba(255, 255, 255, 0.9);
        }

        .media-box svg {
            width: 40px;
            height: 40px;
            stroke: currentColor;
        }

        .media-box.show {
            opacity: 1;
        }

        .media-box.bounce-in {
            animation: bounceIn 0.6s ease forwards;
            opacity: 1 !important;
        }

        @keyframes bounceIn {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        /* Brain in center */
        .multimodal-brain {
            font-size: 3rem;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0);
            opacity: 0;
            filter: drop-shadow(0 0 20px rgba(96, 165, 250, 0.5));
            z-index: 10;
        }

        .multimodal-brain.show {
            animation: brainBounceIn 0.6s ease forwards;
            opacity: 1 !important;
        }

        .multimodal-brain.pulse {
            animation: brainPulse 2s ease-in-out infinite;
        }

        @keyframes brainBounceIn {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @keyframes brainPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }
        }

        /* Connection lines */
        .connection-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, 
                rgba(96, 165, 250, 0.3) 0%,
                rgba(96, 165, 250, 0.6) 30%,
                rgba(96, 165, 250, 1) 50%,
                rgba(96, 165, 250, 0.6) 70%,
                rgba(96, 165, 250, 0.3) 100%);
            opacity: 0;
            transform-origin: left center;
            box-shadow: 0 0 10px rgba(96, 165, 250, 0.6);
            z-index: 1;
            overflow: hidden;
        }

        .connection-line.active {
            animation: lineDraw 0.8s ease forwards, dataFlow 2s linear infinite 0.8s;
        }

        .connection-line.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%,
                rgba(255, 255, 255, 0.8) 30%,
                rgba(255, 255, 255, 1) 50%,
                rgba(255, 255, 255, 0.8) 70%,
                transparent 100%);
            animation: dataPulse 2s linear infinite 0.8s;
        }

        @keyframes lineDraw {
            from {
                width: 0;
                opacity: 0;
            }
            to {
                width: var(--line-width);
                opacity: 1;
            }
        }

        @keyframes dataFlow {
            0% {
                background-position: 0% 0%;
            }
            100% {
                background-position: 200% 0%;
            }
        }

        @keyframes dataPulse {
            0% {
                transform: translateX(-100%);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateX(200%);
                opacity: 0;
            }
        }

        /* Output bubble on right */
        .multimodal-output {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            max-width: 200px;
            padding: 0.875rem 1rem;
            background: rgba(34, 211, 238, 0.2);
            border-radius: 18px 18px 18px 4px;
            border: 1px solid rgba(34, 211, 238, 0.4);
            color: #67e8f9;
            font-size: 0.9375rem;
            line-height: 1.5;
            opacity: 0;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .multimodal-output.show {
            animation: bubbleFadeIn 0.5s ease forwards;
        }

        .multimodal-output.typing::after {
            content: '|';
            animation: blink 1s infinite;
            color: #67e8f9;
            margin-left: 2px;
            display: inline-block;
        }

        @keyframes bubbleFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50%) translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateY(-50%) translateX(0);
            }
        }

        /* RAG demo */
        .rag-demo {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .rag-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 2rem;
            padding-left: 20px;
        }

        /* Left side - 3D File stack */
        .rag-left {
            position: relative;
            width: 128px;
            height: 128px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            perspective: 1000px;
            margin-top: 20px;
        }

        .rag-file-stack-3d {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        .rag-file-stack-3d > div {
            transform-style: preserve-3d;
        }

        .rag-file-stack-3d {
            transform: rotateY(-30deg) rotateX(10deg) translateX(10px);
        }
        
        /* rag-file-stack-3d when moved outside page 4 to stay fixed during page transition */
        .rag-file-stack-3d.fixed-position {
            position: fixed;
            width: 128px;
            height: 128px;
            z-index: 10;
            pointer-events: none;
            /* Position will be calculated dynamically in JavaScript */
            transition: top 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .rag-file-card {
            position: absolute;
            width: 8rem;
            height: 5rem;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transform-style: preserve-3d;
            transition: all 0.6s ease;
        }

        .rag-file-card[data-index="0"] {
            transform: translateZ(0px) translateX(0px);
            z-index: 4;
        }

        .rag-file-card[data-index="1"] {
            transform: translateZ(-20px) translateX(5px);
            z-index: 3;
        }

        .rag-file-card[data-index="2"] {
            transform: translateZ(-40px) translateX(10px);
            z-index: 2;
        }

        .rag-file-card[data-index="3"] {
            transform: translateZ(-60px) translateX(15px);
            z-index: 1;
        }

        .rag-file-card.lifted {
            animation: ragLiftVertical 2s ease-in-out;
        }

        .rag-file-card[data-index="0"].auto-lift {
            animation: ragLiftVertical 12s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
            animation-delay: 0s;
        }

        .rag-file-card[data-index="1"].auto-lift {
            animation: ragLiftVertical 12s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
            animation-delay: 3s;
        }

        .rag-file-card[data-index="2"].auto-lift {
            animation: ragLiftVertical 12s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
            animation-delay: 6s;
        }

        .rag-file-card[data-index="3"].auto-lift {
            animation: ragLiftVertical 12s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
            animation-delay: 9s;
        }

        @keyframes ragLiftVertical {
            0% { 
                transform: translateY(0) rotateX(0) translateZ(var(--card-z, 0px)) translateX(var(--card-x, 0px)); 
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                border-color: rgba(255, 255, 255, 0.1);
            }
            7% { 
                transform: translateY(-40px) rotateX(-5deg) translateZ(var(--card-z, 0px)) translateX(var(--card-x, 0px)); 
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                border-color: rgba(139, 92, 246, 0.8); 
                background-color: rgba(30, 41, 59, 1);
            }
            10% { 
                transform: translateY(-40px) rotateX(-5deg) translateZ(var(--card-z, 0px)) translateX(var(--card-x, 0px)); 
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                border-color: rgba(139, 92, 246, 0.8); 
                background-color: rgba(30, 41, 59, 1);
            }
            13% { 
                transform: translateY(-40px) rotateX(-5deg) translateZ(var(--card-z, 0px)) translateX(var(--card-x, 0px)); 
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
                border-color: rgba(139, 92, 246, 0.8); 
                background-color: rgba(30, 41, 59, 1);
            }
            18% { 
                transform: translateY(0) rotateX(0) translateZ(var(--card-z, 0px)) translateX(var(--card-x, 0px)); 
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                border-color: rgba(255, 255, 255, 0.1);
            }
            25% { 
                transform: translateY(0) rotateX(0) translateZ(var(--card-z, 0px)) translateX(var(--card-x, 0px)); 
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                border-color: rgba(255, 255, 255, 0.1);
            }
            100% { 
                transform: translateY(0) rotateX(0) translateZ(var(--card-z, 0px)) translateX(var(--card-x, 0px)); 
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                border-color: rgba(255, 255, 255, 0.1);
            }
        }

        .rag-file-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            background: rgba(255, 255, 255, 0.05);
            flex-shrink: 0;
        }

        .rag-file-icon {
            flex-shrink: 0;
        }

        .rag-file-card[data-type="note"] .rag-file-icon {
            color: #60a5fa;
        }

        .rag-file-card[data-type="review"] .rag-file-icon {
            color: #fbbf24;
        }

        .rag-file-card[data-type="schedule"] .rag-file-icon {
            color: #34d399;
        }

        .rag-file-card[data-type="sheet"] .rag-file-icon {
            color: #a78bfa;
        }

        .rag-file-title {
            font-size: 8px;
            font-family: monospace;
            color: rgba(209, 213, 219, 1);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
        }

        .rag-file-dots {
            margin-left: auto;
            display: flex;
            gap: 0.125rem;
        }

        .rag-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
        }

        .rag-dot.red {
            background: rgba(239, 68, 68, 0.5);
        }

        .rag-dot.yellow {
            background: rgba(234, 179, 8, 0.5);
        }

        .rag-file-content {
            padding: 0.375rem;
            font-family: monospace;
            font-size: 8px;
            color: rgba(156, 163, 175, 0.8);
            line-height: 1.3;
            position: relative;
            flex: 1;
            display: flex;
        }

        .rag-file-border {
            position: absolute;
            top: 0;
            left: 0;
            width: 2px;
            height: 100%;
        }

        .rag-file-border.blue {
            background: rgba(96, 165, 250, 0.5);
        }

        .rag-file-border.yellow {
            background: rgba(234, 179, 8, 0.5);
        }

        .rag-file-border.green {
            background: rgba(52, 211, 153, 0.5);
        }

        .rag-file-border.purple {
            background: rgba(167, 139, 250, 0.5);
        }

        .rag-file-text {
            white-space: pre-wrap;
            padding-left: 0.25rem;
            height: 100%;
            overflow: hidden;
            font-family: sans-serif;
            margin: 0;
            font-size: 7px;
        }

        .rag-file-shine {
            position: absolute;
            inset: 0;
            background: linear-gradient(to bottom right, rgba(255, 255, 255, 0.1), transparent);
            pointer-events: none;
        }

        .rag-file-shadow {
            position: absolute;
            background: rgba(0, 0, 0, 0.5);
            filter: blur(20px);
            border-radius: 50%;
            top: 90px;
            left: 0;
            width: 150px;
            height: 30px;
            transform: rotateX(90deg) translateZ(-10px);
            opacity: 0.6;
            pointer-events: none;
        }

        /* Connection line */
        .rag-connection-line {
            position: absolute;
            height: 2px;
            width: 0;
            background: linear-gradient(90deg, 
                rgba(167, 139, 250, 0.3) 0%,
                rgba(167, 139, 250, 0.6) 30%,
                rgba(167, 139, 250, 1) 50%,
                rgba(167, 139, 250, 0.6) 70%,
                rgba(167, 139, 250, 0.3) 100%);
            left: 178px;
            top: 50%;
            transform: translateY(-50%);
            transform-origin: left center;
            box-shadow: 0 0 10px rgba(167, 139, 250, 0.6);
            z-index: 1;
            overflow: hidden;
        }

        .rag-connection-line.active {
            animation: ragLineDraw 0.8s ease forwards, ragDataFlow 2s linear infinite 0.8s;
        }

        .rag-connection-line.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%,
                rgba(255, 255, 255, 0.8) 30%,
                rgba(255, 255, 255, 1) 50%,
                rgba(255, 255, 255, 0.8) 70%,
                transparent 100%);
            animation: ragDataPulse 2s linear infinite 0.8s;
        }

        @keyframes ragLineDraw {
            from {
                width: 0;
                opacity: 0;
            }
            to {
                width: var(--rag-line-width);
                opacity: 1;
            }
        }

        @keyframes ragDataFlow {
            0% {
                background-position: 0% 0%;
            }
            100% {
                background-position: 200% 0%;
            }
        }

        @keyframes ragDataPulse {
            0% {
                transform: translateX(-100%);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateX(200%);
                opacity: 0;
            }
        }

        /* Right side - Brain */
        .rag-brain {
            font-size: 3rem;
            position: absolute;
            right: 60px;
            top: 50%;
            transform: translateY(-50%);
            filter: drop-shadow(0 0 20px rgba(167, 139, 250, 0.5));
            z-index: 10;
            animation: ragBrainPulse 2s ease-in-out infinite;
        }

        @keyframes ragBrainPulse {
            0%, 100% {
                transform: translateY(-50%) scale(1);
            }
            50% {
                transform: translateY(-50%) scale(1.1);
            }
        }


        /* Agent demo */
        .agent-demo {
            width: 100%;
            height: 220px;
            max-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .agent-layout {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
            padding: 1rem;
        }

        /* Left: Task Box */
        .agent-left {
            flex: 0 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .agent-task-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 1.25rem;
            background: rgba(56, 189, 248, 0.15);
            border-radius: 8px;
            border: 2px solid rgba(56, 189, 248, 0.4);
            color: #7dd3fc;
            font-size: 0.85rem;
            min-width: 120px;
        }

        .agent-task-icon {
            font-size: 1.5rem;
        }

        .agent-task-text {
            font-weight: 500;
            text-align: center;
            line-height: 1.3;
        }

        /* Center: Plan Items */
        .agent-center {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            height: 100%;
        }

        .agent-plan-item {
            width: 100%;
            max-width: 200px;
            padding: 0.75rem 1rem;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(56, 189, 248, 0.3);
            color: #7dd3fc;
            font-size: 0.85rem;
            text-align: center;
            transition: all 0.4s ease;
        }

        .agent-plan-item.highlight {
            background: rgba(56, 189, 248, 0.3);
            border-color: rgba(56, 189, 248, 0.6);
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.5);
            transform: scale(1.05);
        }

        /* Right: Complete Box */
        .agent-right {
            flex: 0 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .agent-complete-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 1.25rem;
            background: rgba(34, 197, 94, 0.15);
            border-radius: 8px;
            border: 2px solid rgba(34, 197, 94, 0.4);
            color: #86efac;
            font-size: 0.85rem;
            min-width: 120px;
            transition: all 0.4s ease;
        }

        .agent-complete-box.highlight {
            background: rgba(34, 197, 94, 0.3);
            border-color: rgba(34, 197, 94, 0.6);
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.5);
            transform: scale(1.05);
        }

        .complete-icon {
            font-size: 1.5rem;
        }

        .complete-text {
            font-weight: 500;
            text-align: center;
        }

        /* Plan Section */
        .agent-plan-section {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .agent-plan-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .agent-section-title {
            font-size: 0.75rem;
            color: rgba(148, 163, 184, 0.8);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .agent-breakdown {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .breakdown-item {
            padding: 0.4rem 0.75rem;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(56, 189, 248, 0.3);
            color: #7dd3fc;
            font-size: 0.75rem;
            opacity: 0;
            transform: scale(0.8);
            animation: breakdownItemAppear 0.4s ease forwards;
        }

        .breakdown-item:nth-child(1) { animation-delay: 0.1s; }
        .breakdown-item:nth-child(2) { animation-delay: 0.2s; }
        .breakdown-item:nth-child(3) { animation-delay: 0.3s; }
        .breakdown-item:nth-child(4) { animation-delay: 0.4s; }

        @keyframes breakdownItemAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Decision Section */
        .agent-decision-section {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .agent-decision-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .decision-box {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .decision-option {
            padding: 0.4rem 0.75rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #c4b5fd;
            font-size: 0.75rem;
            opacity: 0;
            transform: translateY(10px);
            animation: decisionOptionAppear 0.4s ease forwards;
        }

        .decision-option:nth-child(1) { animation-delay: 0.1s; }
        .decision-option:nth-child(2) { animation-delay: 0.2s; }
        .decision-option:nth-child(3) { animation-delay: 0.3s; }

        .decision-option.active {
            background: rgba(139, 92, 246, 0.3);
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.4);
        }

        @keyframes decisionOptionAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Workflow Section */
        .agent-workflow-section {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .agent-workflow-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .workflow-steps {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .workflow-step {
            padding: 0.4rem 0.75rem;
            background: rgba(34, 197, 94, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #86efac;
            font-size: 0.75rem;
            opacity: 0;
            transform: scale(0.8);
            animation: workflowStepAppear 0.4s ease forwards;
        }

        .workflow-step:nth-child(1) { animation-delay: 0.1s; }
        .workflow-step:nth-child(2) { animation-delay: 0.3s; }
        .workflow-step:nth-child(3) { animation-delay: 0.5s; }
        .workflow-step:nth-child(4) { animation-delay: 0.7s; }

        .workflow-step.active {
            background: rgba(34, 197, 94, 0.3);
            border-color: rgba(34, 197, 94, 0.6);
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.4);
        }

        @keyframes workflowStepAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Overview Section */
        .agent-overview {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 8px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
            transition: all 0.6s ease;
        }

        .agent-overview.show {
            opacity: 1;
            transform: scale(1);
            pointer-events: all;
        }

        .overview-title {
            font-size: 0.85rem;
            color: #e2e8f0;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.75rem;
            width: 100%;
        }

        .overview-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            opacity: 0;
            transform: translateY(10px);
            animation: overviewItemAppear 0.4s ease forwards;
        }

        .overview-item:nth-child(1) { animation-delay: 0.1s; }
        .overview-item:nth-child(2) { animation-delay: 0.2s; }
        .overview-item:nth-child(3) { animation-delay: 0.3s; }
        .overview-item:nth-child(4) { animation-delay: 0.4s; }
        .overview-item:nth-child(5) { animation-delay: 0.5s; }

        .overview-icon {
            font-size: 1.5rem;
        }

        .overview-label {
            font-size: 0.65rem;
            color: rgba(226, 232, 240, 0.8);
            text-align: center;
        }

        @keyframes overviewItemAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Skills demo */
        .skills-demo {
            width: 100%;
            height: 220px;
            max-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .skills-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1.5rem;
            padding: 1rem;
        }

        /* Left: Individual Skills */
        .skills-left {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            align-items: center;
        }

        .skill-tool {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.3rem;
            padding: 0.5rem 0.75rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #c4b5fd;
            font-size: 0.65rem;
            width: 75px;
            height: 60px;
            transition: all 0.5s ease;
            opacity: 1;
            transform: translateX(0);
            box-sizing: border-box;
        }

        .skill-tool.show {
            opacity: 1;
            transform: translateX(0);
        }

        .skill-tool.moving {
            position: absolute;
            z-index: 10;
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .skill-tool.moving-fast {
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .skill-tool.moving-slow {
            transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .skill-icon {
            font-size: 1.2rem;
        }

        .skill-label {
            font-weight: 500;
            text-align: center;
            font-size: 0.6rem;
        }

        /* Center: Combination Area */
        .skills-center {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            position: relative;
            min-width: 0;
        }

        .combination-area {
            width: 100px;
            height: 100px;
            border: 2px dashed rgba(139, 92, 246, 0.4);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.25rem;
            background: rgba(139, 92, 246, 0.05);
            position: absolute;
            left: calc(50% - 20px);
            top: 50%;
            margin-left: -50px;
            margin-top: -50px;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s ease;
        }

        .combination-area.show {
            opacity: 1;
            transform: scale(1);
        }

        .combination-area.active {
            border-color: rgba(139, 92, 246, 0.8);
            background: rgba(139, 92, 246, 0.15);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
        }

        .plus-icon {
            font-size: 1.5rem;
            color: rgba(139, 92, 246, 0.6);
            font-weight: 300;
        }

        .skill-tool.in-combination {
            position: absolute;
            width: 100px;
            height: 50px;
            padding: 0.3rem;
            background: rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.6);
            z-index: 5;
            flex-direction: row;
            gap: 0.2rem;
        }

        .skill-tool.in-combination .skill-icon {
            font-size: 0.9rem;
        }

        .skill-tool.in-combination .skill-label {
            font-size: 0.5rem;
        }

        .skill-clone.in-combination {
            position: absolute;
            width: 100px !important;
            height: 50px !important;
            padding: 0.3rem;
            background: rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.6);
            z-index: 5;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.2rem;
            box-sizing: border-box;
            margin: 0;
        }

        .skill-clone.in-combination .skill-icon {
            font-size: 0.9rem;
        }

        .skill-clone.in-combination .skill-label {
            font-size: 0.5rem;
        }

        /* Right: Combined Skill */
        .skills-right {
            flex: 0 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .combined-skill {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem 1.25rem;
            background: rgba(34, 197, 94, 0.15);
            border-radius: 8px;
            border: 2px solid rgba(34, 197, 94, 0.4);
            color: #86efac;
            font-size: 0.85rem;
            min-width: 120px;
            opacity: 0;
            transform: translateX(20px) scale(0.8);
            transition: all 0.6s ease;
            position: relative;
        }

        .combined-skill.show {
            opacity: 1;
            transform: translateX(0) scale(1);
        }

        .combined-skill.pulse {
            animation: skillPulse 0.6s ease;
        }

        .custom-skill {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background: rgba(34, 197, 94, 0.2);
            border-radius: 10px;
            border: 2px solid rgba(34, 197, 94, 0.6);
            color: #86efac;
            box-sizing: border-box;
            z-index: 15;
            padding: 0.5rem;
        }

        .custom-skill-icon {
            font-size: 1.5rem;
        }

        .custom-skill-label {
            font-size: 0.7rem;
            font-weight: 600;
            text-align: center;
        }

        @keyframes skillPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 rgba(34, 197, 94, 0.4);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 0 20px rgba(34, 197, 94, 0.6);
            }
        }

        .combined-icon {
            font-size: 1.5rem;
        }

        .combined-label {
            font-weight: 500;
            text-align: center;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 200px;
        }

        .tool-item {
            padding: 1rem;
            background: rgba(251, 146, 60, 0.15);
            border-radius: 10px;
            border: 2px solid rgba(251, 146, 60, 0.3);
            text-align: center;
            font-size: 0.85rem;
            color: #fdba74;
            animation: toolPulse 2s infinite;
        }

        .tool-item:nth-child(1) { animation-delay: 0s; }
        .tool-item:nth-child(2) { animation-delay: 0.4s; }
        .tool-item:nth-child(3) { animation-delay: 0.8s; }

        @keyframes toolPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }

        .combined-output {
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(251, 146, 60, 0.2), rgba(244, 114, 182, 0.2));
            border-radius: 12px;
            border: 2px solid rgba(251, 146, 60, 0.4);
            color: white;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
            min-width: 150px;
        }

        /* Fine-tuning demo */
        .finetune-demo {
            width: 100%;
            height: 180px;
            max-height: 180px;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .finetune-question {
            padding: 0.5rem 1rem;
            background: rgba(244, 114, 182, 0.15);
            border-radius: 6px;
            border: 1px solid rgba(244, 114, 182, 0.4);
            color: #f9a8d4;
            font-size: 0.85rem;
            text-align: center;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.5s ease;
        }

        .finetune-question.show {
            opacity: 1;
            transform: translateY(0);
        }

        .finetune-comparison {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            width: 100%;
            height: 100%;
        }

        .finetune-result {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s ease;
        }

        .finetune-result.show {
            opacity: 1;
            transform: scale(1);
        }

        .result-label {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
        }

        .bar-chart-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
        }

        .bar-chart {
            width: 60px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .bar-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%;
            background: linear-gradient(180deg, #f472b6, #ec4899);
            border-radius: 0 0 4px 4px;
            transition: height 1s ease-out;
        }

        .bar-fill.animate {
            transition: height 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        #barFillBefore {
            background: linear-gradient(180deg, rgba(156, 163, 175, 0.6), rgba(107, 114, 128, 0.6));
        }

        #barFillAfter {
            background: linear-gradient(180deg, #f472b6, #ec4899);
        }

        .bar-value {
            font-size: 0.75rem;
            font-weight: 600;
            color: #f9a8d4;
            text-align: center;
            opacity: 0;
            transform: translateY(-5px);
            transition: all 0.3s ease;
        }

        .bar-value.show {
            opacity: 1;
            transform: translateY(0);
        }

        .finetune-training {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s ease;
        }

        .finetune-training.show {
            opacity: 1;
            transform: scale(1);
        }

        .training-data {
            padding: 0.4rem 0.8rem;
            background: rgba(244, 114, 182, 0.15);
            border-radius: 6px;
            border: 1px solid rgba(244, 114, 182, 0.4);
            color: #f9a8d4;
            font-size: 0.7rem;
            text-align: center;
        }

        .training-icon {
            font-size: 2rem;
            animation: spin 2s linear infinite;
            filter: drop-shadow(0 0 10px rgba(244, 114, 182, 0.5));
        }

        .training-progress-container {
            width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .training-progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }

        .training-progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #f472b6, #ec4899);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes progress {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        .output-result {
            padding: 1rem;
            background: rgba(244, 114, 182, 0.15);
            border-radius: 8px;
            border: 2px solid rgba(244, 114, 182, 0.4);
            color: #f9a8d4;
            font-size: 0.95rem;
            text-align: center;
            font-weight: 600;
        }

        .demo-llm {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
        }

        .text-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .text-box {
            padding: 1rem;
            background: rgba(96, 165, 250, 0.1);
            border-radius: 10px;
            font-size: 0.9rem;
            flex: 1;
            border: 1px solid rgba(96, 165, 250, 0.3);
            color: white;
        }

        .arrow {
            font-size: 2rem;
            opacity: 0.6;
            animation: pulse 2s infinite;
            color: white;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .demo-multimodal {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .input-types {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .media-icon {
            font-size: 3rem;
            animation: fadeInScale 0.6s ease backwards;
            color: white;
        }

        .media-icon:nth-child(1) { animation-delay: 0.2s; }
        .media-icon:nth-child(2) { animation-delay: 0.4s; }
        .media-icon:nth-child(3) { animation-delay: 0.6s; }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .demo-rag {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            width: 100%;
        }

        .search-visual {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .database-icon {
            font-size: 3rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .progress-indicator {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .progress-dot:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.2);
        }

        .progress-dot.active {
            background: white;
            box-shadow: 0 0 20px white;
            transform: scale(1.3);
        }

        .click-hint {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            opacity: 0.5;
            animation: fadeInOut 2s infinite;
            color: white;
            white-space: nowrap;
        }

        .deck-container:not(.centered) .click-hint {
            display: none;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }

        .click-hint.hidden {
            display: none;
        }

        .instruction {
            text-align: center;
            font-size: 1.5rem;
            opacity: 0.5;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Fixed background layer -->
    <div class="background-layer">
        <canvas id="particles-canvas"></canvas>
    </div>

    <!-- Scrollable content layer -->
    <div class="scroll-container">
        <div class="content-layer">
            <!-- Page 1: Cover -->
            <div class="page" id="page1">
                <div class="content">
                    <h1 class="main-title">
                        You think <span class="glow">AI</span> is just<br>
                        <span class="glow">ChatGPT</span>?
                    </h1>
                    <div class="subtitle">Think again.</div>
                    <div class="info">
                        Yiwen Wu · HERA Lab
                    </div>
                </div>
            </div>

            <!-- Page 2: Iceberg -->
            <div class="page" id="page2" style="background: transparent;">
                <img src="ice_above.png" alt="Iceberg" class="iceberg-image" />
                <div class="page2-content">
                    <h2 class="page2-title">
                        <span class="title-line">
                            <span class="title-fixed">ChatGPT</span>&nbsp;<span class="title-moving">is just the tip of the</span>
                        </span>
                        <span class="title-line">
                            <span class="title-moving">iceberg</span>
                        </span>
                    </h2>
                </div>
            </div>

            <!-- Page 3: Blank -->
            <div class="page" id="page3" style="background: transparent;">
                <img src="ice_below.png" alt="Iceberg below" class="iceberg-below-image" />
            </div>

            <!-- Page 4: AI Capabilities -->
            <div class="page" id="page4" style="background: transparent;">
                <div class="page4-container">
                    <h2 class="page4-title">AI Capabilities Ecosystem</h2>
                    <div class="page4-content">
                        <div class="deck-container" id="deckContainer">
                            <div class="card-stack" id="cardStack"></div>
                            <div class="click-hint" id="clickHint"></div>
                        </div>
                        <div class="detail-panel" id="detailPanel">
                            <div class="instruction"></div>
                            <div id="detailContent"></div>
                        </div>
                    </div>
                    <div class="progress-indicator" id="progressIndicator"></div>
                </div>
            </div>

            <!-- Page 5: New Page -->
            <div class="page" id="page5">
                <div class="page5-container">
                    <h2 class="page5-title">From Theory to Practice</h2>
                </div>
            </div>

            <!-- Page 6: Without RAG Demo -->
            <div class="page" id="page6">
                <div class="page6-container">
                    <div class="page6-demo-container">
                        <h2 class="page6-title">Without RAG</h2>
                        
                        <!-- Input Box -->
                        <div class="page6-input-box" id="page6InputBox">
                            <div class="page6-input-text" id="page6TypingText"></div>
                            <button class="page6-send-btn" id="page6SendBtn">➤</button>
                        </div>
                        
                        <!-- Rectangle Box (User Query) -->
                        <div class="page6-rectangle-box" id="page6RectangleBox">
                            <div class="page6-rectangle-content">
                                When is the office hour?
                            </div>
                        </div>
                        
                        <!-- System Prompt + Syllabus Box -->
                        <div class="page6-rectangle-box" id="page6SystemBox" style="top: 200px;">
                            <div class="page6-rectangle-content">
                                <div>Answer questions about the course based on the provided syllabus if the user asks</div>
                                <div class="syllabus-content">
                                    <div style="margin-top: 1rem; font-weight: 600;">Course Syllabus:</div>
                                    <div style="margin-top: 0.5rem;">Course: Introduction to Computer Science</div>
                                    <div>Instructor: Dr. Smith</div>
                                    <div>Office Hours: Monday 2-4pm, Wednesday 10-12pm</div>
                                    <div>Location: Room 301, Science Building</div>
                                    <div>Contact: smith@university.edu</div>
                                    <div class="fade-out"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Pulse Line -->
                        <div class="page6-pulse-line" id="page6PulseLine"></div>
                        
                        <!-- Loading Spinner -->
                        <div class="page6-loading" id="page6Loading"></div>
                        
                        <!-- Response Box -->
                        <div class="page6-response-box" id="page6ResponseBox">
                            <div class="page6-response-content" id="page6ResponseContent">
                                Monday 2-4pm and Wednesday 10-12 pm by contacting Dr. Smith with smith@university.edu
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Page 7: With RAG -->
            <div class="page" id="page7">
                <div class="page7-container">
                    <div class="page7-demo-container">
                        <h2 class="page7-title">With RAG</h2>
                        
                        <div class="page7-rag-container">
                            <!-- Syllabus Icon -->
                            <div class="page7-syllabus-icon" id="page7SyllabusIcon">
                                <div class="page7-file-icon">📄</div>
                                <div class="page7-syllabus-label">syllabus</div>
                            </div>
                            
                            <!-- Pulse Line from syllabus to chunks wrapper -->
                            <div class="page7-pulse-line" id="page7PulseLine"></div>
                            
                            <!-- Chunks Wrapper (big box) -->
                            <div class="page7-chunks-wrapper" id="page7ChunksWrapper">
                                <!-- Chunks Container -->
                                <div class="page7-chunks-container">
                                <!-- Chunk 1 -->
                                <div class="page7-chunk" id="page7Chunk1">
                                    <div class="page7-chunk-title">Chunk 1</div>
                                    <div class="page7-chunk-item">Course name</div>
                                    <div class="page7-chunk-item">Instructor</div>
                                    <div class="page7-chunk-item">Contact</div>
                                </div>
                                
                                <!-- Chunk 2 -->
                                <div class="page7-chunk" id="page7Chunk2">
                                    <div class="page7-chunk-title">Chunk 2</div>
                                    <div class="page7-chunk-item">Location</div>
                                    <div class="page7-chunk-item">Office hour</div>
                                    <div class="page7-chunk-item">Class time</div>
                                </div>
                                
                                <!-- Chunk 3 -->
                                <div class="page7-chunk" id="page7Chunk3">
                                    <div class="page7-chunk-title">Chunk 3</div>
                                    <div class="page7-chunk-item">Grade Table</div>
                                    <div class="page7-chunk-item">Assignment Rubric</div>
                                </div>
                                </div>
                            </div>
                            
                            <!-- Right side blocks -->
                            <div class="page7-right-blocks">
                                <!-- User Block -->
                                <div class="page7-user-block" id="page7UserBlock">
                                    <div class="page7-user-content" id="page7UserContent">
                                        When is the office hour?
                                    </div>
                                </div>
                                
                                <!-- Prompt Block -->
                                <div class="page7-prompt-block" id="page7PromptBlock">
                                    <div class="page7-prompt-left">
                                        Answer questions about the course based on the provided syllabus if the user asks
                                    </div>
                                    <div class="page7-prompt-plus">+</div>
                                    <div class="page7-prompt-right" id="page7PromptRight">
                                        <div class="page7-chunk-title">Chunk 2</div>
                                        <div class="page7-chunk-item">Location</div>
                                        <div class="page7-chunk-item">Office hour</div>
                                        <div class="page7-chunk-item">Class time</div>
                                    </div>
                                </div>
                                
                                <!-- Response Block -->
                                <div class="page7-response-block" id="page7ResponseBlock">
                                    <div class="page7-response-content">
                                        Office hours are held on Monday from 2-4pm and Wednesday from 10-12 pm
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- StatPal Wrapper: Contains shared header and pages -->
            <div class="statpal-wrapper" id="statpalWrapper">
                <!-- Shared Header (moves to top on page 9) -->
                <div class="page8-header" id="page8Header">
                    <div class="page8-logo-container">
                        <img src="statpal.png" alt="StatPal Logo" class="page8-logo">
                    </div>
                    <h1 class="page8-title">StatPal</h1>
                </div>
                
                <!-- Page 8: StatPal -->
                <div class="page" id="page8">
                    <div class="page8-container">
                        <!-- Description -->
                        <p class="page8-description">Supports students in statistical analysis with contextual hints. Monitors data analysis workflows and concept comprehension.</p>
                        
                        <!-- Cards Container -->
                        <div class="page8-cards-container">
                            <!-- For Students Card -->
                            <div class="page8-card">
                                <h2 class="page8-card-title">For Students</h2>
                                <ul class="page8-feature-list">
                                    <li class="page8-feature-item">
                                        <span class="page8-checkmark">✓</span>
                                        <span>Receive statistical concept guidance</span>
                                    </li>
                                    <li class="page8-feature-item">
                                        <span class="page8-checkmark">✓</span>
                                        <span>Contextual hints for data analysis</span>
                                    </li>
                                    <li class="page8-feature-item">
                                        <span class="page8-checkmark">✓</span>
                                        <span>Learn statistical methods through guided practice</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <!-- For Instructors Card -->
                            <div class="page8-card">
                                <h2 class="page8-card-title">For Instructors</h2>
                                <ul class="page8-feature-list">
                                    <li class="page8-feature-item">
                                        <span class="page8-checkmark">✓</span>
                                        <span>Track analysis workflow patterns</span>
                                    </li>
                                    <li class="page8-feature-item">
                                        <span class="page8-checkmark">✓</span>
                                        <span>Monitor student comprehension metrics</span>
                                    </li>
                                    <li class="page8-feature-item">
                                        <span class="page8-checkmark">✓</span>
                                        <span>Identify areas where students struggle</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Page 9: Screenshot -->
                <div class="page" id="page9">
                    <img src="statpal_screenshot1.png" alt="StatPal Screenshot" class="page9-screenshot">
                </div>
                
                <!-- Page 10: Screenshot 2 -->
                <div class="page" id="page10">
                    <img src="statpal_screenshot2.png" alt="StatPal Screenshot 2" class="page9-screenshot">
                </div>
                
                <!-- Page 11: Screenshot 3 -->
                <div class="page" id="page11">
                    <img src="statpal_screenshot3.png" alt="StatPal Screenshot 3" class="page9-screenshot">
                </div>
            </div>
            
            <!-- StudyGroup Intro Page -->
            <div class="page" id="studygroup-intro">
                <h1 class="studygroup-title">StudyGroup</h1>
                <p class="studygroup-description">
                    An AI-powered study group platform for large online STEM courses that turns peer interaction into a scalable learning community. Using instructor guidance and learning analytics, it detects unproductive group interaction (e.g., exclusion, missing focus) and delivers just-in-time, theory-grounded, and course-based facilitation strategies (e.g., invite quieter voice, surface key excerpt) to support equitable participation and deeper learning without adding instructor workload.
                </p>
            </div>
            
            <!-- Limitations & Risks Title Page -->
            <div class="page" id="placeholder1">
                <h1 class="limitations-main-title">
                    But wait...<br>
                    <span class="emphasis">what could go wrong?</span>
                </h1>
                <div class="limitations-warning-icon">⚠️</div>
                <p class="limitations-subtitle">
                    Understanding AI's limitations before you design your research
                </p>
            </div>
            
            <!-- AI is not deterministic Demo Page -->
            <div class="page" id="page-deterministic-demo">
                <h1 class="deterministic-title">AI is not deterministic</h1>
                <h2 class="deterministic-subtitle">Same input ≠ Same output</h2>
                
                <div class="deterministic-demo">
                    <div class="deterministic-input-box" id="deterministicInputBox">
                        <div class="deterministic-input-label">Input (User)</div>
                        <div class="deterministic-input-text" id="deterministicInputText"></div>
                    </div>
                    
                    <div class="deterministic-arrow" id="deterministicArrow">
                        <svg viewBox="0 0 300 200" preserveAspectRatio="none">
                            <!-- Left path: from center top to left bottom -->
                            <path d="M 150 0 Q 50 100, 50 200" />
                            <!-- Right path: from center top to right bottom -->
                            <path d="M 150 0 Q 250 100, 250 200" />
                            <!-- Arrow heads -->
                            <polygon points="50,200 40,190 45,190 45,185 55,185 55,190 60,190" class="arrow-head" />
                            <polygon points="250,200 260,190 255,190 255,185 245,185 245,190 240,190" class="arrow-head" />
                        </svg>
                    </div>
                    
                    <div class="deterministic-outputs-container">
                        <div class="deterministic-output-box output1" id="deterministicOutput1">
                            <div class="deterministic-output-label">Output 1</div>
                            <div class="deterministic-output-text" id="deterministicOutput1Text"></div>
                        </div>
                        <div class="deterministic-output-box output2" id="deterministicOutput2">
                            <div class="deterministic-output-label">Output 2</div>
                            <div class="deterministic-output-text" id="deterministicOutput2Text"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AI Non-determinism Impact Page -->
            <div class="page" id="page-deterministic-impact">
                <h1 class="impact-title">What does this mean for your research?</h1>
                <h2 class="impact-subtitle">Understanding the implications of AI non-determinism</h2>
                
                <div class="impact-cards-container">
                    <!-- Card 1: Reproducibility Crisis -->
                    <div class="impact-card card1" id="impactCard1">
                        <span class="impact-card-icon">📊</span>
                        <div class="impact-card-title">Reproducibility Crisis</div>
                        <div class="impact-card-content">
                            <p>Your AI system's behavior today may differ from tomorrow</p>
                            <p>Other researchers using the same method may get different results</p>
                        </div>
                    </div>
                    
                    <!-- Card 2: Validity Concerns -->
                    <div class="impact-card card2" id="impactCard2">
                        <span class="impact-card-icon">✓</span>
                        <div class="impact-card-title">Validity Concerns</div>
                        <div class="impact-card-content">
                            <p>If AI judgments vary each time, how do you ensure valid measurement?</p>
                            <p>Critical for:</p>
                            <ul>
                                <li>Psychological assessment</li>
                                <li>Behavioral coding</li>
                                <li>Sentiment analysis</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Card 3: Research Design -->
                    <div class="impact-card card3" id="impactCard3">
                        <span class="impact-card-icon">🔬</span>
                        <div class="impact-card-title">Research Design</div>
                        <div class="impact-card-content">
                            <p>You need larger samples</p>
                            <p>Report model params</p>
                            <p>Run multiple times</p>
                        </div>
                    </div>
                </div>
                
                <div class="impact-considerations">
                    <h3 class="impact-considerations-title">Research Considerations:</h3>
                    <p class="impact-considerations-subtitle">Before using AI in your study:</p>
                    <hr class="impact-considerations-divider">
                    <ul class="impact-considerations-list">
                        <li>Is reproducibility critical for your research question?</li>
                        <li>Can you tolerate some variance in AI outputs?</li>
                        <li>How will you report AI's non-deterministic behavior in your methods section?</li>
                        <li>Do you have sufficient sample size to account for AI variability?</li>
                        <li>Will you run multiple trials and report consistency metrics?</li>
                    </ul>
                </div>
            </div>
            
            <!-- AI Can Confidently Lie Page -->
            <div class="page" id="page-hallucination-demo">
                <h1 class="hallucination-title">AI can confidently lie</h1>
                <h2 class="hallucination-subtitle">It doesn't know what it doesn't know</h2>
                
                <div class="hallucination-conversation">
                    <!-- Researcher Bubble -->
                    <div class="hallucination-bubble researcher" id="researcherBubble">
                        <div class="hallucination-bubble-header">
                            <span>👤</span>
                            <span>Researcher</span>
                        </div>
                        <div class="hallucination-bubble-content typing" id="researcherText"></div>
                    </div>
                    
                    <!-- AI Bubble -->
                    <div class="hallucination-bubble ai" id="aiBubble">
                        <div class="hallucination-bubble-header">
                            <span>🤖</span>
                            <span>AI Assistant</span>
                        </div>
                        <div class="hallucination-bubble-content typing" id="aiText"></div>
                    </div>
                    
                    <!-- Warning Box -->
                    <div class="hallucination-warning" id="hallucinationWarning">
                        <div class="hallucination-warning-title">
                            <span>⚠️</span>
                            <span>HALLUCINATION DETECTED</span>
                        </div>
                        <div class="hallucination-warning-item" id="warningItem1">
                            <span class="hallucination-warning-icon">❌</span>
                            <div class="hallucination-warning-text">Bowlby died in 1990, never wrote about "digital attachment"</div>
                        </div>
                        <div class="hallucination-warning-item" id="warningItem2">
                            <span class="hallucination-warning-icon">❌</span>
                            <div class="hallucination-warning-text">No journal entry from March 15th</div>
                        </div>
                        <div class="hallucination-warning-item" id="warningItem3">
                            <span class="hallucination-warning-icon">❌</span>
                            <div class="hallucination-warning-text">"Anxious-avoidant" is not standard attachment terminology</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Hallucination Dangers Page -->
            <div class="page" id="page-hallucination-dangers">
                <h1 class="impact-title">Why hallucinations are dangerous for research</h1>
                <h2 class="impact-subtitle">When AI invents data, real harm can follow</h2>
                
                <div class="impact-cards-container">
                    <!-- Card 1: False Patterns -->
                    <div class="impact-card card1">
                        <span class="impact-card-icon">🔬</span>
                        <div class="impact-card-title">False Patterns</div>
                        <div class="impact-card-content">
                            <p>AI may "detect" psychological patterns or behaviors that aren't actually there</p>
                            <p>Example:</p>
                            <p>"Student shows signs of depression" based on non-existent evidence</p>
                        </div>
                    </div>
                    
                    <!-- Card 2: Fabricated Literature -->
                    <div class="impact-card card2">
                        <span class="impact-card-icon">📚</span>
                        <div class="impact-card-title">Fabricated Literature</div>
                        <div class="impact-card-content">
                            <p>AI invents citations and studies that don't exist</p>
                            <p>Dangerous when:</p>
                            <ul>
                                <li>Literature reviews</li>
                                <li>Background research</li>
                                <li>Theoretical frameworks</li>
                            </ul>
                            <p>You waste time chasing fake references</p>
                        </div>
                    </div>
                    
                    <!-- Card 3: Wrong Action -->
                    <div class="impact-card card3">
                        <span class="impact-card-icon">🚨</span>
                        <div class="impact-card-title">Wrong Action</div>
                        <div class="impact-card-content">
                            <p>Most serious risk:</p>
                            <p>AI says student needs urgent mental health help</p>
                            <p>But AI made it up</p>
                        </div>
                    </div>
                </div>
                
                <div class="impact-considerations">
                    <h3 class="impact-considerations-title">Research Considerations:</h3>
                    <p class="impact-considerations-subtitle">Critical questions for AI-assisted research:</p>
                    <hr class="impact-considerations-divider">
                    
                    <div class="consideration-section">
                        <div class="consideration-section-title">
                            <span>🔍</span>
                            <span>Verification</span>
                        </div>
                        <ul class="consideration-section-list">
                            <li>Can you independently verify AI's analysis?</li>
                            <li>Do you have human experts reviewing AI output?</li>
                            <li>Are you cross-checking AI's citations?</li>
                        </ul>
                    </div>
                    
                    <div class="consideration-section">
                        <div class="consideration-section-title">
                            <span>🛡️</span>
                            <span>Safeguards</span>
                        </div>
                        <ul class="consideration-section-list">
                            <li>Never use AI as the sole decision-maker</li>
                            <li>Especially critical for: student welfare, psychological assessment, intervention recommendations</li>
                        </ul>
                    </div>
                    
                    <div class="consideration-section">
                        <div class="consideration-section-title">
                            <span>📋</span>
                            <span>Transparency</span>
                        </div>
                        <ul class="consideration-section-list">
                            <li>How will you report AI's role in your research?</li>
                            <li>What happens when AI makes an error?</li>
                            <li>Who is accountable for AI-generated insights?</li>
                        </ul>
                    </div>
                    
                </div>
            </div>
            
            <!-- Student Data Pipeline Page -->
            <div class="page" id="page-data-pipeline">
                <h1 class="pipeline-title">Student data is sacred</h1>
                <h2 class="pipeline-subtitle">Where can things go wrong in the research pipeline?</h2>
                
                <div class="pipeline-flow">
                    <div class="pipeline-step" id="step1">
                        <div class="pipeline-step-icon">👨‍🎓</div>
                        <div class="pipeline-step-label">Student</div>
                    </div>
                    <div class="pipeline-arrow">→</div>
                    <div class="pipeline-step" id="step2">
                        <div class="pipeline-step-icon">📝</div>
                        <div class="pipeline-step-label">Collection</div>
                    </div>
                    <div class="pipeline-arrow">→</div>
                    <div class="pipeline-step" id="step3">
                        <div class="pipeline-step-icon">🤖</div>
                        <div class="pipeline-step-label">AI Analysis</div>
                    </div>
                    <div class="pipeline-arrow">→</div>
                    <div class="pipeline-step" id="step4">
                        <div class="pipeline-step-icon">📊</div>
                        <div class="pipeline-step-label">Research</div>
                    </div>
                    <div class="pipeline-arrow">→</div>
                    <div class="pipeline-step" id="step5">
                        <div class="pipeline-step-icon">📄</div>
                        <div class="pipeline-step-label">Publication</div>
                    </div>
                </div>
                
                <div class="pipeline-risks">
                    <div class="pipeline-risk" id="risk1">
                        <div class="pipeline-risk-icon">⚠️</div>
                        <div class="pipeline-risk-title">Consent</div>
                        <div class="pipeline-risk-content" id="riskContent1">
                            Do students truly understand what "AI analysis" means?
                        </div>
                    </div>
                    
                    <div class="pipeline-risk" id="risk2">
                        <div class="pipeline-risk-icon">⚠️</div>
                        <div class="pipeline-risk-title">Storage</div>
                        <div class="pipeline-risk-content" id="riskContent2">
                            Where is data stored? Cloud vs local? Who has access?
                        </div>
                    </div>
                    
                    <div class="pipeline-risk" id="risk3">
                        <div class="pipeline-risk-icon">⚠️</div>
                        <div class="pipeline-risk-title">Bias</div>
                        <div class="pipeline-risk-content" id="riskContent3">
                            AI performs differently across groups
                        </div>
                    </div>
                    
                    <div class="pipeline-risk" id="risk4">
                        <div class="pipeline-risk-icon">⚠️</div>
                        <div class="pipeline-risk-title">Re-ID</div>
                        <div class="pipeline-risk-content" id="riskContent4">
                            Can data be traced back to individuals?
                        </div>
                    </div>
                    
                    <div class="pipeline-risk" id="risk5">
                        <div class="pipeline-risk-icon">⚠️</div>
                        <div class="pipeline-risk-title">Misuse</div>
                        <div class="pipeline-risk-content" id="riskContent5">
                            Could findings be used against students?
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tools for Getting Started Page -->
            <div class="page" id="page-tools">
                <h1 class="tools-title">Tools for getting started</h1>
                <h2 class="tools-subtitle">No programming required</h2>
                
                <div class="tools-cards-container">
                    <!-- Google AI Studio Card -->
                    <div class="tool-card google">
                        <div class="tool-card-name">Google AI Studio</div>
                        <div class="tool-card-icon">🔬</div>
                        <hr class="tool-card-divider">
                        
                        <div class="tool-card-section">
                            <div class="tool-card-section-title">What it is:</div>
                            <div class="tool-card-section-text">Google's playground for testing AI models</div>
                        </div>
                        
                        <div class="tool-card-section">
                            <div class="tool-card-section-title">Best for:</div>
                            <ul class="tool-card-list">
                                <li>Prompt testing</li>
                                <li>Quick experiments</li>
                                <li>Comparing different models</li>
                                <li>Free tier available</li>
                            </ul>
                        </div>
                        
                        <div class="tool-card-section">
                            <div class="tool-card-section-title">Use case:</div>
                            <div class="tool-card-section-text">Test how different prompts analyze student feedback</div>
                        </div>
                    </div>
                    
                    <!-- Cursor Card -->
                    <div class="tool-card cursor">
                        <div class="tool-card-name">Cursor</div>
                        <div class="tool-card-icon">💻</div>
                        <hr class="tool-card-divider">
                        
                        <div class="tool-card-section">
                            <div class="tool-card-section-title">What it is:</div>
                            <div class="tool-card-section-text">AI-powered code editor</div>
                        </div>
                        
                        <div class="tool-card-section">
                            <div class="tool-card-section-title">Best for:</div>
                            <ul class="tool-card-list">
                                <li>Building simple tools</li>
                                <li>Auto-generating code</li>
                                <li>Minimal coding knowledge needed</li>
                            </ul>
                        </div>
                        
                        <div class="tool-card-section">
                            <div class="tool-card-section-title">Use case:</div>
                            <div class="tool-card-section-text">Build a simple data processing script with AI's help</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Thank You Page -->
            <div class="page" id="page-thank-you">
                <h1 class="thank-you-title">Thank You!</h1>
                <h2 class="thank-you-subtitle">Questions?</h2>
                <p class="thank-you-contact">
                    Contact: <a href="mailto:yiw423@lehigh.edu" class="thank-you-email">yiw423@lehigh.edu</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Particle system
        const canvas = document.getElementById('particles-canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const particleCount = 100;
        let mouse = { x: null, y: null, radius: 150 };

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3 + 1;
                this.speedX = (Math.random() * 0.4 - 0.2);
                this.speedY = (Math.random() * 0.4 - 0.2);
                this.color = this.getColor();
            }

            getColor() {
                const colors = [
                    'rgba(233, 69, 96, 0.8)',
                    'rgba(83, 52, 131, 0.8)',
                    'rgba(15, 52, 96, 0.8)',
                    'rgba(255, 255, 255, 0.8)'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                // Mouse interaction
                if (mouse.x != null && mouse.y != null) {
                    let dx = mouse.x - this.x;
                    let dy = mouse.y - this.y;
                    let distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < mouse.radius) {
                        let force = (mouse.radius - distance) / mouse.radius;
                        let directionX = dx / distance;
                        let directionY = dy / distance;
                        this.x -= directionX * force * 3;
                        this.y -= directionY * force * 3;
                    }
                }

                // Boundary check
                if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
            }

            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function init() {
            particles.length = 0;
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
        }

        function connect() {
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    let dx = particles[i].x - particles[j].x;
                    let dy = particles[i].y - particles[j].y;
                    let distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < 120) {
                        ctx.strokeStyle = `rgba(255, 255, 255, ${0.2 * (1 - distance / 120)})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for (let particle of particles) {
                particle.update();
                particle.draw();
            }
            
            connect();
            requestAnimationFrame(animate);
        }

        init();
        animate();

        // Mouse move event
        window.addEventListener('mousemove', (e) => {
            mouse.x = e.x;
            mouse.y = e.y;
        });

        window.addEventListener('mouseout', () => {
            mouse.x = null;
            mouse.y = null;
        });

        // Resize handler
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            init();
        });

        // Smooth scroll with easing
        const scrollContainer = document.querySelector('.scroll-container');
        const pages = document.querySelectorAll('.page');
        let currentPage = 0;
        let isScrolling = false;
        let targetScroll = 0;
        let currentScroll = 0;
        const pageHeight = window.innerHeight;
        
        // Page 4 and 5 transition state variables (declared early to avoid initialization errors)
        let isEnteringFromPreviousPage = false; // Track if entering page 4 from previous page
        let isCardChanging = false; // Prevent multiple card changes in quick succession
        let isTransitioningBetweenPage4And5 = false; // Track if transitioning between page 4 and 5

        // Initialize scroll position
        currentScroll = 0;
        targetScroll = 0;

        // Easing function for smooth acceleration/deceleration
        function easeOutCubic(t) {
            return 1 - Math.pow(1 - t, 3);
        }

        function easeInOutCubic(t) {
            return t < 0.5
                ? 4 * t * t * t
                : 1 - Math.pow(-2 * t + 2, 3) / 2;
        }

        // Smooth scroll animation
        let animationStartTime = null;
        let animationStartScroll = 0;
        const animationDuration = 800; // milliseconds

        function smoothScroll(timestamp) {
            if (!animationStartTime) {
                animationStartTime = timestamp;
                animationStartScroll = currentScroll;
            }

            const elapsed = timestamp - animationStartTime;
            const progress = Math.min(elapsed / animationDuration, 1);
            
            // Apply easing function for smooth acceleration/deceleration
            const easedProgress = easeInOutCubic(progress);
            
            // Interpolate from start to target
            currentScroll = animationStartScroll + (targetScroll - animationStartScroll) * easedProgress;
            
            updatePagePositions();

            if (progress < 1) {
                requestAnimationFrame(smoothScroll);
            } else {
                currentScroll = targetScroll;
                isScrolling = false;
                animationStartTime = null;
                animationStartScroll = 0;
                updatePagePositions();
            }
        }

        function updatePagePositions() {
            const contentLayer = document.querySelector('.content-layer');
            if (contentLayer) {
                // When transitioning between page 4 and page 5, keep vertical position fixed
                // to prevent diagonal movement (combining translateY and translateX)
                if (isTransitioningBetweenPage4And5) {
                    // Keep vertical position at page 4's position (3 * pageHeight)
                    const page4Scroll = 3 * pageHeight;
                    contentLayer.style.transform = `translateY(${-page4Scroll}px)`;
                    
                    // Handle rag-file-stack-3d: keep it fixed during page transition
                    // Since it's now fixed position, it should stay in place automatically
                    // But we need to ensure its 3D transform is preserved
                    const ragFileStack = document.getElementById('ragFileStack3D');
                    if (ragFileStack && ragFileStack.classList.contains('fixed-position')) {
                        // Keep the 3D transform, but don't add any translation to counteract page 4
                        // Fixed position already keeps it in viewport coordinates
                        // Don't update position here - it should stay fixed where it was set
                        ragFileStack.style.transform = `rotateY(-30deg) rotateX(10deg) translateX(10px)`;
                    }
                } else if (currentPage === 5) {
                    // On page 6, keep page 5 visible by maintaining its position
                    // Page 5 is at 300vh (3 * pageHeight), so keep contentLayer at that position
                    const page5Scroll = 3 * pageHeight;
                    contentLayer.style.transform = `translateY(${-page5Scroll}px)`;
                    
                    // Keep rag-file-stack-3d transform
                    const ragFileStack = document.getElementById('ragFileStack3D');
                    if (ragFileStack && ragFileStack.classList.contains('fixed-position')) {
                        ragFileStack.style.transform = `rotateY(-30deg) rotateX(10deg) translateX(10px)`;
                    }
                } else if (currentPage === 6) {
                    // On page 7, keep page 5 visible by maintaining its position
                    // Page 5 is at 300vh (3 * pageHeight), so keep contentLayer at that position
                    const page5Scroll = 3 * pageHeight;
                    contentLayer.style.transform = `translateY(${-page5Scroll}px)`;
                    
                    // Keep rag-file-stack-3d transform
                    const ragFileStack = document.getElementById('ragFileStack3D');
                    if (ragFileStack && ragFileStack.classList.contains('fixed-position')) {
                        ragFileStack.style.transform = `rotateY(-30deg) rotateX(10deg) translateX(10px)`;
                    }
                } else if (currentPage === 7) {
                    // On page 8, scroll to page 8's position (700vh = 7 * pageHeight)
                    const page8Scroll = 7 * pageHeight;
                    contentLayer.style.transform = `translateY(${-page8Scroll}px)`;
                } else if (currentPage === 8 || currentPage === 9 || currentPage === 10) {
                    // On page 9, 10, or 11, keep page 8's position (700vh = 7 * pageHeight)
                    const page8Scroll = 7 * pageHeight;
                    contentLayer.style.transform = `translateY(${-page8Scroll}px)`;
                } else if (currentPage === 11) {
                    // On studygroup intro page, scroll to studygroup position (800vh = 8 * pageHeight)
                    const studygroupScroll = 8 * pageHeight;
                    contentLayer.style.transform = `translateY(${-studygroupScroll}px)`;
                } else if (currentPage === 12) {
                    // On placeholder1 page, scroll to placeholder position (900vh = 9 * pageHeight)
                    const placeholderScroll = 9 * pageHeight;
                    contentLayer.style.transform = `translateY(${-placeholderScroll}px)`;
                } else if (currentPage === 13) {
                    // On deterministic demo page, scroll to deterministic position (1000vh = 10 * pageHeight)
                    const deterministicScroll = 10 * pageHeight;
                    contentLayer.style.transform = `translateY(${-deterministicScroll}px)`;
                } else if (currentPage === 14) {
                    // On deterministic impact page, scroll to deterministic impact position (1100vh = 11 * pageHeight)
                    const deterministicImpactScroll = 11 * pageHeight;
                    contentLayer.style.transform = `translateY(${-deterministicImpactScroll}px)`;
                } else if (currentPage === 15) {
                    // On hallucination demo page, scroll to hallucination position (1200vh = 12 * pageHeight)
                    const hallucinationScroll = 12 * pageHeight;
                    contentLayer.style.transform = `translateY(${-hallucinationScroll}px)`;
                } else if (currentPage === 16) {
                    // On hallucination dangers page, scroll to hallucination dangers position (1300vh = 13 * pageHeight)
                    const hallucinationDangersScroll = 13 * pageHeight;
                    contentLayer.style.transform = `translateY(${-hallucinationDangersScroll}px)`;
                } else if (currentPage === 17) {
                    // On data pipeline page, scroll to data pipeline position (1400vh = 14 * pageHeight)
                    const dataPipelineScroll = 14 * pageHeight;
                    contentLayer.style.transform = `translateY(${-dataPipelineScroll}px)`;
                } else if (currentPage === 18) {
                    // On tools page, scroll to tools position (1500vh = 15 * pageHeight)
                    const toolsScroll = 15 * pageHeight;
                    contentLayer.style.transform = `translateY(${-toolsScroll}px)`;
                } else if (currentPage === 19) {
                    // On thank you page, scroll to thank you position (1600vh = 16 * pageHeight)
                    const thankYouScroll = 16 * pageHeight;
                    contentLayer.style.transform = `translateY(${-thankYouScroll}px)`;
                } else {
                    // Normal vertical scrolling for all other pages
                    const offset = -currentScroll;
                    contentLayer.style.transform = `translateY(${offset}px)`;
                    
                    // Keep rag-file-stack-3d transform when not transitioning
                    const ragFileStack = document.getElementById('ragFileStack3D');
                    if (ragFileStack && ragFileStack.classList.contains('fixed-position')) {
                        ragFileStack.style.transform = `rotateY(-30deg) rotateX(10deg) translateX(10px)`;
                    }
                }
            }

            // Synchronized movement for both iceberg images
            // Both images move together with the same distance when scrolling from page 2 to page 3
            const icebergImage = document.querySelector('.iceberg-image');
            const icebergBelowImage = document.querySelector('.iceberg-below-image');
            const titleFixed = document.querySelector('.title-fixed');
            const titleMovingElements = document.querySelectorAll('.title-moving');
            
            // Calculate scroll progress when scrolling from page 2 to page 3
            const page2Start = pageHeight;
            const page2End = pageHeight * 2;
            
            if (currentScroll >= page2Start && currentScroll <= page2End) {
                // When scrolling from page 2 to page 3
                const scrollProgress = (currentScroll - page2Start) / pageHeight;
                // Both images move together with the same offset (synchronized)
                // They move slower than content for parallax effect
                const parallaxOffset = scrollProgress * pageHeight * 0.6;
                
                if (icebergImage) {
                    // ice_above moves down (positive) to slow down its upward movement
                    icebergImage.style.transform = `translateY(${parallaxOffset}px)`;
                }
                if (icebergBelowImage) {
                    // ice_below moves down (positive) to slow down its upward movement
                    // Both move the same distance
                    icebergBelowImage.style.transform = `translateY(${parallaxOffset}px)`;
                }
                
                // Title animation: "ChatGPT" stays fixed, "is just the tip..." moves up
                const contentOffset = currentScroll - page2Start;
                if (titleFixed) {
                    // "ChatGPT" moves down to counteract content layer movement
                    // This keeps it in the same screen position
                    titleFixed.style.transform = `translateY(${contentOffset}px)`;
                }
                // All "title-moving" elements move normally with content
                titleMovingElements.forEach(el => {
                    el.style.transform = `translateY(0px)`;
                });
            } else if (currentScroll < page2Start) {
                // Before page 2, reset positions
                if (icebergImage) icebergImage.style.transform = `translateY(0px)`;
                if (icebergBelowImage) icebergBelowImage.style.transform = `translateY(0px)`;
                if (titleFixed) titleFixed.style.transform = `translateY(0px)`;
                titleMovingElements.forEach(el => {
                    el.style.transform = `translateY(0px)`;
                });
            } else {
                // After page 2, both images are at their final positions
                const finalOffset = pageHeight * 0.6;
                if (icebergImage) icebergImage.style.transform = `translateY(${finalOffset}px)`;
                if (icebergBelowImage) icebergBelowImage.style.transform = `translateY(${finalOffset}px)`;
                // "ChatGPT" stays fixed at its position
                if (titleFixed) titleFixed.style.transform = `translateY(${pageHeight}px)`;
                titleMovingElements.forEach(el => {
                    el.style.transform = `translateY(0px)`;
                });
            }
        }

        // Handle wheel event
        let lastWheelDirection = 0;
        let wheelAccumulator = 0;
        const wheelThreshold = 30; // Minimum delta to trigger page change

        function handleWheel(e) {
            e.preventDefault();

            if (isScrolling) return;

            const delta = e.deltaY;
            const direction = delta > 0 ? 1 : -1;
            
            // Accumulate wheel delta
            if (direction === lastWheelDirection) {
                wheelAccumulator += Math.abs(delta);
            } else {
                wheelAccumulator = Math.abs(delta);
                lastWheelDirection = direction;
            }

            // Only trigger page change if accumulated delta exceeds threshold
            if (wheelAccumulator < wheelThreshold) {
                return;
            }

            // Reset accumulator
            wheelAccumulator = 0;
            
            // Special handling for page 4 (AI Capabilities Ecosystem)
            if (currentPage === 3 && deckInitialized) {
                // Prevent multiple card changes in quick succession
                if (isCardChanging) {
                    return;
                }
                
                // Down scroll: move to next card
                if (direction > 0) {
                    // If on last card, allow page navigation
                    if (currentCardIndex >= cards.length) {
                        // Move to next page
                        const newPage = currentPage + 1;
                        if (newPage < pages.length) {
                            currentPage = newPage;
                            targetScroll = currentPage * pageHeight;
                            isScrolling = true;
                            animationStartTime = null;
                            requestAnimationFrame(smoothScroll);
                        }
                    } else {
                        // Move to next card
                        isEnteringFromPreviousPage = false; // Card-to-card navigation, no animation
                        isCardChanging = true; // Set flag to prevent multiple changes
                        showCard(currentCardIndex);
                        // Reset flag after card change animation (500ms should be enough)
                        setTimeout(() => {
                            isCardChanging = false;
                        }, 500);
                    }
                    // Reset accumulator to prevent immediate re-trigger
                    wheelAccumulator = 0;
                    lastWheelDirection = 0;
                    return;
                }
                // Up scroll: move to previous card
                else if (direction < 0) {
                    // If on first card (index 0 or 1), allow page navigation
                    if (currentCardIndex <= 1) {
                        // Move to previous page
                        const newPage = currentPage - 1;
                        if (newPage >= 0) {
                            currentPage = newPage;
                            targetScroll = currentPage * pageHeight;
                            isScrolling = true;
                            animationStartTime = null;
                            requestAnimationFrame(smoothScroll);
                        }
                    } else {
                        // Move to previous card
                        isEnteringFromPreviousPage = false; // Card-to-card navigation, no animation
                        isCardChanging = true; // Set flag to prevent multiple changes
                        showCard(currentCardIndex - 2);
                        // Reset flag after card change animation (500ms should be enough)
                        setTimeout(() => {
                            isCardChanging = false;
                        }, 500);
                    }
                    // Reset accumulator to prevent immediate re-trigger
                    wheelAccumulator = 0;
                    lastWheelDirection = 0;
                    return;
                }
            }
            
            // Special handling for page 11 (currentPage === 10) to studygroup-wrapper
            if (currentPage === 10) {
                // On page 11, allow scrolling down to studygroup-wrapper
                if (direction > 0) {
                    // Move to studygroup intro page (currentPage = 11)
                    currentPage = 11;
                    targetScroll = currentPage * pageHeight;
                    isScrolling = true;
                    animationStartTime = null;
                    requestAnimationFrame(smoothScroll);
                    return;
                }
                // Allow scrolling up to go back to page 10
            }
            
            // Special handling for studygroup intro page (currentPage === 11)
            if (currentPage === 11) {
                if (direction < 0) {
                    // Move back to page 11 (currentPage = 10)
                    currentPage = 10;
                    targetScroll = currentPage * pageHeight;
                    isScrolling = true;
                    animationStartTime = null;
                    requestAnimationFrame(smoothScroll);
                    return;
                }
                // Allow scrolling down for future pages
            }
            
            // Normal page navigation for other pages
            // Don't allow scrolling down on the last page
            const lastPageIndex = pages.length - 1;
            if (direction > 0 && currentPage === lastPageIndex) {
                return;
            }
            
            // Don't allow scrolling up on the first page
            if (direction < 0 && currentPage === 0) {
                return;
            }
            
            const newPage = currentPage + direction;

            if (newPage < 0 || newPage >= pages.length) return;

            // If moving to page 4 from page 3, set flag for entering from previous page
            if (newPage === 3 && currentPage === 2) {
                isEnteringFromPreviousPage = true;
            } else if (newPage === 3 && currentPage === 4) {
                // Coming back from page 5, show last card and reset to last card index
                isEnteringFromPreviousPage = false;
                if (deckInitialized) {
                    // Set currentCardIndex to last card before showing
                    currentCardIndex = cards.length;
                    isCardChanging = true;
                    showCard(cards.length - 1);
                    setTimeout(() => {
                        isCardChanging = false;
                    }, 500);
                }
            } else {
                isEnteringFromPreviousPage = false;
            }

            // Update previousPage before changing currentPage
            previousPage = currentPage;
            currentPage = newPage;
            targetScroll = currentPage * pageHeight;
            isScrolling = true;
            animationStartTime = null;

            requestAnimationFrame(smoothScroll);
        }

        // Handle wheel events directly without delay
        window.addEventListener('wheel', handleWheel, { passive: false });

        // Touch support for mobile
        let touchStartY = 0;
        let touchEndY = 0;

        scrollContainer.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
        }, { passive: true });

        scrollContainer.addEventListener('touchend', (e) => {
            touchEndY = e.changedTouches[0].clientY;
            const diff = touchStartY - touchEndY;

            if (Math.abs(diff) > 50 && !isScrolling) {
                const direction = diff > 0 ? 1 : -1;
                const newPage = currentPage + direction;

                if (newPage >= 0 && newPage < pages.length) {
                    currentPage = newPage;
                    targetScroll = currentPage * pageHeight;
                    isScrolling = true;
                    animationStartTime = null;
                    requestAnimationFrame(smoothScroll);
                }
            }
        }, { passive: true });

        // Initialize page positions
        updatePagePositions();

        // Page 4: Card Deck functionality
        const cards = [
            {
                icon: '🧠',
                name: 'LLM Core',
                tagline: 'Large Language Models',
                subtitle: 'The Foundation',
                description: 'The base intelligence that powers modern AI systems',
                features: [
                    'Trained on billions of words from diverse sources',
                    'Understands context, nuance, and relationships',
                    'Generates human-like text responses',
                    'Performs reasoning and problem-solving'
                ],
                demoHTML: `
                    <div class="llm-chat-demo" id="llmDemo">
                        <div class="chat-input-box" id="llmInputBox">
                            <div class="chat-input-text" id="llmTypingText"></div>
                            <button class="chat-send-btn" id="llmSendBtn">➤</button>
                        </div>
                        <div class="thinking-section" id="llmThinkingSection">
                            <div class="loading-spinner"></div>
                            <div class="process-steps">
                                <div class="process-step">Understand</div>
                                <div class="process-step">Think</div>
                                <div class="process-step">Response</div>
                            </div>
                        </div>
                        <div class="chat-container" id="llmChatContainer">
                            <div class="user-bubble" id="llmUserBubble">What is AI?</div>
                            <div class="ai-bubble" id="llmAiBubble">
                                <span id="llmAiResponse"></span>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                icon: '🎨',
                name: 'Multimodal',
                tagline: 'Beyond Text',
                subtitle: 'Rich Input/Output',
                description: 'Process and generate multiple types of content',
                features: [
                    'Understand images, diagrams, and visual content',
                    'Process audio and speech',
                    'Analyze video content',
                    'Generate diverse media outputs'
                ],
                education: [
                    'Analyze student drawings and diagrams',
                    'Process lecture recordings',
                    'Generate visual learning aids',
                    'Assess multimedia assignments'
                ],
                demoHTML: `
                    <div class="multimodal-demo" id="multimodalDemo">
                        <div class="multimodal-container">
                            <div class="media-box" id="mediaBox1">
                                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                    <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                    <polyline points="21 15 16 10 5 21"></polyline>
                                </svg>
                            </div>
                            <div class="media-box" id="mediaBox2">
                                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                </svg>
                            </div>
                            <div class="media-box" id="mediaBox3">
                                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="23 7 16 12 23 17 23 7"></polygon>
                                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                                </svg>
                            </div>
                            <div class="multimodal-brain" id="multimodalBrain">🧠</div>
                            <div class="connection-line" id="line1"></div>
                            <div class="connection-line" id="line2"></div>
                            <div class="connection-line" id="line3"></div>
                            <div class="connection-line" id="line4"></div>
                            <div class="multimodal-output" id="multimodalOutput"></div>
                        </div>
                    </div>
                `
            },
            {
                icon: '🤖',
                name: 'AI Agents',
                tagline: 'Autonomous Systems',
                subtitle: 'Independent Action',
                description: 'AI that can plan and execute multi-step tasks',
                features: [
                    'Break down complex tasks autonomously',
                    'Make decisions based on context',
                    'Use tools and APIs independently',
                    'Complete workflows without supervision'
                ],
                education: [
                    'Automate grading workflows',
                    'Schedule and coordinate meetings',
                    'Collect and synthesize student data',
                    'Monitor learning progress continuously'
                ],
                demoHTML: `
                    <div class="agent-demo" id="agentDemo">
                        <div class="agent-layout">
                            <div class="agent-left">
                                <div class="agent-task-box" id="agentTaskBox">
                                    <div class="agent-task-icon">📋</div>
                                    <div class="agent-task-text">Task: Grade 50 essays</div>
                                </div>
                            </div>
                            <div class="agent-center">
                                <div class="agent-plan-item" id="planItem1">Read Essay</div>
                                <div class="agent-plan-item" id="planItem2">Assess Quality</div>
                                <div class="agent-plan-item" id="planItem3">Record Grade</div>
                                <div class="agent-plan-item" id="planItem4">Generate Report</div>
                            </div>
                            <div class="agent-right">
                                <div class="agent-complete-box" id="agentCompleteBox">
                                    <div class="complete-icon">✅</div>
                                    <div class="complete-text">Complete</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                icon: '🎯',
                name: 'Skills',
                tagline: 'Specialized Functions',
                subtitle: 'Custom Capabilities',
                description: 'Teach AI specific tasks and abilities',
                features: [
                    'Define custom functions and workflows',
                    'Integrate with external tools',
                    'Create domain-specific expertise',
                    'Combine multiple capabilities'
                ],
                education: [
                    'Create assessment rubrics',
                    'Design curriculum frameworks',
                    'Generate quiz questions',
                    'Format citations properly'
                ],
                demoHTML: `
                    <div class="skills-demo" id="skillsDemo">
                        <div class="skills-container">
                            <div class="skills-left">
                                <div class="skill-tool" id="skill1">
                                    <div class="skill-icon">📊</div>
                                    <div class="skill-label">Data Analysis</div>
                                </div>
                                <div class="skill-tool" id="skill2">
                                    <div class="skill-icon">✍️</div>
                                    <div class="skill-label">Writing</div>
                                </div>
                                <div class="skill-tool" id="skill3">
                                    <div class="skill-icon">🔍</div>
                                    <div class="skill-label">Research</div>
                                </div>
                            </div>
                            <div class="skills-center">
                            </div>
                            <div class="combination-area" id="combinationArea">
                                <div class="plus-icon">+</div>
                            </div>
                            <div class="skills-right">
                            </div>
                        </div>
                    </div>
                `
            },
            {
                icon: '⚙️',
                name: 'Fine-tuning',
                tagline: 'Custom Training',
                subtitle: 'Personalized AI',
                description: 'Adapt AI to your specific needs and style',
                features: [
                    'Train on your data and examples',
                    'Learn your writing style and preferences',
                    'Optimize for specific tasks',
                    'Continuously improve with feedback'
                ],
                education: [
                    'Learn your teaching style',
                    'Adapt to your course content',
                    'Match your assessment criteria',
                    'Reflect your pedagogical approach'
                ],
                demoHTML: `
                    <div class="finetune-demo" id="finetuneDemo">
                        <div class="finetune-question" id="finetuneQuestion">Grade Psychology 101 Essays</div>
                        <div class="finetune-comparison">
                            <div class="finetune-result" id="resultBefore">
                                <div class="result-label">Raw</div>
                                <div class="bar-chart-container">
                                    <div class="bar-chart" id="barBefore">
                                        <div class="bar-fill" id="barFillBefore"></div>
                                    </div>
                                    <div class="bar-value" id="valueBefore">40%</div>
                                </div>
                            </div>
                            <div class="finetune-training" id="finetuneTraining">
                                <div class="training-data">📊 Data + Examples</div>
                                <div class="training-progress-container">
                                    <div class="training-progress-bar">
                                        <div class="training-progress-fill" id="trainingProgressFill"></div>
                                    </div>
                                </div>
                                <div class="training-icon">⚙️</div>
                            </div>
                            <div class="finetune-result" id="resultAfter">
                                <div class="result-label">Fine-tuning</div>
                                <div class="bar-chart-container">
                                    <div class="bar-chart" id="barAfter">
                                        <div class="bar-fill" id="barFillAfter"></div>
                                    </div>
                                    <div class="bar-value" id="valueAfter">85%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                icon: '📚',
                name: 'RAG',
                tagline: 'Retrieval-Augmented Generation',
                subtitle: 'Connected Knowledge',
                description: 'Access external knowledge and databases',
                features: [
                    'Search through your documents and data',
                    'Access real-time information',
                    'Connect to external knowledge bases',
                    'Ground responses in specific sources'
                ],
                education: [
                    'Search through course materials',
                    'Access institutional databases',
                    'Reference specific research papers',
                    'Connect to student records securely'
                ],
                demoHTML: `
                    <div class="rag-demo" id="ragDemo">
                        <div class="rag-container">
                            <div class="rag-left">
                                <div class="rag-file-stack-3d" id="ragFileStack3D">
                                    <div class="rag-file-card" data-index="0" data-type="note">
                                        <div class="rag-file-header">
                                            <svg class="rag-file-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                <polyline points="14 2 14 8 20 8"></polyline>
                                            </svg>
                                            <span class="rag-file-title">Class_Notes_History.docx</span>
                                            <div class="rag-file-dots">
                                                <div class="rag-dot red"></div>
                                                <div class="rag-dot yellow"></div>
                                            </div>
                                        </div>
                                        <div class="rag-file-content">
                                            <div class="rag-file-border blue"></div>
                                            <pre class="rag-file-text">Renaissance Era:
- 14th to 17th century
- Focus on art & science
- Key figure: Da Vinci</pre>
                                        </div>
                                        <div class="rag-file-shine"></div>
                                    </div>
                                    <div class="rag-file-card" data-index="1" data-type="review">
                                        <div class="rag-file-header">
                                            <svg class="rag-file-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                                                <polyline points="14 2 14 8 20 8"></polyline>
                                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                            </svg>
                                            <span class="rag-file-title">Teacher_Feedback.txt</span>
                                            <div class="rag-file-dots">
                                                <div class="rag-dot red"></div>
                                                <div class="rag-dot yellow"></div>
                                            </div>
                                        </div>
                                        <div class="rag-file-content">
                                            <div class="rag-file-border yellow"></div>
                                            <pre class="rag-file-text">Great analysis of the
topic. Please expand on
the economic impact
in the next draft.</pre>
                                        </div>
                                        <div class="rag-file-shine"></div>
                                    </div>
                                    <div class="rag-file-card" data-index="2" data-type="schedule">
                                        <div class="rag-file-header">
                                            <svg class="rag-file-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                                <line x1="3" y1="10" x2="21" y2="10"></line>
                                            </svg>
                                            <span class="rag-file-title">Exam_Schedule_Fall.pdf</span>
                                            <div class="rag-file-dots">
                                                <div class="rag-dot red"></div>
                                                <div class="rag-dot yellow"></div>
                                            </div>
                                        </div>
                                        <div class="rag-file-content">
                                            <div class="rag-file-border green"></div>
                                            <pre class="rag-file-text">Oct 15: Midterm Review
Oct 22: History Final
Nov 01: Project Due</pre>
                                        </div>
                                        <div class="rag-file-shine"></div>
                                    </div>
                                    <div class="rag-file-card" data-index="3" data-type="sheet">
                                        <div class="rag-file-header">
                                            <svg class="rag-file-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                <polyline points="14 2 14 8 20 8"></polyline>
                                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                                <line x1="10" y1="9" x2="8" y2="9"></line>
                                            </svg>
                                            <span class="rag-file-title">Study_Plan_2024.xlsx</span>
                                            <div class="rag-file-dots">
                                                <div class="rag-dot red"></div>
                                                <div class="rag-dot yellow"></div>
                                            </div>
                                        </div>
                                        <div class="rag-file-content">
                                            <div class="rag-file-border purple"></div>
                                            <pre class="rag-file-text">Mon | History | 2h
Tue | Math    | 1h
Wed | Physics | 3h</pre>
                                        </div>
                                        <div class="rag-file-shine"></div>
                                    </div>
                                    <div class="rag-file-shadow"></div>
                                </div>
                            </div>
                            <div class="rag-connection-line" id="ragLine"></div>
                            <div class="rag-brain" id="ragBrain">🧠</div>
                        </div>
                    </div>
                `
            }
        ];

        let currentCardIndex = 0;
        let deckInitialized = false;

        function getCardColor(index) {
            const colors = ['#60a5fa', '#a78bfa', '#22d3ee', '#38bdf8', '#fb923c', '#f472b6'];
            return colors[index];
        }

        function createDeck() {
            const cardStack = document.getElementById('cardStack');
            const progressIndicator = document.getElementById('progressIndicator');
            
            if (!cardStack) return;

            cards.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = `card card-${index} stacked`;
                cardEl.innerHTML = `
                    <div class="card-icon">${card.icon}</div>
                    <div class="card-name">${card.name}</div>
                    <div class="card-tagline">${card.tagline}</div>
                `;
                cardStack.appendChild(cardEl);
            });

            // Create progress dots
            if (progressIndicator) {
                cards.forEach(() => {
                    const dot = document.createElement('div');
                    dot.className = 'progress-dot';
                    progressIndicator.appendChild(dot);
                });
            }
        }

        function showCard(index) {
            if (index >= cards.length || index < 0) return;

            const card = cards[index];
            const cardElements = document.querySelectorAll('.card');
            const detailPanel = document.getElementById('detailPanel');
            const detailContent = document.getElementById('detailContent');
            const progressDots = document.querySelectorAll('.progress-dot');
            const clickHint = document.getElementById('clickHint');

            if (!detailPanel || !detailContent) return;

            // Hide click hint
            if (clickHint) clickHint.classList.add('hidden');

            // Hide previous cards (don't show them at all)
            for (let i = 0; i < index; i++) {
                if (cardElements[i]) {
                    cardElements[i].style.display = 'none';
                }
            }

            // Activate current card
            if (cardElements[index]) {
                cardElements[index].style.display = 'block';
                cardElements[index].classList.remove('stacked', 'played');
                cardElements[index].classList.add('active');
            }

            // Update remaining stack (show them)
            for (let i = index + 1; i < cards.length; i++) {
                if (cardElements[i]) {
                    cardElements[i].style.display = 'block';
                    cardElements[i].classList.remove('active', 'played');
                    cardElements[i].classList.add('stacked');
                }
            }

            // Show detail panel
            detailPanel.classList.add('visible');
            
            // Before setting content, handle rag-file-stack-3d based on card type
            const existingFixedRagStack = document.querySelector('.rag-file-stack-3d.fixed-position');
            
            if (index !== 5) {
                // For non-RAG cards, remove fixed-position rag-file-stack-3d
                // It should only exist in RAG card (index 5) and page 5
                if (existingFixedRagStack) {
                    // Check if we're on page 5 - if so, keep it
                    // currentPage is 0-based, so page 5 is currentPage === 4
                    if (typeof currentPage !== 'undefined' && currentPage === 4) {
                        // On page 5, keep the fixed rag-file-stack-3d
                        // Do nothing
                    } else {
                        // Not on page 5, so remove the fixed rag-file-stack-3d
                        existingFixedRagStack.remove();
                    }
                }
            }
            
            detailContent.innerHTML = `
                <p style="font-size: 1.1rem; opacity: 0.9; margin-bottom: 2rem; color: white;">${card.description}</p>
                
                <div class="demo-area">
                    ${card.demoHTML}
                </div>
                
                <div class="detail-section">
                    <div class="section-title">Key Capabilities:</div>
                    <ul>
                        ${card.features.map(f => `<li>${f}</li>`).join('')}
                    </ul>
                </div>
            `;
            
            // After setting content, if this is RAG card and we preserved the fixed rag-file-stack-3d, remove the duplicate from demo area
            if (index === 5 && existingFixedRagStack) {
                const newRagStack = document.getElementById('ragFileStack3D');
                if (newRagStack && newRagStack !== existingFixedRagStack && !newRagStack.classList.contains('fixed-position')) {
                    // Remove the duplicate from demo area
                    newRagStack.remove();
                    // Update the ID of the fixed one so it can be found by getElementById
                    existingFixedRagStack.id = 'ragFileStack3D';
                }
            }

            // Initialize demo animations
            if (index === 0) {
                setTimeout(() => {
                    initLLMDemo();
                }, 1000);
            } else if (index === 1) {
                setTimeout(() => {
                    initMultimodalDemo();
                }, 300);
            } else if (index === 2) {
                setTimeout(() => {
                    initAgentDemo();
                }, 300);
            } else if (index === 3) {
                setTimeout(() => {
                    initSkillsDemo();
                }, 300);
            } else if (index === 4) {
                setTimeout(() => {
                    initFinetuneDemo();
                }, 300);
            } else if (index === 5) {
                // Move rag-file-stack-3d outside page 4 to keep it fixed during page transition
                setTimeout(() => {
                    // First, check if there's already a fixed-position rag-file-stack-3d in body
                    // (this can happen if coming back from page 5)
                    const existingFixed = document.querySelector('.rag-file-stack-3d.fixed-position');
                    if (existingFixed) {
                        // Don't update position - it should stay fixed where it was set
                        // Only remove duplicates
                        const allRagStacks = document.querySelectorAll('.rag-file-stack-3d');
                        allRagStacks.forEach(stack => {
                            if (stack !== existingFixed && !stack.classList.contains('fixed-position')) {
                                stack.remove();
                            }
                        });
                    } else {
                        // No fixed one exists, move the one from demo area
                        const ragFileStack = document.getElementById('ragFileStack3D');
                        if (ragFileStack && !ragFileStack.classList.contains('fixed-position')) {
                            // Calculate its position relative to viewport
                            const ragLeft = ragFileStack.closest('.rag-left');
                            if (ragLeft) {
                                const rect = ragLeft.getBoundingClientRect();
                                // Store original parent for later restoration
                                ragFileStack.dataset.originalParent = 'rag-left';
                                // Move to body to keep it fixed
                                document.body.appendChild(ragFileStack);
                                ragFileStack.classList.add('fixed-position');
                                // Set position based on current viewport position
                                // This position should remain fixed and not be updated continuously
                                ragFileStack.style.left = `${rect.left}px`;
                                ragFileStack.style.top = `${rect.top}px`;
                                // Preserve 3D transform
                                ragFileStack.style.transform = `rotateY(-30deg) rotateX(10deg) translateX(10px)`;
                            }
                        }
                    }
                    initRAGDemo();
                }, 300);
            } else {
                // For other cards, move rag-file-stack-3d back if it was moved
                const ragFileStack = document.getElementById('ragFileStack3D');
                if (ragFileStack && ragFileStack.classList.contains('fixed-position')) {
                    // Check if there are multiple rag-file-stack-3d elements
                    const allRagStacks = document.querySelectorAll('.rag-file-stack-3d');
                    // Remove any duplicates
                    allRagStacks.forEach(stack => {
                        if (stack !== ragFileStack) {
                            stack.remove();
                        }
                    });
                    
                    // Move it back to its original position in rag-left
                    const ragLeft = document.querySelector('.rag-left');
                    if (ragLeft) {
                        ragFileStack.classList.remove('fixed-position');
                        ragLeft.appendChild(ragFileStack);
                        ragFileStack.style.left = '';
                        ragFileStack.style.top = '';
                        ragFileStack.style.transform = '';
                    }
                } else {
                    // Also check for any fixed-position rag-file-stack-3d that might be orphaned
                    const fixedRagStack = document.querySelector('.rag-file-stack-3d.fixed-position');
                    if (fixedRagStack) {
                        fixedRagStack.remove();
                    }
                }
            }

            // Update progress
            progressDots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });

            // Update current card index to the selected one
            currentCardIndex = index + 1;
        }

        // Initialize deck when page 4 is visible
        function checkPage4() {
            if (currentPage === 3 && !deckInitialized) {
                createDeck();
                deckInitialized = true;
                
                // Setup click handler
                const deckContainer = document.getElementById('deckContainer');
                const page4Content = document.querySelector('.page4-content');
                const progressDots = document.querySelectorAll('.progress-dot');
                
                if (deckContainer && page4Content) {
                    // Hide click hint immediately (no need for click to start)
                    const clickHint = document.getElementById('clickHint');
                    if (clickHint) clickHint.classList.add('hidden');
                    
                    // Directly show first card
                    // Only show expand animation if entering from previous page
                    if (isEnteringFromPreviousPage) {
                        // Show centered deck first, then expand with animation
                        deckContainer.classList.add('centered');
                        // Force a reflow to ensure centered class is applied
                        void deckContainer.offsetHeight;
                        setTimeout(() => {
                            deckContainer.style.transition = 'all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                            deckContainer.classList.remove('centered');
                            page4Content.classList.add('deck-moved');
                            showCard(0);
                            // Remove transition after animation completes
                            setTimeout(() => {
                                deckContainer.style.transition = '';
                            }, 600);
                        }, 100);
                    } else {
                        // Directly show first card without animation
                        page4Content.classList.add('deck-moved');
                        showCard(0);
                    }
                    
                    // Reset flag after initialization
                    isEnteringFromPreviousPage = false;
                    
                    // Setup click handler for subsequent cards
                    deckContainer.addEventListener('click', () => {
                        // Show next card
                        if (currentCardIndex < cards.length) {
                            showCard(currentCardIndex);
                        }
                    });

                    // Add click handlers to progress dots
                    progressDots.forEach((dot, index) => {
                        dot.addEventListener('click', (e) => {
                            e.stopPropagation();
                            // Show the selected card
                            showCard(index);
                        });
                    });
                }
            }
        }

        // LLM Demo Animation
        function initLLMDemo() {
            const inputBox = document.getElementById('llmInputBox');
            const typingText = document.getElementById('llmTypingText');
            const sendBtn = document.getElementById('llmSendBtn');
            const thinkingSection = document.getElementById('llmThinkingSection');
            const chatContainer = document.getElementById('llmChatContainer');
            const userBubble = document.getElementById('llmUserBubble');
            const aiBubble = document.getElementById('llmAiBubble');
            const aiResponse = document.getElementById('llmAiResponse');

            if (!inputBox || !typingText) return;

            // Reset states
            inputBox.classList.remove('hidden');
            if (thinkingSection) {
                thinkingSection.classList.remove('show', 'hide');
                thinkingSection.style.opacity = '0';
            }
            if (chatContainer) {
                chatContainer.classList.remove('show');
                chatContainer.style.opacity = '0';
            }
            if (userBubble) {
                userBubble.classList.remove('show');
                userBubble.style.opacity = '0';
            }
            if (aiBubble) {
                aiBubble.classList.remove('show', 'typing', 'typing-complete');
                aiBubble.style.opacity = '0';
            }
            if (typingText) typingText.textContent = '';
            if (typingText) typingText.classList.remove('has-text');
            if (sendBtn) sendBtn.classList.remove('active');
            if (aiResponse) aiResponse.textContent = '';

            const query = "What is AI?";
            let charIndex = 0;

            // Step 1: Type in input box
            function typeInput() {
                if (charIndex < query.length) {
                    typingText.textContent = query.substring(0, charIndex + 1);
                    if (charIndex > 0) {
                        typingText.classList.add('has-text');
                        if (sendBtn) sendBtn.classList.add('active');
                    }
                    charIndex++;
                    setTimeout(typeInput, 100);
                } else {
                    if (sendBtn) sendBtn.classList.add('active');
                    // Step 2: Send button click animation
                    setTimeout(() => {
                        if (sendBtn) {
                            sendBtn.style.transform = 'scale(0.9)';
                            setTimeout(() => {
                                sendBtn.style.transform = 'scale(1)';
                            }, 100);
                        }
                        // Step 3: Hide input box
                        setTimeout(() => {
                            inputBox.classList.add('hidden');
                            
                            // Step 4: Show thinking section
                            setTimeout(() => {
                                if (thinkingSection) {
                                    thinkingSection.classList.add('show');
                                    
                                    // Show process steps one by one
                                    const steps = thinkingSection.querySelectorAll('.process-step');
                                    steps.forEach((step, i) => {
                                        setTimeout(() => {
                                            step.classList.add('show');
                                        }, i * 400);
                                    });
                                    
                                    // Step 5: Hide thinking section after process
                                    setTimeout(() => {
                                        if (thinkingSection) {
                                            thinkingSection.classList.add('hide');
                                        }
                                        
                                        // Step 6: Show chat container and user bubble
                                        setTimeout(() => {
                                            if (chatContainer) {
                                                chatContainer.classList.add('show');
                                            }
                                            if (userBubble) {
                                                setTimeout(() => {
                                                    userBubble.classList.add('show');
                                                }, 200);
                                            }
                                            
                                            // Step 7: Show AI response with typing effect
                                            setTimeout(() => {
                                                if (aiBubble && aiResponse) {
                                                    aiBubble.classList.add('show', 'typing');
                                                    const response = "AI (Artificial Intelligence) refers to computer systems that can perform tasks typically requiring human intelligence.";
                                                    let responseIndex = 0;
                                                    
                                                    function typeResponse() {
                                                        if (responseIndex < response.length) {
                                                            aiResponse.textContent = response.substring(0, responseIndex + 1);
                                                            responseIndex++;
                                                            setTimeout(typeResponse, 30);
                                                        } else {
                                                            aiBubble.classList.remove('typing');
                                                            aiBubble.classList.add('typing-complete');
                                                        }
                                                    }
                                                    
                                                    typeResponse();
                                                }
                                            }, 500);
                                        }, 500);
                                    }, 3000);
                                }
                            }, 300);
                        }, 200);
                    }, 500);
                }
            }

            typeInput();
        }

        // Multimodal Demo Animation
        // Initialize page 6 demo animation
        let page6DemoInitialized = false;
        function initPage6Demo() {
            const inputBox = document.getElementById('page6InputBox');
            const typingText = document.getElementById('page6TypingText');
            const sendBtn = document.getElementById('page6SendBtn');
            const rectangleBox = document.getElementById('page6RectangleBox');
            const systemBox = document.getElementById('page6SystemBox');
            const pulseLine = document.getElementById('page6PulseLine');
            const loading = document.getElementById('page6Loading');
            const responseBox = document.getElementById('page6ResponseBox');

            if (!inputBox || !typingText) return;

            // Reset all states - clear inline styles first
            inputBox.classList.remove('hidden');
            if (rectangleBox) {
                rectangleBox.classList.remove('show');
                rectangleBox.style.opacity = '';
                rectangleBox.style.left = '';
                rectangleBox.style.transform = '';
            }
            if (systemBox) {
                systemBox.classList.remove('show');
                systemBox.style.opacity = '';
                systemBox.style.left = '';
                systemBox.style.transform = '';
            }
            if (pulseLine) {
                pulseLine.classList.remove('active');
                pulseLine.style.height = '';
                pulseLine.style.opacity = '';
            }
            if (loading) {
                loading.classList.remove('show', 'hide');
                loading.style.opacity = '';
            }
            if (responseBox) {
                responseBox.classList.remove('show');
                responseBox.style.opacity = '';
            }
            if (typingText) typingText.textContent = '';
            if (sendBtn) {
                sendBtn.classList.remove('active');
                sendBtn.style.transform = '';
            }
            // Remove userBubble references since we're not using it anymore
            const userBubble = document.getElementById('page6UserBubble');
            if (userBubble) {
                userBubble.style.display = 'none';
            }
            
            // Force reflow to ensure styles are reset
            void inputBox.offsetHeight;

            const query = "When is the office hour?";
            let charIndex = 0;

            // Step 1: Type in input box
            function typeInput() {
                if (charIndex < query.length) {
                    typingText.textContent = query.substring(0, charIndex + 1);
                    if (charIndex > 0) {
                        if (sendBtn) sendBtn.classList.add('active');
                    }
                    charIndex++;
                    setTimeout(typeInput, 100);
                } else {
                    if (sendBtn) sendBtn.classList.add('active');
                    // Step 2: Send button click animation
                    setTimeout(() => {
                        if (sendBtn) {
                            sendBtn.style.transform = 'scale(0.9)';
                            setTimeout(() => {
                                sendBtn.style.transform = 'scale(1)';
                            }, 100);
                        }
                        // Step 3: Hide input box immediately (no animation) and show rectangle box directly
                        setTimeout(() => {
                            inputBox.style.transition = 'none';
                            inputBox.style.display = 'none';
                            inputBox.classList.add('hidden');
                            
                            // Step 4: Show rectangle box (user query) directly at center-top
                            setTimeout(() => {
                                if (rectangleBox) {
                                    rectangleBox.style.left = '50%';
                                    rectangleBox.style.transform = 'translateX(-50%)';
                                    rectangleBox.style.opacity = '';
                                    rectangleBox.classList.add('show');
                                    // Force reflow
                                    void rectangleBox.offsetHeight;
                                }
                                
                                // Step 5: Show system prompt box after a delay
                                setTimeout(() => {
                                    if (systemBox) {
                                        systemBox.style.left = '50%';
                                        systemBox.style.transform = 'translateX(-50%)';
                                        systemBox.style.opacity = '';
                                        systemBox.classList.add('show');
                                        // Force reflow
                                        void systemBox.offsetHeight;
                                    }
                                    
                                    // Step 6: Skip pulse line and loading, show response directly
                                    setTimeout(() => {
                                        if (responseBox) {
                                            responseBox.style.opacity = '';
                                            responseBox.classList.add('show');
                                            // Force reflow
                                            void responseBox.offsetHeight;
                                        }
                                        
                                        // Step 7: Response box stays at bottom, user query box stays at top
                                        // No additional action needed - both boxes remain visible in their positions
                                    }, 800);
                                }, 500);
                            }, 300);
                        }, 200);
                    }, 500);
                }
            }

            // Start typing after a short delay
            setTimeout(() => {
                typeInput();
            }, 500);
        }

        // Check page 6 and initialize demo
        function checkPage6() {
            if (currentPage === 5 && !page6DemoInitialized) {
                page6DemoInitialized = true;
                initPage6Demo();
            } else if (currentPage !== 5) {
                page6DemoInitialized = false;
            }
        }
        
        // Check page 7 and initialize demo
        let page7AnimationInitialized = false;
        let page7AnimationInterval = null;
        let deterministicDemoInitialized = false;
        let deterministicImpactInitialized = false;
        let hallucinationDemoInitialized = false;
        let dataPipelineInitialized = false;
        
        function checkPage7() {
            if (currentPage === 6) {
                // Update pulse line width from syllabus to chunks wrapper
                setTimeout(() => {
                    const syllabusIcon = document.getElementById('page7SyllabusIcon');
                    const chunksWrapper = document.getElementById('page7ChunksWrapper');
                    const pulseLine = document.getElementById('page7PulseLine');
                    
                    if (syllabusIcon && chunksWrapper && pulseLine) {
                        const iconRect = syllabusIcon.getBoundingClientRect();
                        const wrapperRect = chunksWrapper.getBoundingClientRect();
                        const containerRect = syllabusIcon.parentElement.getBoundingClientRect();
                        
                        // Calculate start and end positions
                        const startX = ((iconRect.left + iconRect.width) - containerRect.left) / containerRect.width * 100;
                        const endX = (wrapperRect.left - containerRect.left) / containerRect.width * 100;
                        
                        // Set pulse line position and width
                        pulseLine.style.left = `${startX}%`;
                        pulseLine.style.width = `${endX - startX}%`;
                        pulseLine.classList.add('active');
                    }
                }, 100);
                
                // Initialize animation if not already initialized
                if (!page7AnimationInitialized) {
                    page7AnimationInitialized = true;
                    initPage7Animation();
                }
            } else {
                // Reset pulse line when not on page 7
                const pulseLine = document.getElementById('page7PulseLine');
                if (pulseLine) {
                    pulseLine.classList.remove('active');
                    pulseLine.style.width = '0';
                }
                
                // Stop animation
                if (page7AnimationInterval) {
                    clearInterval(page7AnimationInterval);
                    page7AnimationInterval = null;
                }
                page7AnimationInitialized = false;
                resetPage7Animation();
            }
        }
        
        // Check page 13 (deterministic demo) and initialize demo
        function checkPage13() {
            if (currentPage === 13 && !deterministicDemoInitialized) {
                deterministicDemoInitialized = true;
                initDeterministicDemo();
            } else if (currentPage !== 13) {
                deterministicDemoInitialized = false;
            }
        }
        
        // Check page 14 (deterministic impact) and initialize animations
        function checkPage14() {
            if (currentPage === 14 && !deterministicImpactInitialized) {
                deterministicImpactInitialized = true;
                // Animations are handled by CSS, no JavaScript needed
            } else if (currentPage !== 14) {
                deterministicImpactInitialized = false;
            }
        }
        
        // Check page 15 (hallucination demo) and initialize demo
        function checkPage15() {
            if (currentPage === 15 && !hallucinationDemoInitialized) {
                hallucinationDemoInitialized = true;
                initHallucinationDemo();
            } else if (currentPage !== 15) {
                hallucinationDemoInitialized = false;
            }
        }
        
        // Check page 17 (data pipeline) and initialize animations
        function checkPage17() {
            if (currentPage === 17 && !dataPipelineInitialized) {
                dataPipelineInitialized = true;
                initDataPipeline();
            } else if (currentPage !== 17) {
                dataPipelineInitialized = false;
            }
        }
        
        function initDataPipeline() {
            // Reset states
            const steps = document.querySelectorAll('#page-data-pipeline .pipeline-step');
            const arrows = document.querySelectorAll('#page-data-pipeline .pipeline-arrow');
            const risks = document.querySelectorAll('#page-data-pipeline .pipeline-risk');
            const riskContents = document.querySelectorAll('#page-data-pipeline .pipeline-risk-content');
            
            steps.forEach(step => step.classList.remove('show'));
            arrows.forEach(arrow => arrow.classList.remove('show'));
            risks.forEach(risk => risk.classList.remove('show'));
            riskContents.forEach(content => content.classList.remove('show'));
            
            // 1-3秒：研究流程图从左到右依次出现（每个环节间隔0.3秒）
            setTimeout(() => {
                steps[0].classList.add('show');
                arrows[0].classList.add('show');
            }, 1000);
            
            setTimeout(() => {
                steps[1].classList.add('show');
                arrows[1].classList.add('show');
            }, 1300);
            
            setTimeout(() => {
                steps[2].classList.add('show');
                arrows[2].classList.add('show');
            }, 1600);
            
            setTimeout(() => {
                steps[3].classList.add('show');
                arrows[3].classList.add('show');
            }, 1900);
            
            setTimeout(() => {
                steps[4].classList.add('show');
            }, 2200);
            
            // 3-6秒：每个环节下方的⚠️和风险点依次弹出
            setTimeout(() => {
                risks[0].classList.add('show');
            }, 3200);
            
            setTimeout(() => {
                risks[1].classList.add('show');
            }, 3800);
            
            setTimeout(() => {
                risks[2].classList.add('show');
            }, 4400);
            
            setTimeout(() => {
                risks[3].classList.add('show');
            }, 5000);
            
            setTimeout(() => {
                risks[4].classList.add('show');
            }, 5600);
            
            // 6-8秒：风险说明文字淡入（每个间隔0.2秒）
            setTimeout(() => {
                riskContents[0].classList.add('show');
            }, 6000);
            
            setTimeout(() => {
                riskContents[1].classList.add('show');
            }, 6200);
            
            setTimeout(() => {
                riskContents[2].classList.add('show');
            }, 6400);
            
            setTimeout(() => {
                riskContents[3].classList.add('show');
            }, 6600);
            
            setTimeout(() => {
                riskContents[4].classList.add('show');
            }, 6800);
        }
        
        function initHallucinationDemo() {
            const researcherText = document.getElementById('researcherText');
            const aiText = document.getElementById('aiText');
            const warning = document.getElementById('hallucinationWarning');
            const warningItem1 = document.getElementById('warningItem1');
            const warningItem2 = document.getElementById('warningItem2');
            const warningItem3 = document.getElementById('warningItem3');
            
            if (!researcherText || !aiText || !warning) return;
            
            // Reset states
            researcherText.textContent = '';
            aiText.textContent = '';
            warning.classList.remove('show');
            warningItem1.classList.remove('show');
            warningItem2.classList.remove('show');
            warningItem3.classList.remove('show');
            
            // Remove error marks from previous run
            const errorMarks = aiText.querySelectorAll('.error-mark');
            errorMarks.forEach(mark => {
                const parent = mark.parentNode;
                parent.replaceChild(document.createTextNode(mark.textContent), mark);
                parent.normalize();
            });
            
            // 2-5秒：问题文字打字机效果（从2秒开始，持续3秒）
            setTimeout(() => {
                const researcherMessage = "Can you analyze the emotional patterns in this student's journal entries based on attachment theory?";
                typeText(researcherText, researcherMessage, 3000);
            }, 2000);
            
            // 6-12秒：AI回答打字机效果（从6秒开始，持续6秒）
            setTimeout(() => {
                const aiMessage = `Based on the journal entries, I can identify patterns consistent with Bowlby's 1989 framework on digital attachment behaviors. The student shows signs of anxious-avoidant attachment, particularly in entries from March 15th when discussing their relationship with peers...`;
                typeText(aiText, aiMessage, 6000);
            }, 6000);
            
            // 13-14秒：警告框弹出（13秒时弹出）
            setTimeout(() => {
                warning.classList.add('show');
                
                // 14-18秒：三个错误依次显示（每个间隔1秒）
                setTimeout(() => {
                    warningItem1.classList.add('show');
                }, 1000); // 14秒
                
                setTimeout(() => {
                    warningItem2.classList.add('show');
                }, 2000); // 15秒
                
                setTimeout(() => {
                    warningItem3.classList.add('show');
                }, 3000); // 16秒
            }, 13000);
            
            // 18秒+：标记AI回答中的错误部分
            setTimeout(() => {
                markErrors(aiText);
            }, 18000);
        }
        
        function markErrors(element) {
            if (!element) return;
            const text = element.textContent;
            
            // 标记错误词
            const errors = [
                { word: '1989', replacement: '<span class="error-mark">1989</span>' },
                { word: 'digital attachment behaviors', replacement: '<span class="error-mark">digital attachment behaviors</span>' },
                { word: 'March 15th', replacement: '<span class="error-mark">March 15th</span>' },
                { word: 'anxious-avoidant', replacement: '<span class="error-mark">anxious-avoidant</span>' }
            ];
            
            let markedText = text;
            // 按长度降序排序，先匹配长词
            errors.sort((a, b) => b.word.length - a.word.length);
            
            errors.forEach(({ word, replacement }) => {
                const regex = new RegExp(`(${word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
                markedText = markedText.replace(regex, replacement);
            });
            
            element.innerHTML = markedText;
        }
        
        function initDeterministicDemo() {
            const inputBox = document.getElementById('deterministicInputBox');
            const inputText = document.getElementById('deterministicInputText');
            const arrow = document.getElementById('deterministicArrow');
            const output1 = document.getElementById('deterministicOutput1');
            const output1Text = document.getElementById('deterministicOutput1Text');
            const output2 = document.getElementById('deterministicOutput2');
            const output2Text = document.getElementById('deterministicOutput2Text');
            
            if (!inputBox || !inputText) return;
            
            // Reset all states
            inputBox.classList.remove('visible');
            inputText.textContent = '';
            if (arrow) arrow.classList.remove('visible');
            if (output1) {
                output1.classList.remove('visible');
                output1Text.textContent = '';
            }
            if (output2) {
                output2.classList.remove('visible');
                output2Text.textContent = '';
            }
            
            // 0-2秒：标题淡入（已在CSS中处理）
            
            // 2-4秒：输入框出现，文字打字机效果
            setTimeout(() => {
                inputBox.classList.add('visible');
                const inputMessage = "Analyze this student's emotional state from their journal entry";
                typeText(inputText, inputMessage, 2000);
            }, 2000);
            
            // 4-5秒：输入框分叉成两条路径（带箭头动画）
            setTimeout(() => {
                if (arrow) arrow.classList.add('visible');
            }, 4000);
            
            // 5-8秒：左侧Output 1打字机出现
            setTimeout(() => {
                if (output1) {
                    output1.classList.add('visible');
                    const output1Message = "The student appears anxious about upcoming exams and shows signs of academic stress...";
                    typeText(output1Text, output1Message, 3000, () => {
                        // 高亮差异部分
                        highlightDifferences(output1Text, output1Message, 'red');
                    });
                }
            }, 5000);
            
            // 8-11秒：右侧Output 2打字机出现
            setTimeout(() => {
                if (output2) {
                    output2.classList.add('visible');
                    const output2Message = "The student shows signs of mild stress but remains generally optimistic about their progress...";
                    typeText(output2Text, output2Message, 3000, () => {
                        // 高亮差异部分
                        highlightDifferences(output2Text, output2Message, 'yellow');
                    });
                }
            }, 8000);
        }
        
        function typeText(element, text, duration, callback) {
            if (!element) return;
            element.textContent = '';
            const chars = text.split('');
            const delay = duration / chars.length;
            let index = 0;
            
            function typeChar() {
                if (index < chars.length) {
                    element.textContent += chars[index];
                    index++;
                    setTimeout(typeChar, delay);
                } else if (callback) {
                    callback();
                }
            }
            
            typeChar();
        }
        
        function highlightDifferences(element, text, color) {
            if (!element) return;
            const originalText = element.textContent;
            
            // 定义需要高亮的词（按长度排序，先匹配长词）
            const highlights = [
                { word: 'mild stress', class: 'highlight-diff yellow' },
                { word: 'anxious', class: 'highlight-diff' },
                { word: 'optimistic', class: 'highlight-diff yellow' },
                { word: 'stress', class: 'highlight-diff' }
            ];
            
            let highlightedText = originalText;
            // 按长度降序排序，先匹配长词避免短词被错误匹配
            highlights.sort((a, b) => b.word.length - a.word.length);
            
            highlights.forEach(({ word, class: highlightClass }) => {
                // 使用单词边界确保完整匹配
                const regex = new RegExp(`\\b(${word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})\\b`, 'gi');
                highlightedText = highlightedText.replace(regex, `<span class="${highlightClass}">$1</span>`);
            });
            
            element.innerHTML = highlightedText;
        }
        
        function initPage7Animation() {
            const userBlock = document.getElementById('page7UserBlock');
            const userContent = document.getElementById('page7UserContent');
            const chunk2 = document.getElementById('page7Chunk2');
            const promptBlock = document.getElementById('page7PromptBlock');
            const responseBlock = document.getElementById('page7ResponseBlock');
            
            if (!userBlock || !userContent || !chunk2 || !promptBlock || !responseBlock) return;
            
            // Start animation loop
            function runAnimation() {
                // Step 1: Wait 2s after entering page 7, then show user block
                setTimeout(() => {
                    userBlock.classList.add('show');
                    
                    // Step 2: Keep user block for 2s, then highlight "office hour"
                    setTimeout(() => {
                        const text = userContent.textContent;
                        userContent.innerHTML = text.replace(/(office hour)/gi, '<span class="highlight">$1</span>');
                        
                        // Step 3: Wait 1s, then highlight chunk2
                        setTimeout(() => {
                            chunk2.classList.add('highlight');
                            
                            // Step 4: Wait 1s, then show prompt block
                            setTimeout(() => {
                                promptBlock.classList.add('show');
                                
                                // Step 5: Wait 2s, then show response block
                                setTimeout(() => {
                                    responseBlock.classList.add('show');
                                    
                                    // Step 6: Maintain for 4s, then reset and loop
                                    setTimeout(() => {
                                        resetPage7Animation();
                                        
                                        // Step 7: Loop animation
                                        runAnimation();
                                    }, 4000);
                                }, 2000);
                            }, 1000);
                        }, 1000);
                    }, 2000);
                }, 2000);
            }
            
            // Start first animation
            runAnimation();
        }
        
        function resetPage7Animation() {
            const userBlock = document.getElementById('page7UserBlock');
            const userContent = document.getElementById('page7UserContent');
            const chunk2 = document.getElementById('page7Chunk2');
            const promptBlock = document.getElementById('page7PromptBlock');
            const responseBlock = document.getElementById('page7ResponseBlock');
            
            if (userBlock) userBlock.classList.remove('show');
            if (userContent) userContent.textContent = 'When is the office hour?';
            if (chunk2) chunk2.classList.remove('highlight');
            if (promptBlock) promptBlock.classList.remove('show');
            if (responseBlock) responseBlock.classList.remove('show');
        }

        function initMultimodalDemo() {
            const container = document.getElementById('multimodalDemo');
            const box1 = document.getElementById('mediaBox1');
            const box2 = document.getElementById('mediaBox2');
            const box3 = document.getElementById('mediaBox3');
            const brain = document.getElementById('multimodalBrain');
            const line1 = document.getElementById('line1');
            const line2 = document.getElementById('line2');
            const line3 = document.getElementById('line3');
            const line4 = document.getElementById('line4');
            const output = document.getElementById('multimodalOutput');

            if (!container || !box1 || !box2 || !box3 || !brain) return;

            // Reset states - all boxes start at center
            [box1, box2, box3].forEach(box => {
                box.style.left = '50%';
                box.style.top = '50%';
                box.style.transform = 'translate(-50%, -50%) scale(0)';
                box.style.opacity = '0';
                box.style.transition = 'all 0.8s ease';
                box.classList.remove('show', 'bounce-in');
            });

            brain.style.transform = 'translate(-50%, -50%) scale(0)';
            brain.style.opacity = '0';
            brain.classList.remove('show', 'pulse');

            [line1, line2, line3, line4].forEach(line => {
                if (line) {
                    line.style.width = '0';
                    line.style.opacity = '0';
                    line.classList.remove('active');
                }
            });

            if (output) {
                output.textContent = '';
                output.classList.remove('show', 'typing');
                output.style.opacity = '0';
            }

            // Get container dimensions for positioning
            const containerRect = container.getBoundingClientRect();
            const centerX = containerRect.width / 2;
            const centerY = containerRect.height / 2;
            const leftX = 20;
            const brainX = centerX;
            const brainY = centerY;
            const rightX = containerRect.width - 20;

            // Calculate positions for boxes on left (vertical stack)
            const boxHeight = 80 * 0.7; // scaled size
            const boxGap = 16;
            const totalHeight = boxHeight * 3 + boxGap * 2;
            const startY = centerY - totalHeight / 2 + boxHeight / 2;

            // Step 1: Box 1 bounce in from center
            setTimeout(() => {
                box1.classList.add('show', 'bounce-in');
            }, 300);

            // Step 2: Box 1 move to left, Box 2 bounce in
            setTimeout(() => {
                box1.classList.remove('bounce-in');
                box1.style.left = leftX + 'px';
                box1.style.top = startY + 'px';
                box1.style.transform = 'translateY(-50%) scale(0.7)';
                box1.style.opacity = '1';

                box2.classList.add('show', 'bounce-in');
            }, 900);

            // Step 3: Box 2 move to left, Box 3 bounce in
            setTimeout(() => {
                box2.classList.remove('bounce-in');
                box2.style.left = leftX + 'px';
                box2.style.top = (startY + boxHeight + boxGap) + 'px';
                box2.style.transform = 'translateY(-50%) scale(0.7)';
                box2.style.opacity = '1';

                box3.classList.add('show', 'bounce-in');
            }, 1500);

            // Step 4: Box 3 move to left, Brain bounce in
            setTimeout(() => {
                box3.classList.remove('bounce-in');
                box3.style.left = leftX + 'px';
                box3.style.top = (startY + (boxHeight + boxGap) * 2) + 'px';
                box3.style.transform = 'translateY(-50%) scale(0.7)';
                box3.style.opacity = '1';

                brain.classList.add('show');
                brain.style.opacity = '1';
            }, 2100);

            // Step 5: Brain starts pulsing, lines appear
            setTimeout(() => {
                brain.classList.add('pulse');

                // Calculate line positions and lengths
                const box1Y = startY;
                const box2Y = startY + boxHeight + boxGap;
                const box3Y = startY + (boxHeight + boxGap) * 2;
                const boxLeft = leftX + 80 * 0.7; // box width * scale
                const lineStartOffset = 20; // Start line 20px away from box
                const brainRadius = 30; // Approximate brain radius to stop line before it

                // Line 1: from box1 to brain (shorter - stops before brain)
                const dx1 = brainX - (boxLeft + lineStartOffset);
                const dy1 = brainY - box1Y;
                const length1 = Math.sqrt(dx1 * dx1 + dy1 * dy1) - brainRadius;
                const angle1 = Math.atan2(dy1, dx1) * 180 / Math.PI;

                if (line1) {
                    line1.style.left = (boxLeft + lineStartOffset) + 'px';
                    line1.style.top = box1Y + 'px';
                    line1.style.width = length1 + 'px';
                    line1.style.setProperty('--line-width', length1 + 'px');
                    line1.style.transform = `rotate(${angle1}deg)`;
                    line1.style.transformOrigin = 'left center';
                    line1.classList.add('active');
                }

                // Line 2: from box2 to brain (shorter - stops before brain)
                const dx2 = brainX - (boxLeft + lineStartOffset);
                const dy2 = brainY - box2Y;
                const length2 = Math.sqrt(dx2 * dx2 + dy2 * dy2) - brainRadius;
                const angle2 = Math.atan2(dy2, dx2) * 180 / Math.PI;

                if (line2) {
                    line2.style.left = (boxLeft + lineStartOffset) + 'px';
                    line2.style.top = box2Y + 'px';
                    line2.style.width = length2 + 'px';
                    line2.style.setProperty('--line-width', length2 + 'px');
                    line2.style.transform = `rotate(${angle2}deg)`;
                    line2.style.transformOrigin = 'left center';
                    line2.classList.add('active');
                }

                // Line 3: from box3 to brain (shorter - stops before brain)
                const dx3 = brainX - (boxLeft + lineStartOffset);
                const dy3 = brainY - box3Y;
                const length3 = Math.sqrt(dx3 * dx3 + dy3 * dy3) - brainRadius;
                const angle3 = Math.atan2(dy3, dx3) * 180 / Math.PI;

                if (line3) {
                    line3.style.left = (boxLeft + lineStartOffset) + 'px';
                    line3.style.top = box3Y + 'px';
                    line3.style.width = length3 + 'px';
                    line3.style.setProperty('--line-width', length3 + 'px');
                    line3.style.transform = `rotate(${angle3}deg)`;
                    line3.style.transformOrigin = 'left center';
                    line3.classList.add('active');
                }

                // Line 4: from brain to output (shorter line - avoid overlap with text)
                const outputX = rightX - 20; // Output bubble position
                const brainRightEdge = brainX + brainRadius; // Start from brain's right edge
                const textBlockWidth = 200; // Approximate width of text block
                const length4 = Math.max((outputX - textBlockWidth - 40) - brainRightEdge, 60); // Stop well before text block, minimum 60px

                if (line4) {
                    line4.style.left = brainRightEdge + 'px';
                    line4.style.top = brainY + 'px';
                    line4.style.width = length4 + 'px';
                    line4.style.setProperty('--line-width', length4 + 'px');
                    line4.style.transform = 'rotate(0deg)';
                    line4.style.transformOrigin = 'left center';
                    line4.classList.add('active');
                }
            }, 2700);

            // Step 6: Output bubble appears without typing effect
            setTimeout(() => {
                if (output) {
                    output.classList.add('show');
                    output.textContent = "Unified understanding across images, audio, and video.";
                }
            }, 3500);
        }

        // RAG Demo Animation
        function initRAGDemo() {
            const fileStack = document.getElementById('ragFileStack3D');
            const fileCards = fileStack ? fileStack.querySelectorAll('.rag-file-card') : [];
            const line = document.getElementById('ragLine');
            const brain = document.getElementById('ragBrain');
            const container = document.getElementById('ragDemo');

            if (!fileStack || fileCards.length === 0 || !line || !brain || !container) return;

            // Reset states and start continuous animation
            fileCards.forEach((card, index) => {
                card.classList.remove('lifted', 'auto-lift');
                // Set CSS variables for transform (scaled down 50%)
                const zDistance = index * -20;
                const xOffset = index * 5;
                card.style.setProperty('--card-z', zDistance + 'px');
                card.style.setProperty('--card-x', xOffset + 'px');
                
                // Start continuous animation for all cards in sequence
                card.classList.add('auto-lift');
            });

            if (line) {
                line.style.width = '0';
                line.style.opacity = '0';
                line.classList.remove('active');
            }

            if (brain) {
                brain.style.opacity = '0';
            }

            // Get container dimensions
            const containerRect = container.getBoundingClientRect();
            const leftX = 128 + 75; // Right edge of file stack + 75px offset (shorten left side more)
            const rightX = containerRect.width - 120; // Left edge of brain - 60px offset (shorten right side more, brain moved left)
            const centerY = containerRect.height / 2;
            const lineLength = rightX - leftX;

            // Set line position and length (moved left)
            if (line) {
                line.style.left = leftX + 'px';
                line.style.top = centerY + 'px';
                line.style.setProperty('--rag-line-width', lineLength + 'px');
            }

            // Show line and brain after initial delay
            setTimeout(() => {
                if (line) {
                    line.classList.add('active');
                }
            }, 1000);

            setTimeout(() => {
                if (brain) {
                    brain.style.opacity = '1';
                }
            }, 1500);
        }

        // Agent Demo Animation
        function initAgentDemo() {
            const demo = document.getElementById('agentDemo');
            if (!demo) {
                console.log('Agent demo container not found');
                return;
            }

            const planItem1 = document.getElementById('planItem1');
            const planItem2 = document.getElementById('planItem2');
            const planItem3 = document.getElementById('planItem3');
            const planItem4 = document.getElementById('planItem4');
            const completeBox = document.getElementById('agentCompleteBox');

            if (!planItem1 || !planItem2 || !planItem3 || !planItem4 || !completeBox) {
                console.log('Some agent demo elements not found');
                return;
            }

            const planItems = [planItem1, planItem2, planItem3, planItem4];

            // Reset all highlights
            planItems.forEach(item => item.classList.remove('highlight'));
            completeBox.classList.remove('highlight');

            // Function to highlight plan items one by one
            function highlightPlanItems() {
                planItems.forEach((item, index) => {
                    // Each item: highlight 1s + pause 0.5s = 1.5s per item
                    // Start time: index * 1.5s
                    setTimeout(() => {
                        // Highlight
                        item.classList.add('highlight');
                        // Remove highlight after 1s
                        setTimeout(() => {
                            item.classList.remove('highlight');
                        }, 1000);
                    }, index * 1500); // 1.5s between each item start (1s highlight + 0.5s pause)
                });
            }

            // Function to highlight complete box
            function highlightComplete() {
                // Start after all 4 plan items: 4 * 1.5s = 6s
                setTimeout(() => {
                    completeBox.classList.add('highlight');
                    setTimeout(() => {
                        completeBox.classList.remove('highlight');
                    }, 1000);
                }, 6000);
            }

            // Start the cycle
            highlightPlanItems();
            highlightComplete();

            // Loop: Restart after complete cycle (4 plan items + complete = 7s + 0.5s pause = 7.5s)
            setTimeout(() => {
                initAgentDemo();
            }, 7500);
        }

        // Skills Demo Animation
        function initSkillsDemo() {
            const demo = document.getElementById('skillsDemo');
            if (!demo) {
                console.log('Skills demo container not found');
                return;
            }

            const skill1 = document.getElementById('skill1');
            const skill2 = document.getElementById('skill2');
            const skill3 = document.getElementById('skill3');
            const combinationArea = document.getElementById('combinationArea');

            if (!skill1 || !skill2 || !skill3 || !combinationArea) {
                console.log('Some skills demo elements not found');
                return;
            }

            // Only use skill1 (Data Analysis) and skill3 (Research)
            const skillsToCombine = [skill1, skill3];
            
            // Remove any existing clones
            const existingClones = demo.querySelectorAll('.skill-clone');
            existingClones.forEach(clone => clone.remove());

            // Reset all elements
            [skill1, skill2, skill3].forEach(skill => {
                skill.classList.remove('show', 'moving', 'in-combination', 'moving-fast', 'moving-slow');
                skill.style.position = 'relative';
                skill.style.left = 'auto';
                skill.style.top = 'auto';
                skill.style.opacity = '1';
                skill.style.transform = 'translateX(0)';
            });

            combinationArea.classList.remove('show', 'active');

            // Sequence 1: Skills are already visible
            [skill1, skill2, skill3].forEach(skill => {
                skill.classList.add('show');
            });

            // Sequence 2: Show combination area (0.5s)
            setTimeout(() => {
                combinationArea.classList.add('show');
            }, 500);

            // Sequence 3: Create clones and move to center (1.5s)
            skillsToCombine.forEach((skill, index) => {
                setTimeout(() => {
                    // Get fresh positions - ensure we get them at the right time
                    const containerRect = demo.getBoundingClientRect();
                    const skillRect = skill.getBoundingClientRect();
                    
                    // Calculate skill position relative to demo container
                    const skillX = skillRect.left - containerRect.left;
                    const skillY = skillRect.top - containerRect.top;

                    // Create clone
                    const clone = skill.cloneNode(true);
                    clone.classList.add('skill-clone', 'moving');
                    clone.style.position = 'absolute';
                    clone.style.width = '75px';
                    clone.style.height = '60px';
                    clone.style.opacity = '1';
                    clone.style.zIndex = '10';
                    
                    // Set initial position to match original skill exactly
                    clone.style.left = skillX + 'px';
                    clone.style.top = skillY + 'px';
                    
                    // Append to demo container
                    demo.appendChild(clone);

                    // Wait for DOM to update - use double requestAnimationFrame
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            // Get fresh positions after clone is rendered
                            const updatedContainerRect = demo.getBoundingClientRect();
                            const cloneRect = clone.getBoundingClientRect();
                            const comboRect = combinationArea.getBoundingClientRect();
                            
                            // Verify clone's actual position
                            const actualStartX = cloneRect.left - updatedContainerRect.left;
                            const actualStartY = cloneRect.top - updatedContainerRect.top;
                            
                            // Get combination area position
                            const comboX = comboRect.left - updatedContainerRect.left;
                            const comboY = comboRect.top - updatedContainerRect.top;
                            
                            // Target position inside combination area
                            // Width = comboRect.width (100px), Height = comboRect.height / 2 (50px)
                            // Position clones at the left edge of combination area, stacked vertically
                            const targetX = comboX;
                            const targetY = comboY + (comboRect.height / 2) * index;
                            
                            // Animate to center with same speed as custom skill (1.5s)
                            setTimeout(() => {
                                clone.style.transition = 'all 1.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
                                clone.style.left = targetX + 'px';
                                clone.style.top = targetY + 'px';
                                clone.style.width = comboRect.width + 'px';
                                clone.style.height = (comboRect.height / 2) + 'px';
                                clone.style.margin = '0';
                                clone.style.padding = '0.3rem';
                                clone.style.boxSizing = 'border-box';
                                
                                // Add in-combination class after animation completes
                                setTimeout(() => {
                                    clone.classList.add('in-combination');

                                    if (index === skillsToCombine.length - 1) {
                                        combinationArea.classList.add('active');
                                        
                                        // After both clones finish animation (1.5s), wait longer before creating custom skill
                                        setTimeout(() => {
                                            // Create custom skill block (but don't show it yet)
                                            const customSkill = document.createElement('div');
                                            customSkill.classList.add('custom-skill');
                                            customSkill.innerHTML = `
                                                <div class="custom-skill-icon">✨</div>
                                                <div class="custom-skill-label">Custom Skill</div>
                                            `;
                                            
                                            // Get combination area position
                                            const updatedComboRect = combinationArea.getBoundingClientRect();
                                            const updatedContainerRect = demo.getBoundingClientRect();
                                            
                                            // Position custom skill at combination area center
                                            const comboX = updatedComboRect.left - updatedContainerRect.left;
                                            const comboY = updatedComboRect.top - updatedContainerRect.top;
                                            
                                            customSkill.style.position = 'absolute';
                                            customSkill.style.left = comboX + 'px';
                                            customSkill.style.top = comboY + 'px';
                                            customSkill.style.width = updatedComboRect.width + 'px';
                                            customSkill.style.height = updatedComboRect.height + 'px';
                                            customSkill.style.opacity = '0';
                                            customSkill.style.transform = 'scale(0.8)';
                                            
                                            demo.appendChild(customSkill);
                                            
                                            // Wait longer before showing custom skill (let clones stay longer)
                                            setTimeout(() => {
                                                // Remove all clones when custom skill appears
                                                const allClones = demo.querySelectorAll('.skill-clone');
                                                allClones.forEach(clone => clone.remove());
                                                
                                                // Show custom skill
                                                customSkill.style.transition = 'all 0.5s ease';
                                                customSkill.style.opacity = '1';
                                                customSkill.style.transform = 'scale(1)';
                                                
                                                // Pause after appearing
                                                setTimeout(() => {
                                                    // Move to right (slower speed, longer distance)
                                                    const rightX = comboX + 250; // Longer distance (250px)
                                                    customSkill.style.transition = 'all 1.5s cubic-bezier(0.34, 1.56, 0.64, 1)'; // Slower speed
                                                    customSkill.style.left = rightX + 'px';
                                                    
                                                    // Reset and loop after custom skill moves out (longer stay)
                                                    setTimeout(() => {
                                                        customSkill.remove();
                                                        initSkillsDemo();
                                                    }, 2000); // Longer stay after moving
                                                }, 800); // Pause after appearing
                                            }, 800); // Wait longer before showing (clones stay visible during this time)
                                        }, 300);
                                    }
                                }, 400);
                            }, 50);
                        });
                    });
                }, 1500 + index * 800);
            });
        }

        // Fine-tuning Demo Animation
        function initFinetuneDemo() {
            const demo = document.getElementById('finetuneDemo');
            if (!demo) { console.log('Fine-tuning demo container not found'); return; }

            const question = document.getElementById('finetuneQuestion');
            const resultBefore = document.getElementById('resultBefore');
            const resultAfter = document.getElementById('resultAfter');
            const training = document.getElementById('finetuneTraining');
            const trainingProgressFill = document.getElementById('trainingProgressFill');
            const barFillBefore = document.getElementById('barFillBefore');
            const barFillAfter = document.getElementById('barFillAfter');
            const valueBefore = document.getElementById('valueBefore');
            const valueAfter = document.getElementById('valueAfter');

            if (!question || !resultBefore || !resultAfter || !training || !trainingProgressFill || !barFillBefore || !barFillAfter || !valueBefore || !valueAfter) {
                console.log('Some fine-tuning demo elements not found');
                return;
            }

            // Reset all elements
            question.classList.remove('show');
            resultBefore.classList.remove('show');
            resultAfter.classList.remove('show');
            training.classList.remove('show');
            trainingProgressFill.style.width = '0%';
            barFillBefore.style.height = '0%';
            barFillAfter.style.height = '0%';
            valueBefore.classList.remove('show');
            valueAfter.classList.remove('show');

            // Sequence 1: Show question (0.5s)
            setTimeout(() => {
                question.classList.add('show');
            }, 500);

            // Sequence 2: Show "Raw" result and animate bar (1s)
            setTimeout(() => {
                resultBefore.classList.add('show');
                setTimeout(() => {
                    barFillBefore.style.height = '40%';
                    setTimeout(() => {
                        valueBefore.classList.add('show');
                    }, 500);
                }, 200);
            }, 1500);

            // Sequence 3: Show training process and animate progress bar (2.5s)
            setTimeout(() => {
                training.classList.add('show');
                
                // Animate progress bar with variable speed (fast-slow-fast pattern)
                // 0-30%: fast (0.8s)
                setTimeout(() => {
                    trainingProgressFill.style.transition = 'width 0.8s ease-out';
                    trainingProgressFill.style.width = '30%';
                }, 100);
                
                // 30-60%: slow (1.2s)
                setTimeout(() => {
                    trainingProgressFill.style.transition = 'width 1.2s ease-in-out';
                    trainingProgressFill.style.width = '60%';
                }, 900);
                
                // 60-85%: medium (0.9s)
                setTimeout(() => {
                    trainingProgressFill.style.transition = 'width 0.9s ease-in-out';
                    trainingProgressFill.style.width = '85%';
                }, 2100);
                
                // 85-100%: slow (1s)
                setTimeout(() => {
                    trainingProgressFill.style.transition = 'width 1s ease-in';
                    trainingProgressFill.style.width = '100%';
                }, 3000);
            }, 3000);

            // Sequence 4: After progress bar completes, show "Fine-tuning" result and animate bar (6.5s)
            setTimeout(() => {
                resultAfter.classList.add('show');
                setTimeout(() => {
                    barFillAfter.style.height = '85%';
                    setTimeout(() => {
                        valueAfter.classList.add('show');
                    }, 500);
                }, 200);
            }, 7000);

            // Sequence 5: Reset and loop (10s)
            setTimeout(() => {
                initFinetuneDemo();
            }, 10000);
        }

        // Check page 4 in updatePagePositions
        const originalUpdatePagePositions = updatePagePositions;
        updatePagePositions = function() {
            originalUpdatePagePositions();
            checkPage4();
            checkPage6();
            checkPage7();
            checkPage13();
            checkPage14();
            checkPage15();
            checkPage17();
            // Store previousPage before calling handlePage4SlideOut, as it may be updated inside
            const savedPreviousPage = previousPage;
            handlePage4SlideOut();
            // Restore previousPage if it was modified inside handlePage4SlideOut
            // (Actually, we want to use the saved value for the check)
        };

        // Handle page 4, page 5, and page 6 slide animations
        let previousPage = 0;
        let titleAnimationInProgress = false; // Flag to prevent multiple animations
        function handlePage4SlideOut() {
            const page4 = document.getElementById('page4');
            const page5 = document.getElementById('page5');
            const page6 = document.getElementById('page6');
            
            // Debug: Log current state
            // console.log('handlePage4SlideOut: currentPage=', currentPage, 'previousPage=', previousPage);
            
            // Special handling: if we're on page 5 (currentPage === 4) and title has move-up-out,
            // it means we just came back from page 6, so remove it
            if (currentPage === 4) {
                const page5TitleCheck = document.querySelector('.page5-title');
                if (page5TitleCheck && page5TitleCheck.classList.contains('move-up-out') && !titleAnimationInProgress) {
                    // We're on page 5 and title still has move-up-out, remove it and animate down
                    titleAnimationInProgress = true;
                    page5TitleCheck.classList.remove('move-up-out');
                    page5TitleCheck.classList.remove('move-down-in');
                    page5TitleCheck.style.transform = '';
                    void page5TitleCheck.offsetHeight;
                    
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            if (page5TitleCheck.classList.contains('move-up-out')) {
                                page5TitleCheck.classList.remove('move-up-out');
                            }
                            page5TitleCheck.style.transform = 'translateY(-150vh)';
                            void page5TitleCheck.offsetHeight;
                            page5TitleCheck.classList.add('move-down-in');
                            
                            setTimeout(() => {
                                if (page5TitleCheck) {
                                    page5TitleCheck.classList.remove('move-down-in');
                                    page5TitleCheck.style.transform = '';
                                    page5TitleCheck.classList.remove('move-up-out');
                                    titleAnimationInProgress = false;
                                }
                            }, 800);
                        });
                    });
                }
                
                // Special handling: if we're on page 5 and rag-file-stack-3d has move-to-top,
                // it means we just came back from page 6, so restore it
                const ragFileStackCheck = document.querySelector('.rag-file-stack-3d.fixed-position');
                
                if (ragFileStackCheck && ragFileStackCheck.classList.contains('move-to-top')) {
                    // Remove move-to-top class first
                    ragFileStackCheck.classList.remove('move-to-top');
                    
                    // Force reflow
                    void ragFileStackCheck.offsetHeight;
                    
                    // Use requestAnimationFrame to ensure DOM is updated
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            // First, restore rag-file-stack-3d to its original position
                            // Get rag-left to calculate where rag-file-stack-3d should be
                            const ragLeft = document.querySelector('.rag-left');
                            if (ragLeft && ragFileStackCheck) {
                                const rect = ragLeft.getBoundingClientRect();
                                // rag-file-stack-3d should be positioned at rag-left's top
                                ragFileStackCheck.style.top = `${rect.top}px`;
                                
                                // Force reflow to apply rag-file-stack-3d position
                                void ragFileStackCheck.offsetHeight;
                            }
                        });
                    });
                }
            }
            
            // Handle page 4
            if (page4) {
                if (currentPage === 4) {
                    // On page 5, slide out page 4 to the left
                    page4.classList.add('slide-out');
                } else if (currentPage === 3 && previousPage === 4) {
                    // Coming back from page 5 to page 4, slide in from left
                    page4.classList.remove('slide-out');
                    
                    // Update rag-file-stack-3d position when page 4 slides back in
                    // Wait for page 4 animation to complete, then update position
                    setTimeout(() => {
                        const ragFileStack = document.querySelector('.rag-file-stack-3d.fixed-position');
                        if (ragFileStack) {
                            const ragLeft = document.querySelector('.rag-left');
                            if (ragLeft) {
                                const rect = ragLeft.getBoundingClientRect();
                                ragFileStack.style.left = `${rect.left}px`;
                                ragFileStack.style.top = `${rect.top}px`;
                            }
                        }
                    }, 850); // Wait for page 4 slide animation to complete (0.8s)
                } else if (currentPage < 3) {
                    // Before page 4, reset
                    page4.classList.remove('slide-out');
                }
            }
            
            // Handle page 5
            if (page5) {
                if (currentPage === 4) {
                    // Entering page 5, slide in from right
                    page5.classList.remove('slide-out');
                    page5.classList.add('slide-in');
                    
                    // rag-file-stack-3d is already positioned, no need to align icons
                } else if (currentPage === 3 && previousPage === 4) {
                    // Coming back from page 5 to page 4, slide out to right
                    page5.classList.remove('slide-in');
                    page5.classList.add('slide-out');
                    
                    // No icons to hide
                    
                    // Remove slide-out class after animation completes (0.8s)
                    setTimeout(() => {
                        if (page5 && currentPage === 3) {
                            page5.classList.remove('slide-out');
                        }
                    }, 800);
                } else if (currentPage === 5 && previousPage === 4) {
                    // Moving from page 5 to page 6
                    // Keep page5 visible so title and icons can animate
                    page5.classList.add('stay-visible');
                    
                    // Move title up and out
                    const page5Title = document.querySelector('.page5-title');
                    if (page5Title) {
                        page5Title.style.opacity = '1';
                        page5Title.style.visibility = 'visible';
                        page5Title.style.display = 'block';
                        page5Title.classList.add('move-up-out');
                    }
                    
                    // Move rag-file-stack-3d to top
                    const ragFileStack = document.querySelector('.rag-file-stack-3d.fixed-position');
                    
                    // Move rag-file-stack-3d to top
                    setTimeout(() => {
                        if (ragFileStack) {
                            ragFileStack.classList.add('move-to-top');
                        }
                    }, 50);
                } else if (currentPage === 4 && previousPage === 5 && !titleAnimationInProgress) {
                    // Coming back from page 6 to page 5
                    // console.log('Coming back from page 6 to page 5');
                    
                    // Set flag to prevent multiple animations
                    titleAnimationInProgress = true;
                    
                    // Remove stay-visible class
                    page5.classList.remove('stay-visible');
                    
                    // Move rag-file-stack-3d back to its original position
                    const ragFileStackRestore = document.querySelector('.rag-file-stack-3d.fixed-position');
                    
                    // Remove move-to-top class to trigger CSS restoration
                    if (ragFileStackRestore) {
                        ragFileStackRestore.classList.remove('move-to-top');
                    }
                    
                    // Force a reflow to ensure class removal is processed
                    void (ragFileStackRestore && ragFileStackRestore.offsetHeight);
                    
                    // Use requestAnimationFrame to ensure DOM is updated before setting new positions
                    requestAnimationFrame(() => {
                        requestAnimationFrame(() => {
                            // First, restore rag-file-stack-3d to its original position
                            // Get rag-left to calculate where rag-file-stack-3d should be
                            const ragLeft = document.querySelector('.rag-left');
                            if (ragLeft && ragFileStackRestore) {
                                const rect = ragLeft.getBoundingClientRect();
                                // rag-file-stack-3d should be positioned at rag-left's top
                                ragFileStackRestore.style.top = `${rect.top}px`;
                                
                                // Force reflow to apply rag-file-stack-3d position
                                void ragFileStackRestore.offsetHeight;
                            }
                        });
                    });
                    
                    // Move title down from top
                    const page5TitleBack = document.querySelector('.page5-title');
                    if (page5TitleBack) {
                        // console.log('Title found, current classes:', page5TitleBack.classList.toString());
                        // First, ensure title is visible
                        page5TitleBack.style.opacity = '1';
                        page5TitleBack.style.visibility = 'visible';
                        page5TitleBack.style.display = 'block';
                        
                        // IMPORTANT: Remove move-up-out class first and ensure it stays removed
                        page5TitleBack.classList.remove('move-up-out');
                        
                        // Also remove move-down-in if it exists from a previous attempt
                        page5TitleBack.classList.remove('move-down-in');
                        
                        // Clear any inline transform to let animation control it
                        page5TitleBack.style.transform = '';
                        
                        // Force a reflow to ensure class removal is processed
                        void page5TitleBack.offsetHeight;
                        
                        // Verify the class was removed
                        if (page5TitleBack.classList.contains('move-up-out')) {
                            // If still there, force remove again
                            page5TitleBack.classList.remove('move-up-out');
                            void page5TitleBack.offsetHeight;
                        }
                        
                        // Use double requestAnimationFrame to ensure DOM is fully updated
                        requestAnimationFrame(() => {
                            requestAnimationFrame(() => {
                                // Double-check move-up-out is removed
                                if (page5TitleBack.classList.contains('move-up-out')) {
                                    page5TitleBack.classList.remove('move-up-out');
                                }
                                
                                // Set initial position via inline style
                                page5TitleBack.style.transform = 'translateY(-150vh)';
                                
                                // Force another reflow
                                void page5TitleBack.offsetHeight;
                                
                                // Now add animation class
                                page5TitleBack.classList.add('move-down-in');
                                
                                // Remove animation class and inline style after animation completes
                                setTimeout(() => {
                                    if (page5TitleBack) {
                                        page5TitleBack.classList.remove('move-down-in');
                                        page5TitleBack.style.transform = ''; // Clear inline style
                                        // Ensure move-up-out is still removed
                                        page5TitleBack.classList.remove('move-up-out');
                                        // Reset flag
                                        titleAnimationInProgress = false;
                                    }
                                }, 800);
                            });
                        });
                    } else {
                        // Reset flag if title not found
                        titleAnimationInProgress = false;
                    }
                    // No icons to show
                } else if (currentPage < 3) {
                    // Before page 4, reset
                    page5.classList.remove('slide-in', 'slide-out');
                    const page5Title = document.querySelector('.page5-title');
                    if (page5Title) {
                        page5Title.classList.remove('move-up-out', 'move-down-in');
                    }
                }
            }
            
            // Handle page 6
            if (page6) {
                if (currentPage === 5) {
                    // On page 6, make sure page6 is visible
                    page6.style.opacity = '1';
                    page6.style.visibility = 'visible';
                    page6.style.transform = '';
                } else {
                    // Not on page 6, hide it
                    page6.style.opacity = '0';
                    page6.style.visibility = 'hidden';
                    page6.style.transform = '';
                }
            }
            
            // Handle page 7
            const page7 = document.getElementById('page7');
            const page7Container = page7 ? page7.querySelector('.page7-container') : null;
            if (page7) {
                if (currentPage === 6) {
                    // On page 7, make sure page7 is visible
                    page7.style.opacity = '1';
                    page7.style.visibility = 'visible';
                    page7.style.transform = '';
                    if (page7Container) {
                        page7Container.classList.remove('slide-up-out');
                        page7Container.style.transform = '';
                        page7Container.style.opacity = '';
                    }
                    
                    // Ensure rag-file-stack-3d is visible on page 7
                    const ragFileStack = document.querySelector('.rag-file-stack-3d.fixed-position');
                    if (ragFileStack) {
                        ragFileStack.style.display = '';
                    }
                } else if (currentPage === 7 && previousPage === 6) {
                    // Transitioning from page 7 to page 8, slide up and fade out
                    if (page7Container) {
                        page7Container.classList.add('slide-up-out');
                    }
                } else if (currentPage === 7) {
                    // On page 8, keep page7 sliding up
                    if (page7Container && !page7Container.classList.contains('slide-up-out')) {
                        page7Container.classList.add('slide-up-out');
                    }
                } else {
                    // Not on page 7, hide it
                    page7.style.opacity = '0';
                    page7.style.visibility = 'hidden';
                    page7.style.transform = '';
                    if (page7Container) {
                        page7Container.classList.remove('slide-up-out');
                        page7Container.style.transform = '';
                        page7Container.style.opacity = '';
                    }
                }
            }
            
            // Handle StatPal wrapper (page8 and page9)
            const statpalWrapper = document.getElementById('statpalWrapper');
            const page8 = document.getElementById('page8');
            const page8Header = document.getElementById('page8Header');
            const page8Container = page8 ? page8.querySelector('.page8-container') : null;
            
            if (statpalWrapper) {
                if (currentPage === 7) {
                    // On page 8, make sure statpal-wrapper is visible and slides in from bottom
                    statpalWrapper.style.opacity = '1';
                    statpalWrapper.style.visibility = 'visible';
                    // Force reflow to ensure initial state is applied
                    void statpalWrapper.offsetHeight;
                    statpalWrapper.classList.add('visible');
                    
                    // Reset header and container positions
                    if (page8Header) {
                        page8Header.classList.remove('move-to-top');
                        // Clear inline styles to let CSS handle positioning
                        page8Header.style.position = '';
                        page8Header.style.top = '';
                        page8Header.style.left = '';
                        page8Header.style.transform = '';
                        page8Header.style.opacity = '';
                        page8Header.style.visibility = '';
                    }
                    if (page8Container) {
                        page8Container.classList.remove('slide-out-left');
                        page8Container.style.transform = '';
                        page8Container.style.opacity = '';
                    }
                    
                    // Hide rag-file-stack-3d on page 8
                    const ragFileStack = document.querySelector('.rag-file-stack-3d.fixed-position');
                    if (ragFileStack) {
                        ragFileStack.style.display = 'none';
                    }
                } else if (currentPage === 8 && previousPage === 7) {
                    // Transitioning from page 8 to page 9
                    // Move header to top
                    if (page8Header) {
                        page8Header.classList.add('move-to-top');
                    }
                    // Slide container out to left
                    if (page8Container) {
                        page8Container.classList.add('slide-out-left');
                    }
                } else if (currentPage === 8 || currentPage === 9 || currentPage === 10) {
                    // On page 9, 10, or 11, keep statpal-wrapper visible
                    statpalWrapper.style.opacity = '1';
                    statpalWrapper.style.visibility = 'visible';
                    statpalWrapper.classList.add('visible');
                    // Keep header at top and container out
                    if (page8Header && !page8Header.classList.contains('move-to-top')) {
                        page8Header.classList.add('move-to-top');
                    }
                    if (page8Container && !page8Container.classList.contains('slide-out-left')) {
                        page8Container.classList.add('slide-out-left');
                    }
                } else if (currentPage === 7 && (previousPage === 8 || previousPage === 9 || previousPage === 10 || previousPage === 11)) {
                    // Coming back from page 9 to page 8
                    // Move header back to original position
                    if (page8Header) {
                        page8Header.classList.remove('move-to-top');
                        // Clear inline styles to let CSS handle positioning
                        page8Header.style.position = '';
                        page8Header.style.top = '';
                        page8Header.style.left = '';
                        page8Header.style.transform = '';
                        page8Header.style.opacity = '';
                        page8Header.style.visibility = '';
                    }
                    // Slide container back in from left
                    if (page8Container) {
                        page8Container.classList.remove('slide-out-left');
                        page8Container.style.transform = '';
                        page8Container.style.opacity = '';
                    }
                } else {
                    // Not on page 8 or 9, hide wrapper and reset transform
                    statpalWrapper.style.opacity = '0';
                    statpalWrapper.style.visibility = 'hidden';
                    statpalWrapper.style.transform = 'translateY(100vh)';
                    statpalWrapper.classList.remove('visible');
                    
                    // Reset header and container
                    if (page8Header) {
                        page8Header.classList.remove('move-to-top');
                        // Clear inline styles to let CSS handle positioning
                        page8Header.style.position = '';
                        page8Header.style.top = '';
                        page8Header.style.left = '';
                        page8Header.style.transform = '';
                        page8Header.style.opacity = '';
                        page8Header.style.visibility = '';
                    }
                    if (page8Container) {
                        page8Container.classList.remove('slide-out-left');
                        page8Container.style.transform = '';
                        page8Container.style.opacity = '';
                    }
                    
                    // Show rag-file-stack-3d again when leaving page 8 (back to page 7)
                    if (previousPage === 7 && currentPage === 6) {
                        const ragFileStack = document.querySelector('.rag-file-stack-3d.fixed-position');
                        if (ragFileStack) {
                            ragFileStack.style.display = '';
                        }
                    }
                }
            }
            
            // Handle page 9
            const page9 = document.getElementById('page9');
            if (page9) {
                if (currentPage === 8) {
                    // On page 9, make sure page9 is visible and slides in from right
                    page9.style.opacity = '1';
                    page9.style.visibility = 'visible';
                    // Set initial position (off-screen to the right)
                    page9.style.transform = 'translateX(100vw)';
                    // Force reflow to ensure initial state is applied
                    void page9.offsetHeight;
                    // Then add visible class to trigger slide-in animation
                    page9.classList.add('visible');
                    page9.classList.remove('slide-out-right');
                } else if (currentPage === 9 && previousPage === 8) {
                    // Transitioning from page 9 to page 10, slide out to left
                    // Remove visible class first, then add slide-out-left (same as page8-container)
                    page9.classList.remove('visible');
                    // Force reflow to ensure visible class removal is processed
                    void page9.offsetHeight;
                    // Then add slide-out-left class to trigger animation
                    page9.classList.add('slide-out-left');
                } else if (currentPage === 8 && previousPage === 9) {
                    // Coming back from page 10 to page 9, slide in from left
                    page9.classList.remove('slide-out-left');
                    page9.style.opacity = '1';
                    page9.style.visibility = 'visible';
                    page9.style.transform = 'translateX(-100vw)';
                    void page9.offsetHeight;
                    page9.classList.add('visible');
                } else if (currentPage === 9 && previousPage === 10) {
                    // Coming back from page 11 to page 10, then to page 9
                    // Ensure page9 is visible and in correct position
                    page9.style.opacity = '1';
                    page9.style.visibility = 'visible';
                    page9.style.transform = 'translateX(0)';
                    page9.classList.add('visible');
                    page9.classList.remove('slide-out-right');
                    page9.classList.remove('slide-out-left');
                } else if (currentPage === 7 && (previousPage === 8 || previousPage === 9)) {
                    // Coming back from page 9 to page 8, slide out to right
                    page9.classList.remove('visible');
                    page9.classList.add('slide-out-right');
                    // Remove slide-out-right after animation
                    setTimeout(() => {
                        if (page9 && currentPage === 7) {
                            page9.style.opacity = '0';
                            page9.style.visibility = 'hidden';
                            page9.style.transform = 'translateX(100vw)';
                            page9.classList.remove('slide-out-right');
                        }
                    }, 800);
                } else {
                    // Not on page 9, hide it and reset transform
                    page9.style.opacity = '0';
                    page9.style.visibility = 'hidden';
                    page9.style.transform = 'translateX(100vw)';
                    page9.classList.remove('visible');
                    page9.classList.remove('slide-out-right');
                    page9.classList.remove('slide-out-left');
                }
            }
            
            // Handle page 10
            const page10 = document.getElementById('page10');
            if (page10) {
                if (currentPage === 9) {
                    // On page 10, make sure page10 is visible and slides in from right
                    page10.style.opacity = '1';
                    page10.style.visibility = 'visible';
                    // Set initial position (off-screen to the right)
                    page10.style.transform = 'translateX(100vw)';
                    // Force reflow to ensure initial state is applied
                    void page10.offsetHeight;
                    // Then add visible class to trigger slide-in animation
                    page10.classList.add('visible');
                    page10.classList.remove('slide-out-right');
                    page10.classList.remove('slide-out-left');
                } else if (currentPage === 10 && previousPage === 9) {
                    // Transitioning from page 10 to page 11, slide out to left
                    // Remove visible class first, then add slide-out-left (same as page9)
                    page10.classList.remove('visible');
                    // Force reflow to ensure visible class removal is processed
                    void page10.offsetHeight;
                    // Then add slide-out-left class to trigger animation
                    page10.classList.add('slide-out-left');
                } else if (currentPage === 10 && previousPage === 11) {
                    // Coming back from studygroup intro to page 11, then to page 10
                    // Ensure page10 is visible and in correct position
                    page10.style.opacity = '1';
                    page10.style.visibility = 'visible';
                    page10.style.transform = 'translateX(0)';
                    page10.classList.add('visible');
                    page10.classList.remove('slide-out-right');
                    page10.classList.remove('slide-out-left');
                } else if (currentPage === 8 && previousPage === 9) {
                    // Coming back from page 10 to page 9, slide out to right
                    page10.classList.remove('visible');
                    page10.classList.remove('slide-out-left');
                    page10.style.transform = 'translateX(100vw)';
                    page10.style.opacity = '0';
                    setTimeout(() => {
                        if (page10 && currentPage === 8) {
                            page10.style.visibility = 'hidden';
                        }
                    }, 800);
                } else {
                    // Not on page 10, hide it and reset transform
                    page10.style.opacity = '0';
                    page10.style.visibility = 'hidden';
                    page10.style.transform = 'translateX(100vw)';
                    page10.classList.remove('visible');
                    page10.classList.remove('slide-out-right');
                    page10.classList.remove('slide-out-left');
                }
            }
            
            // Handle page 11
            const page11 = document.getElementById('page11');
            if (page11) {
                if (currentPage === 10) {
                    // On page 11, make sure page11 is visible and slides in from right
                    page11.style.opacity = '1';
                    page11.style.visibility = 'visible';
                    // Set initial position (off-screen to the right)
                    page11.style.transform = 'translateX(100vw)';
                    // Force reflow to ensure initial state is applied
                    void page11.offsetHeight;
                    // Then add visible class to trigger slide-in animation
                    page11.classList.add('visible');
                    page11.classList.remove('slide-out-right');
                    page11.classList.remove('slide-out-left');
                } else if (currentPage === 9 && previousPage === 10) {
                    // Coming back from page 11 to page 10, slide out to right
                    page11.classList.remove('visible');
                    page11.classList.remove('slide-out-left');
                    page11.style.transform = 'translateX(100vw)';
                    page11.style.opacity = '0';
                    setTimeout(() => {
                        if (page11 && currentPage === 9) {
                            page11.style.visibility = 'hidden';
                        }
                    }, 800);
                } else if (currentPage === 10 && previousPage === 11) {
                    // Coming back from studygroup intro to page 11, ensure page11 is visible
                    page11.style.opacity = '1';
                    page11.style.visibility = 'visible';
                    page11.style.transform = 'translateX(0)';
                    page11.classList.add('visible');
                    page11.classList.remove('slide-out-right');
                    page11.classList.remove('slide-out-left');
                } else {
                    // Not on page 11, hide it and reset transform
                    page11.style.opacity = '0';
                    page11.style.visibility = 'hidden';
                    page11.style.transform = 'translateX(100vw)';
                    page11.classList.remove('visible');
                    page11.classList.remove('slide-out-right');
                    page11.classList.remove('slide-out-left');
                }
            }
            
            // Clean up any duplicate rag-file-stack-3d elements when transitioning
            if (currentPage === 3 && previousPage === 4) {
                // Coming back from page 5, ensure rag-file-stack-3d is properly handled
                setTimeout(() => {
                    const ragFileStacks = document.querySelectorAll('.rag-file-stack-3d');
                    if (ragFileStacks.length > 1) {
                        // Keep only the one that's in the correct position
                        // If current card is RAG (index 5), keep the fixed one; otherwise keep the one in rag-left
                        const currentCardIsRAG = currentCardIndex === cards.length; // Last card is RAG
                        ragFileStacks.forEach((stack, idx) => {
                            if (idx > 0) {
                                // Remove duplicates, keeping the first one
                                if (!currentCardIsRAG || !stack.classList.contains('fixed-position')) {
                                    stack.remove();
                                }
                            }
                        });
                    }
                }, 100);
            }
            
            // Determine if we're transitioning between page 4 and 5
            // Check based on current page and the actual state of page 4/page 5 elements
            if (currentPage === 4) {
                // On page 5, fix vertical position
                isTransitioningBetweenPage4And5 = true;
            } else if (currentPage === 3) {
                // On page 4, check if we're transitioning from page 5
                // If page 5 has slide-out class, we're in the middle of transition from page 5 to page 4
                if (page5 && page5.classList.contains('slide-out')) {
                    // Coming back from page 5 to page 4, fix vertical position during transition
                    isTransitioningBetweenPage4And5 = true;
                } else if (previousPage === 4) {
                    // Just came from page 5, fix vertical position (will be reset on next call if not transitioning)
                    isTransitioningBetweenPage4And5 = true;
                } else {
                    // Normal state on page 4, allow vertical scrolling
                    isTransitioningBetweenPage4And5 = false;
                }
            } else {
                // Allow normal vertical scrolling for all other cases
                isTransitioningBetweenPage4And5 = false;
            }
            
            // Update previous page for next call
            // Note: previousPage should be updated BEFORE handlePage4SlideOut is called
            // This update happens at the end of the function, so it will be used in the NEXT call
            // For the current call, previousPage was already set before this function was called
            previousPage = currentPage;
        }

        // Keyboard navigation
        window.addEventListener('keydown', (e) => {
            if (isScrolling) return;

            // Special handling for page 4 (AI Capabilities Ecosystem)
            if (currentPage === 3 && deckInitialized) {
                // Prevent multiple card changes in quick succession
                if (isCardChanging) {
                    return;
                }
                
                if (e.key === 'ArrowDown' || e.key === 'PageDown') {
                    e.preventDefault();
                    // If on last card, allow page navigation
                    if (currentCardIndex >= cards.length) {
                        const newPage = Math.min(currentPage + 1, pages.length - 1);
                        if (newPage !== currentPage) {
                            currentPage = newPage;
                            targetScroll = currentPage * pageHeight;
                            isScrolling = true;
                            animationStartTime = null;
                            requestAnimationFrame(smoothScroll);
                        }
                    } else {
                        // Move to next card
                        isEnteringFromPreviousPage = false;
                        isCardChanging = true;
                        showCard(currentCardIndex);
                        setTimeout(() => {
                            isCardChanging = false;
                        }, 500);
                    }
                    return;
                } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
                    e.preventDefault();
                    // If on first card, allow page navigation
                    if (currentCardIndex <= 1) {
                        const newPage = Math.max(currentPage - 1, 0);
                        if (newPage !== currentPage) {
                            currentPage = newPage;
                            targetScroll = currentPage * pageHeight;
                            isScrolling = true;
                            animationStartTime = null;
                            requestAnimationFrame(smoothScroll);
                        }
                    } else {
                        // Move to previous card
                        isEnteringFromPreviousPage = false;
                        isCardChanging = true;
                        showCard(currentCardIndex - 2);
                        setTimeout(() => {
                            isCardChanging = false;
                        }, 500);
                    }
                    return;
                }
            }

            let newPage = currentPage;
            if (e.key === 'ArrowDown' || e.key === 'PageDown') {
                newPage = Math.min(currentPage + 1, pages.length - 1);
            } else if (e.key === 'ArrowUp' || e.key === 'PageUp') {
                newPage = Math.max(currentPage - 1, 0);
            } else if (e.key === 'Home') {
                newPage = 0;
            } else if (e.key === 'End') {
                newPage = pages.length - 1;
            }

            if (newPage !== currentPage) {
                e.preventDefault();
                // If moving to page 4 from page 3, set flag for entering from previous page
                if (newPage === 3 && currentPage === 2) {
                    isEnteringFromPreviousPage = true;
                } else if (newPage === 3 && currentPage === 4) {
                    // Coming back from page 5, show last card
                    isEnteringFromPreviousPage = false;
                    if (deckInitialized) {
                        isCardChanging = true;
                        currentCardIndex = cards.length;
                        showCard(cards.length - 1);
                        setTimeout(() => {
                            isCardChanging = false;
                        }, 500);
                    }
                } else {
                    isEnteringFromPreviousPage = false;
                }
                currentPage = newPage;
                targetScroll = currentPage * pageHeight;
                isScrolling = true;
                animationStartTime = null;
                requestAnimationFrame(smoothScroll);
            }
        });
    </script>
</body>
</html>
